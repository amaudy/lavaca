/*
Lavaca 1.0.5
Copyright (c) 2012 Mutual Mobile

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

Contains components from or inspired by:

Simple Reset
(c) 2011 Eric Meyer
Released to public domain

jQuery v1.7.1
(c) 2011, John Resig
Dual licensed under the MIT or GPL Version 2 licenses.

Sizzle.js
(c) 2011, The Dojo Foundation
Released under the MIT, BSD, and GPL licenses.

Backbone.js 0.9.1 and Underscore.js 1.3.1
(c) 2012, Jeremy Ashkenas, DocumentCloud Inc
Released under the MIT license.

Dust.js v0.3.0
(c) 2010, Aleksander Williams
Released under the MIT license.

Zepto.js 0.8.0
(c) 2011 Thomas Fuchs
Released under the MIT license

ChildBrowser
(c) 2012 Jesse MacFadyen, Nitobi
Released under the MIT license

lz77.js
(c) 2009 Olle Törnström
Released under the MIT license

iScroll 4.1.9
(c) 2011 Matteo Spinelli
Released under the MIT license
*/
(function(c){String.prototype.trim===c&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});Array.prototype.reduce===c&&(Array.prototype.reduce=function(g){if(void 0===this||null===this)throw new TypeError;var k=Object(this),h=k.length>>>0,f=0,b;if("function"!=typeof g)throw new TypeError;if(0==h&&1==arguments.length)throw new TypeError;if(2<=arguments.length)b=arguments[1];else{do{if(f in k){b=k[f++];break}if(++f>=h)throw new TypeError;}while(1)}for(;f<h;)f in k&&
(b=g.call(c,b,k[f],f,k)),f++;return b})})();
var Zepto=function(){function c(a){return"[object Function]"==G.call(a)}function g(a){return a instanceof Object}function k(a){var e,d;if("[object Object]"!==G.call(a))return!1;d=c(a.constructor)&&a.constructor.prototype;if(!d||!hasOwnProperty.call(d,"isPrototypeOf"))return!1;for(e in a);return e===n||hasOwnProperty.call(a,e)}function h(a){return a instanceof Array}function f(a){return a.filter(function(a){return a!==n&&null!==a})}function b(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,
"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function a(a){return a in r?r[a]:r[a]=RegExp("(^|\\s)"+a+"(\\s|$)")}function d(a,e){return e===n?o(a):o(a).filter(e)}function e(a,e,d,f){return c(e)?e.call(a,d,f):e}function l(a,e,d){var f=a%2?e:e.parentNode;f?f.insertBefore(d,!a?e.nextSibling:1==a?f.firstChild:2==a?e:null):o(d).remove()}function i(a,e){e(a);for(var d in a.childNodes)i(a.childNodes[d],e)}var n,p,o,t,q=[],s=q.slice,u=window.document,v={},r={},x=u.defaultView.getComputedStyle,
A={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},C=/^\s*<(\w+|!)[^>]*>/,L=[1,3,8,9,11],H=u.createElement("table"),R=u.createElement("tr"),B={tr:u.createElement("tbody"),tbody:H,thead:H,tfoot:H,td:R,th:R,"*":u.createElement("div")},D=/complete|loaded|interactive/,E=/^\.([\w-]+)$/,z=/^#([\w-]+)$/,M=/^[\w-]+$/,G={}.toString,w={},I,F,O=u.createElement("div");w.matches=function(a,e){if(!a||1!==a.nodeType)return!1;var d=a.webkitMatchesSelector||a.mozMatchesSelector||
a.oMatchesSelector||a.matchesSelector;if(d)return d.call(a,e);var f;f=a.parentNode;(d=!f)&&(f=O).appendChild(a);f=~w.qsa(f,e).indexOf(a);d&&O.removeChild(a);return f};I=function(a){return a.replace(/-+(.)?/g,function(a,e){return e?e.toUpperCase():""})};F=function(a){return a.filter(function(e,d){return a.indexOf(e)==d})};w.fragment=function(a,e){e===n&&(e=C.test(a)&&RegExp.$1);e in B||(e="*");var d=B[e];d.innerHTML=""+a;return o.each(s.call(d.childNodes),function(){d.removeChild(this)})};w.Z=function(a,
e){a=a||[];a.__proto__=arguments.callee.prototype;a.selector=e||"";return a};w.isZ=function(a){return a instanceof w.Z};w.init=function(a,e){if(a){if(c(a))return o(u).ready(a);if(w.isZ(a))return a;var d;if(h(a))d=f(a);else if(k(a))d=[o.extend({},a)],a=null;else if(0<=L.indexOf(a.nodeType)||a===window)d=[a],a=null;else if(C.test(a))d=w.fragment(a.trim(),RegExp.$1),a=null;else{if(e!==n)return o(e).find(a);d=w.qsa(u,a)}return w.Z(d,a)}return w.Z()};o=function(a,e){return w.init(a,e)};o.extend=function(a){s.call(arguments,
1).forEach(function(e){for(p in e)e[p]!==n&&(a[p]=e[p])});return a};w.qsa=function(a,e){var d;return a===u&&z.test(e)?(d=a.getElementById(RegExp.$1))?[d]:q:1!==a.nodeType&&9!==a.nodeType?q:s.call(E.test(e)?a.getElementsByClassName(RegExp.$1):M.test(e)?a.getElementsByTagName(e):a.querySelectorAll(e))};o.isFunction=c;o.isObject=g;o.isArray=h;o.isPlainObject=k;o.inArray=function(a,e,d){return q.indexOf.call(e,a,d)};o.trim=function(a){return a.trim()};o.uuid=0;o.map=function(a,e){var d,f=[],b;if("number"==
typeof a.length)for(b=0;b<a.length;b++)d=e(a[b],b),null!=d&&f.push(d);else for(b in a)d=e(a[b],b),null!=d&&f.push(d);return 0<f.length?[].concat.apply([],f):f};o.each=function(a,e){var d;if("number"==typeof a.length)for(d=0;d<a.length&&!1!==e.call(a[d],d,a[d]);d++);else for(d in a)if(!1===e.call(a[d],d,a[d]))break;return a};o.fn={forEach:q.forEach,reduce:q.reduce,push:q.push,indexOf:q.indexOf,concat:q.concat,map:function(a){return o.map(this,function(e,d){return a.call(e,d,e)})},slice:function(){return o(s.apply(this,
arguments))},ready:function(a){D.test(u.readyState)?a(o):u.addEventListener("DOMContentLoaded",function(){a(o)},!1);return this},get:function(a){return a===n?s.call(this):this[a]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){this.forEach(function(e,d){a.call(e,d,e)});return this},filter:function(a){return o([].filter.call(this,function(e){return w.matches(e,
a)}))},add:function(a,e){return o(F(this.concat(o(a,e))))},is:function(a){return 0<this.length&&w.matches(this[0],a)},not:function(a){var e=[];if(c(a)&&a.call!==n)this.each(function(d){a.call(this,d)||e.push(this)});else{var d="string"==typeof a?this.filter(a):"number"==typeof a.length&&c(a.item)?s.call(a):o(a);this.forEach(function(a){0>d.indexOf(a)&&e.push(a)})}return o(e)},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!g(a)?a:o(a)},last:function(){var a=
this[this.length-1];return a&&!g(a)?a:o(a)},find:function(a){var e;e=1==this.length?w.qsa(this[0],a):this.map(function(){return w.qsa(this,a)});return o(e)},closest:function(a,e){for(var d=this[0];d&&!w.matches(d,a);)d=d!==e&&d!==u&&d.parentNode;return o(d)},parents:function(a){for(var e=[],f=this;0<f.length;)f=o.map(f,function(a){if((a=a.parentNode)&&a!==u&&0>e.indexOf(a))return e.push(a),a});return d(e,a)},parent:function(a){return d(F(this.pluck("parentNode")),a)},children:function(a){return d(this.map(function(){return s.call(this.children)}),
a)},siblings:function(a){return d(this.map(function(a,e){return s.call(e.parentNode.children).filter(function(a){return a!==e})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return this.map(function(){return this[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null);if("none"==x(this,"").getPropertyValue("display")){var a=this.style,e=this.nodeName,d,f;v[e]||(d=u.createElement(e),u.body.appendChild(d),f=
x(d,"").getPropertyValue("display"),d.parentNode.removeChild(d),"none"==f&&(f="block"),v[e]=f);a.display=v[e]}})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return this.each(function(){o(this).wrapAll(o(a)[0].cloneNode(!1))})},wrapAll:function(a){this[0]&&(o(this[0]).before(a=o(a)),a.append(this));return this},unwrap:function(){this.parent().each(function(){o(this).replaceWith(o(this).children())});return this},clone:function(){return o(this.map(function(){return this.cloneNode(!0)}))},
hide:function(){return this.css("display","none")},toggle:function(a){return(a===n?"none"==this.css("display"):a)?this.show():this.hide()},prev:function(){return o(this.pluck("previousElementSibling"))},next:function(){return o(this.pluck("nextElementSibling"))},html:function(a){return a===n?0<this.length?this[0].innerHTML:null:this.each(function(d){var f=this.innerHTML;o(this).empty().append(e(this,a,d,f))})},text:function(a){return a===n?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=
a})},attr:function(a,d){var f;return"string"==typeof a&&d===n?0==this.length||1!==this[0].nodeType?n:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(f=this[0].getAttribute(a))&&a in this[0]?this[0][a]:f:this.each(function(f){if(1===this.nodeType)if(g(a))for(p in a)this.setAttribute(p,a[p]);else this.setAttribute(a,e(this,d,f,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&this.removeAttribute(a)})},prop:function(a,d){return d===n?this[0]?this[0][a]:
n:this.each(function(f){this[a]=e(this,d,f,this[a])})},data:function(a,e){var d=this.attr("data-"+b(a),e);return null!==d?d:n},val:function(a){return a===n?0<this.length?this[0].value:n:this.each(function(d){this.value=e(this,a,d,this.value)})},offset:function(){if(0==this.length)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}},css:function(a,e){if(e===n&&"string"==typeof a)return 0==this.length?n:
this[0].style[I(a)]||x(this[0],"").getPropertyValue(a);var d="";for(p in a)"string"==typeof a[p]&&""==a[p]?this.each(function(){this.style.removeProperty(b(p))}):d+=b(p)+":"+("number"==typeof a[p]&&!A[b(p)]?a[p]+"px":a[p])+";";"string"==typeof a&&(""==e?this.each(function(){this.style.removeProperty(b(a))}):d=b(a)+":"+("number"==typeof e&&!A[b(a)]?e+"px":e));return this.each(function(){this.style.cssText+=";"+d})},index:function(a){return a?this.indexOf(o(a)[0]):this.parent().children().indexOf(this[0])},
hasClass:function(e){return 1>this.length?!1:a(e).test(this[0].className)},addClass:function(a){return this.each(function(d){t=[];var f=this.className;e(this,a,d,f).split(/\s+/g).forEach(function(a){o(this).hasClass(a)||t.push(a)},this);t.length&&(this.className+=(f?" ":"")+t.join(" "))})},removeClass:function(d){return this.each(function(f){if(d===n)return this.className="";t=this.className;e(this,d,f,t).split(/\s+/g).forEach(function(e){t=t.replace(a(e)," ")});this.className=t.trim()})},toggleClass:function(a,
d){return this.each(function(f){f=e(this,a,f,this.className);(d===n?!o(this).hasClass(f):d)?o(this).addClass(f):o(this).removeClass(f)})}};["width","height"].forEach(function(a){o.fn[a]=function(d){var f,b=a.replace(/./,function(a){return a[0].toUpperCase()});return d===n?this[0]==window?window["inner"+b]:this[0]==u?u.documentElement["offset"+b]:(f=this.offset())&&f[a]:this.each(function(f){var b=o(this);b.css(a,e(this,d,f,b[a]()))})}});["after","prepend","before","append"].forEach(function(a,e){o.fn[a]=
function(){var a=o.map(arguments,function(a){return g(a)?a:w.fragment(a)});if(1>a.length)return this;var d=this.length,f=1<d,b=2>e;return this.each(function(c,h){for(var n=0;n<a.length;n++){var g=a[b?a.length-n-1:n];i(g,function(a){null!=a.nodeName&&"SCRIPT"===a.nodeName.toUpperCase()&&(!a.type||"text/javascript"===a.type)&&window.eval.call(window,a.innerHTML)});f&&c<d-1&&(g=g.cloneNode(!0));l(e,h,g)}})};o.fn[e%2?a+"To":"insert"+(e?"Before":"After")]=function(e){o(e)[a](this);return this}});w.Z.prototype=
o.fn;w.camelize=I;w.uniq=F;o.zepto=w;return o}();window.Zepto=Zepto;"$"in window||(window.$=Zepto);
(function(c){function g(a){return a._zid||(a._zid=i++)}function k(a,e,d,f){e=h(e);if(e.ns)var b=RegExp("(?:^| )"+e.ns.replace(" "," .* ?")+"(?: |$)");return(l[g(a)]||[]).filter(function(a){return a&&(!e.e||a.e==e.e)&&(!e.ns||b.test(a.ns))&&(!d||g(a.fn)===g(d))&&(!f||a.sel==f)})}function h(a){a=(""+a).split(".");return{e:a[0],ns:a.slice(1).sort().join(" ")}}function f(a,e,d){c.isObject(a)?c.each(a,d):a.split(/\s/).forEach(function(a){d(a,e)})}function b(a,e,d,b,i,n){var n=!!n,k=g(a),C=l[k]||(l[k]=
[]);f(e,d,function(e,d){var f=i&&i(d,e),l=f||d,g=function(e){var d=l.apply(a,[e].concat(e.data));!1===d&&e.preventDefault();return d},f=c.extend(h(e),{fn:d,proxy:g,sel:b,del:f,i:C.length});C.push(f);a.addEventListener(f.e,g,n)})}function a(a,e,d,b){var c=g(a);f(e||"",d,function(e,d){k(a,e,d,b).forEach(function(e){delete l[c][e.i];a.removeEventListener(e.e,e.proxy,!1)})})}function d(a){var e=c.extend({originalEvent:a},a);c.each(t,function(d,f){e[d]=function(){this[f]=p;return a[d].apply(a,arguments)};
e[f]=o});return e}function e(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var e=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0;e.call(this)}}}var l={},i=1,n={};n.click=n.mousedown=n.mouseup=n.mousemove="MouseEvents";c.event={add:b,remove:a};c.proxy=function(a,e){if(c.isFunction(a)){var d=function(){return a.apply(e,arguments)};d._zid=g(a);return d}if("string"==typeof e)return c.proxy(a[e],a);throw new TypeError("expected function");};c.fn.bind=function(a,e){return this.each(function(){b(this,
a,e)})};c.fn.unbind=function(e,d){return this.each(function(){a(this,e,d)})};c.fn.one=function(e,d){return this.each(function(f,c){b(this,e,d,null,function(e,d){return function(){var f=e.apply(c,arguments);a(c,d,e);return f}})})};var p=function(){return!0},o=function(){return!1},t={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};c.fn.delegate=function(a,e,f){var l=!1;if("blur"==e||"focus"==e)c.iswebkit?e="blur"==
e?"focusout":"focus"==e?"focusin":e:l=!0;return this.each(function(i,h){b(h,e,f,a,function(e){return function(f){var b,l=c(f.target).closest(a,h).get(0);if(l)return b=c.extend(d(f),{currentTarget:l,liveFired:h}),e.apply(l,[b].concat([].slice.call(arguments,1)))}},l)})};c.fn.undelegate=function(e,d,f){return this.each(function(){a(this,d,f,e)})};c.fn.live=function(a,e){c(document.body).delegate(this.selector,a,e);return this};c.fn.die=function(a,e){c(document.body).undelegate(this.selector,a,e);return this};
c.fn.on=function(a,e,d){return void 0==e||c.isFunction(e)?this.bind(a,e):this.delegate(e,a,d)};c.fn.off=function(a,e,d){return void 0==e||c.isFunction(e)?this.unbind(a,e):this.undelegate(e,a,d)};c.fn.trigger=function(a,d){"string"==typeof a&&(a=c.Event(a));e(a);a.data=d;return this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(a)})};c.fn.triggerHandler=function(a,e){var f,b;this.each(function(l,i){f=d("string"==typeof a?c.Event(a):a);f.data=e;f.target=i;c.each(k(i,a.type||a),function(a,
e){b=e.proxy(f);if(f.isImmediatePropagationStopped())return!1})});return b};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(a){c.fn[a]=function(e){return this.bind(a,e)}});["focus","blur"].forEach(function(a){c.fn[a]=function(e){if(e)this.bind(a,e);else if(this.length)try{this.get(0)[a]()}catch(d){}return this}});c.Event=function(a,e){var d=document.createEvent(n[a]||"Events"),
f=!0;if(e)for(var b in e)"bubbles"==b?f=!!e[b]:d[b]=e[b];d.initEvent(a,f,!0,null,null,null,null,null,null,null,null,null,null,null,null);return d}})(Zepto);
(function(c){function g(c){var h=this.os={},f=this.browser={},b=c.match(/WebKit\/([\d.]+)/),a=c.match(/(Android)\s+([\d.]+)/),d=c.match(/(iPad).*OS\s([\d_]+)/),e=!d&&c.match(/(iPhone\sOS)\s([\d_]+)/),l=c.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=l&&c.match(/TouchPad/),n=c.match(/Kindle\/([\d.]+)/),g=c.match(/Silk\/([\d._]+)/),o=c.match(/(BlackBerry).*Version\/([\d.]+)/);if(f.webkit=!!b)f.version=b[1];a&&(h.android=!0,h.version=a[2]);e&&(h.ios=h.iphone=!0,h.version=e[2].replace(/_/g,"."));d&&(h.ios=h.ipad=
!0,h.version=d[2].replace(/_/g,"."));l&&(h.webos=!0,h.version=l[2]);i&&(h.touchpad=!0);o&&(h.blackberry=!0,h.version=o[2]);n&&(h.kindle=!0,h.version=n[1]);g&&(f.silk=!0,f.version=g[1]);!g&&h.android&&c.match(/Kindle Fire/)&&(f.silk=!0)}g.call(c,navigator.userAgent);c.__detect=g})(Zepto);
(function(c,g){var k="",h,f=window.document.createElement("div"),b=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,a={};c.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(a,e){if(f.style[a+"TransitionProperty"]!==g)return k="-"+a.toLowerCase()+"-",h=e,!1});a[k+"transition-property"]=a[k+"transition-duration"]=a[k+"transition-timing-function"]=a[k+"animation-name"]=a[k+"animation-duration"]="";c.fx={off:h===g&&f.style.transitionProperty===g,cssPrefix:k,transitionEnd:h?
h+"TransitionEnd":"transitionend",animationEnd:h?h+"AnimationEnd":"animationend"};c.fn.animate=function(a,e,f,b){c.isObject(e)&&(f=e.easing,b=e.complete,e=e.duration);e&&(e/=1E3);return this.anim(a,e,f,b)};c.fn.anim=function(d,e,f,i){var h,p={},o,t=this,q,s=c.fx.transitionEnd;e===g&&(e=0.4);c.fx.off&&(e=0);if("string"==typeof d)p[k+"animation-name"]=d,p[k+"animation-duration"]=e+"s",s=c.fx.animationEnd;else{for(o in d)b.test(o)?(h||(h=[]),h.push(o+"("+d[o]+")")):p[o]=d[o];h&&(p[k+"transform"]=h.join(" "));
!c.fx.off&&"object"===typeof d&&(p[k+"transition-property"]=Object.keys(d).join(", "),p[k+"transition-duration"]=e+"s",p[k+"transition-timing-function"]=f||"linear")}q=function(e){if("undefined"!==typeof e){if(e.target!==e.currentTarget)return;c(e.target).unbind(s,arguments.callee)}c(this).css(a);i&&i.call(this)};0<e&&this.bind(s,q);setTimeout(function(){t.css(p);0>=e&&setTimeout(function(){t.each(function(){q.call(this)})},0)},0);return this};f=null})(Zepto);
(function(c){function g(a,e,d,f){if(a.global)return a=e||o,d=c.Event(d),c(a).trigger(d,f),!d.defaultPrevented}function k(a){a.global&&0===c.active++&&g(a,null,"ajaxStart")}function h(a,e){var d=e.context;if(!1===e.beforeSend.call(d,a,e)||!1===g(e,d,"ajaxBeforeSend",[a,e]))return!1;g(e,d,"ajaxSend",[a,e])}function f(e,d,f){var b=f.context;f.success.call(b,e,"success",d);g(f,b,"ajaxSuccess",[d,f,e]);a("success",d,f)}function b(e,d,f,b){var c=b.context;b.error.call(c,f,d,e);g(b,c,"ajaxError",[f,b,e]);
a(d,f,b)}function a(a,e,d){var f=d.context;d.complete.call(f,e,a);g(d,f,"ajaxComplete",[e,d]);d.global&&!--c.active&&g(d,null,"ajaxStop")}function d(){}function e(a){return a&&(a==x?"html":a==r?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a){p(a.data)&&(a.data=c.param(a.data));if(a.data&&(!a.type||"GET"==a.type.toUpperCase()))a.url=(a.url+"&"+a.data).replace(/[&?]{1,2}/,"?")}function i(a,e,d,f){var b=c.isArray(e);c.each(e,function(e,l){f&&(e=d?f:f+"["+(b?"":e)+"]");!f&&b?a.add(l.name,
l.value):(d?c.isArray(l):p(l))?i(a,l,d,e):a.add(e,l)})}var n=0,p=c.isObject,o=window.document,t,q,s=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,r="application/json",x="text/html",A=/^\s*$/;c.active=0;c.ajaxJSONP=function(e){var b="jsonp"+ ++n,i=o.createElement("script"),h={abort:function(){c(i).remove();b in window&&(window[b]=d);a("abort",h,e)}},g;e.error&&(i.onerror=function(){h.abort();e.error()});window[b]=function(a){clearTimeout(g);
c(i).remove();delete window[b];f(a,h,e)};l(e);i.src=e.url.replace(/=\?/,"="+b);c("head").append(i);0<e.timeout&&(g=setTimeout(function(){h.abort();a("timeout",h,e)},e.timeout));return h};c.ajaxSettings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:r,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0};c.ajax=function(a){var i=
c.extend({},a||{});for(t in c.ajaxSettings)void 0===i[t]&&(i[t]=c.ajaxSettings[t]);k(i);i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host);var g=i.dataType,a=/=\?/.test(i.url);if("jsonp"==g||a)return a||(i.url=(i.url+"&callback=?").replace(/[&?]{1,2}/,"?")),c.ajaxJSONP(i);i.url||(i.url=window.location.toString());l(i);var a=i.accepts[g],n={},C=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,p=c.ajaxSettings.xhr(),o;i.crossDomain||
(n["X-Requested-With"]="XMLHttpRequest");a&&(n.Accept=a,-1<a.indexOf(",")&&(a=a.split(",",2)[0]),p.overrideMimeType&&p.overrideMimeType(a));if(i.contentType||i.data&&"GET"!=i.type.toUpperCase())n["Content-Type"]=i.contentType||"application/x-www-form-urlencoded";i.headers=c.extend(n,i.headers||{});p.onreadystatechange=function(){if(4==p.readyState){clearTimeout(o);var a,d=!1;if(200<=p.status&&300>p.status||304==p.status||0==p.status&&"file:"==C){g=g||e(p.getResponseHeader("content-type"));a=p.responseText;
try{"script"==g?(0,eval)(a):"xml"==g?a=p.responseXML:"json"==g&&(a=A.test(a)?null:JSON.parse(a))}catch(c){d=c}d?b(d,"parsererror",p,i):f(a,p,i)}else b(null,"error",p,i)}};p.open(i.type,i.url,"async"in i?i.async:!0);for(q in i.headers)p.setRequestHeader(q,i.headers[q]);if(!1===h(p,i))return p.abort(),!1;0<i.timeout&&(o=setTimeout(function(){p.onreadystatechange=d;p.abort();b(null,"timeout",p,i)},i.timeout));p.send(i.data?i.data:null);return p};c.get=function(a,e){return c.ajax({url:a,success:e})};
c.post=function(a,e,d,f){c.isFunction(e)&&(f=f||d,d=e,e=null);return c.ajax({type:"POST",url:a,data:e,success:d,dataType:f})};c.getJSON=function(a,e){return c.ajax({url:a,success:e,dataType:"json"})};c.fn.load=function(a,e){if(!this.length)return this;var d=this,f=a.split(/\s/),b;1<f.length&&(a=f[0],b=f[1]);c.get(a,function(a){d.html(b?c(o.createElement("div")).html(a.replace(s,"")).find(b).html():a);e&&e.call(d)});return this};var C=encodeURIComponent;c.param=function(a,e){var d=[];d.add=function(a,
e){this.push(C(a)+"="+C(e))};i(d,a,e);return d.join("&").replace("%20","+")}})(Zepto);
(function(c){c.fn.serializeArray=function(){var g=[],k;c(Array.prototype.slice.call(this.get(0).elements)).each(function(){k=c(this);var h=k.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&("submit"!=h&&"reset"!=h&&"button"!=h&&("radio"!=h&&"checkbox"!=h||this.checked))&&g.push({name:k.attr("name"),value:k.val()})});return g};c.fn.serialize=function(){var c=[];this.serializeArray().forEach(function(k){c.push(encodeURIComponent(k.name)+"="+encodeURIComponent(k.value))});return c.join("&")};
c.fn.submit=function(g){g?this.bind("submit",g):this.length&&(g=c.Event("submit"),this.eq(0).trigger(g),g.defaultPrevented||this.get(0).submit());return this}})(Zepto);
(function(c){function g(a,d,e,f){var b=Math.abs(a-d),c=Math.abs(e-f);return b>=c?0<a-d?"Left":"Right":0<e-f?"Up":"Down"}function k(){b=null;h.last&&(h.el.trigger("longTap"),h={})}var h={},f,b;c(document).ready(function(){var a,d;c(document.body).bind("touchstart",function(e){a=Date.now();d=a-(h.last||a);h.el=c("tagName"in e.touches[0].target?e.touches[0].target:e.touches[0].target.parentNode);f&&clearTimeout(f);h.x1=e.touches[0].pageX;h.y1=e.touches[0].pageY;0<d&&250>=d&&(h.isDoubleTap=!0);h.last=
a;b=setTimeout(k,750)}).bind("touchmove",function(a){b&&clearTimeout(b);b=null;h.x2=a.touches[0].pageX;h.y2=a.touches[0].pageY}).bind("touchend",function(){b&&clearTimeout(b);b=null;h.isDoubleTap?(h.el.trigger("doubleTap"),h={}):h.x2&&30<Math.abs(h.x1-h.x2)||h.y2&&30<Math.abs(h.y1-h.y2)?(h.el.trigger("swipe")&&h.el.trigger("swipe"+g(h.x1,h.x2,h.y1,h.y2)),h={}):"last"in h&&(h.el.trigger("tap"),f=setTimeout(function(){f=null;h.el.trigger("singleTap");h={}},250))}).bind("touchcancel",function(){f&&clearTimeout(f);
b&&clearTimeout(b);b=f=null;h={}})});"swipe swipeLeft swipeRight swipeUp swipeDown doubleTap tap singleTap longTap".split(" ").forEach(function(a){c.fn[a]=function(d){return this.bind(a,d)}})})(Zepto);var dust={};function getGlobal(){return function(){return this.dust}.call(null)}
(function(c){function g(a,e,d){this.stack=a;this.global=e;this.blocks=d}function k(a,e,d,f){this.tail=e;this.isObject=!c.isArray(a)&&a&&"object"===typeof a;this.head=a;this.index=d;this.of=f}function h(a){this.head=new b(this);this.callback=a;this.out=""}function f(){this.head=new b(this)}function b(a,e,d){this.root=a;this.next=e;this.data="";this.flushable=!1;this.taps=d}function a(a,e){this.head=a;this.tail=e}c.cache={};c.register=function(a,e){a&&(c.cache[a]=e)};c.render=function(a,e,d){d=(new h(d)).head;
c.load(a,d,g.wrap(e)).end()};c.stream=function(a,e){var d=new f;c.nextTick(function(){c.load(a,d.head,g.wrap(e)).end()});return d};c.renderSource=function(a,e,d){return c.compileFn(a)(e,d)};c.compileFn=function(a,e){var d=c.loadSource(c.compile(a,e));return function(a,e){var b=e?new h(e):new f;c.nextTick(function(){d(b.head,g.wrap(a)).end()});return b}};c.load=function(a,e,d){var f=c.cache[a];return f?f(e,d):c.onLoad?e.map(function(e){c.onLoad(a,function(f,b){if(f)return e.setError(f);c.cache[a]||
c.loadSource(c.compile(b,a));c.cache[a](e,d).end()})}):e.setError(Error("Template Not Found: "+a))};c.loadSource=function(a){return eval(a)};c.isArray=Array.isArray?Array.isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)};c.nextTick=function(){return"undefined"!==typeof process?process.nextTick:function(a){setTimeout(a,0)}}();c.isEmpty=function(a){return c.isArray(a)&&!a.length?!0:0===a?!1:!a};c.filter=function(a,e,d){if(d)for(var f=0,b=d.length;f<b;f++){var l=d[f];"s"===
l?e=null:"function"===typeof c.filters[l]&&(a=c.filters[l](a))}e&&(a=c.filters[e](a));return a};c.filters={h:function(a){return c.escapeHtml(a)},j:function(a){return c.escapeJs(a)},u:encodeURI,uc:encodeURIComponent,js:function(a){return!JSON?a:JSON.stringify(a)},jp:function(a){return!JSON?a:JSON.parse(a)}};c.makeBase=function(a){return new g(new k,a)};g.wrap=function(a){return a instanceof g?a:new g(new k(a))};g.prototype.get=function(a){for(var e=this.stack,d;e;){if(e.isObject&&(d=e.head[a],void 0!==
d))return d;e=e.tail}return this.global?this.global[a]:void 0};g.prototype.getPath=function(a,e){var d=this.stack,f=e.length;if(a&&0===f)return d.head;for(var d=d.head,b=0;d&&b<f;)d=d[e[b]],b++;return d};g.prototype.push=function(a,e,d){return new g(new k(a,this.stack,e,d),this.global,this.blocks)};g.prototype.rebase=function(a){return new g(new k(a),this.global,this.blocks)};g.prototype.current=function(){return this.stack.head};g.prototype.getBlock=function(a,e,d){"function"===typeof a&&(a=a(e,
d).data,e.data="");if(e=this.blocks)for(var d=e.length,f;d--;)if(f=e[d][a])return f};g.prototype.shiftBlocks=function(a){var e=this.blocks;return a?(a=e?e.concat([a]):[a],new g(this.stack,this.global,a)):this};h.prototype.flush=function(){for(var a=this.head;a;){if(a.flushable)this.out+=a.data;else{a.error&&(this.callback(a.error),this.flush=function(){});return}this.head=a=a.next}this.callback(null,this.out)};f.prototype.flush=function(){for(var a=this.head;a;){if(a.flushable)this.emit("data",a.data);
else{a.error&&(this.emit("error",a.error),this.flush=function(){});return}this.head=a=a.next}this.emit("end")};f.prototype.emit=function(a,e){if(!this.events)return!1;var d=this.events[a];if(!d)return!1;if("function"==typeof d)d(e);else for(var d=d.slice(0),f=0,b=d.length;f<b;f++)d[f](e)};f.prototype.on=function(a,e){this.events||(this.events={});this.events[a]?"function"===typeof this.events[a]?this.events[a]=[this.events[a],e]:this.events[a].push(e):this.events[a]=e;return this};f.prototype.pipe=
function(a){this.on("data",function(e){a.write(e,"utf8")}).on("end",function(){a.end()}).on("error",function(e){a.error(e)});return this};b.prototype.write=function(a){var e=this.taps;e&&(a=e.go(a));this.data+=a;return this};b.prototype.end=function(a){a&&this.write(a);this.flushable=!0;this.root.flush();return this};b.prototype.map=function(a){var e=new b(this.root,this.next,this.taps),d=new b(this.root,e,this.taps);this.next=d;this.flushable=!0;a(d);return e};b.prototype.tap=function(e){var d=this.taps;
this.taps=d?d.push(e):new a(e);return this};b.prototype.untap=function(){this.taps=this.taps.tail;return this};b.prototype.render=function(a,e){return a(this,e)};b.prototype.reference=function(a,e,d,f){return"function"===typeof a&&(a.isFunction=!0,a=a.apply(e.current(),[this,e,null,{auto:d,filters:f}]),a instanceof b)?a:c.isEmpty(a)?this:this.write(c.filter(a,d,f))};b.prototype.section=function(a,e,d,f){if("function"===typeof a&&(a=a.apply(e.current(),[this,e,d,f]),a instanceof b))return a;var l=
d.block,d=d["else"];f&&(e=e.push(f));if(c.isArray(a)){if(l){var f=a.length,i=this;if(0<f){e.stack.head&&(e.stack.head.$len=f);for(d=0;d<f;d++)e.stack.head&&(e.stack.head.$idx=d),i=l(i,e.push(a[d],d,f));e.stack.head&&(e.stack.head.$idx=void 0,e.stack.head.$len=void 0);return i}if(d)return d(this,e)}}else if(!0===a){if(l)return l(this,e)}else if(a||0===a){if(l)return e.stack.head&&"object"===typeof a&&(e.stack.head.$idx=0,e.stack.head.$len=1),i=l(this,e.push(a)),e.stack.head&&"object"===typeof a&&(e.stack.head.$idx=
void 0,e.stack.head.$len=void 0),i}else if(d)return d(this,e);return this};b.prototype.exists=function(a,e,d){var f=d.block,d=d["else"];if(c.isEmpty(a)){if(d)return d(this,e)}else if(f)return f(this,e);return this};b.prototype.notexists=function(a,e,d){var f=d.block,d=d["else"];if(c.isEmpty(a)){if(f)return f(this,e)}else if(d)return d(this,e);return this};b.prototype.block=function(a,e,d){d=d.block;a&&(d=a);return d?d(this,e):this};b.prototype.partial=function(a,e,d){var f;d?(f=c.makeBase(e.global),
f.blocks=e.blocks,e.stack&&e.stack.tail&&(f.stack=e.stack.tail),f=f.push(d),f=f.push(e.stack.head)):f=e;return"function"===typeof a?this.capture(a,f,function(a,e){c.load(a,e,f).end()}):c.load(a,this,f)};b.prototype.helper=function(a,e,d,f){if(c.helpers[a])return c.helpers[a](this,e,d,f)};b.prototype.capture=function(a,e,d){return this.map(function(f){var b=new h(function(a,e){a?f.setError(a):d(e,f)});a(b.head,e).end()})};b.prototype.setError=function(a){this.error=a;this.root.flush();return this};
a.prototype.push=function(e){return new a(e,this)};a.prototype.go=function(a){for(var e=this;e;)a=e.head(a),e=e.tail;return a};var d=RegExp(/[&<>\"\']/),e=/&/g,l=/</g,i=/>/g,n=/\"/g,p=/\'/g;c.escapeHtml=function(a){return"string"===typeof a?!d.test(a)?a:a.replace(e,"&amp;").replace(l,"&lt;").replace(i,"&gt;").replace(n,"&quot;").replace(p,"&#39;"):a};var o=/\\/g,t=/\r/g,q=/\u2028/g,s=/\u2029/g,u=/\n/g,v=/\f/g,r=/'/g,x=/"/g,A=/\t/g;c.escapeJs=function(a){return"string"===typeof a?a.replace(o,"\\\\").replace(x,
'\\"').replace(r,"\\'").replace(t,"\\r").replace(q,"\\u2028").replace(s,"\\u2029").replace(u,"\\n").replace(v,"\\f").replace(A,"\\t"):a}})(dust);"undefined"!==typeof exports&&("undefined"!==typeof process&&require("./server")(dust),module.exports=dust);
(function(c){function g(a,d){for(var f=[d[0]],b=1,h=d.length;b<h;b++){var g=c.filterNode(a,d[b]);g&&f.push(g)}return f}function k(a,d){return d}function h(){}function f(a,d){for(var f="",b=1,h=d.length;b<h;b++)f+=c.compileNode(a,d[b]);return f}function b(a,d,f){return"."+f+"("+c.compileNode(a,d[1])+","+c.compileNode(a,d[2])+","+c.compileNode(a,d[4])+","+c.compileNode(a,d[3])+")"}c.compile=function(a,d){try{var f,b=c.parse(a);f=c.filterNode({},b);var b={name:d,bodies:[],blocks:{},index:0,auto:"h"},
h="(function(){dust.register("+(d?'"'+d+'"':"null")+","+c.compileNode(b,f)+");",g;f=[];var k=b.blocks,q;for(q in k)f.push("'"+q+"':"+k[q]);f.length?(b.blocks="ctx=ctx.shiftBlocks(blocks);",g="var blocks={"+f.join(",")+"};"):g=b.blocks="";var h=h+g,s;g=[];for(var u=b.bodies,v=b.blocks,b=0,r=u.length;b<r;b++)g[b]="function body_"+b+"(chk,ctx){"+v+"return chk"+u[b]+";}";s=g.join("");return h+s+"return body_0;})();"}catch(x){if(!x.line||!x.column)throw x;throw new SyntaxError(x.message+" At line : "+
x.line+", column : "+x.column);}};c.filterNode=function(a,d){return c.optimizers[d[0]](a,d)};c.optimizers={body:function(a,d){for(var f=[d[0]],b,h=1,g=d.length;h<g;h++){var k=c.filterNode(a,d[h]);k&&("buffer"===k[0]?b?b[1]+=k[1]:(b=k,f.push(k)):(b=null,f.push(k)))}return f},buffer:k,special:function(e,d){return["buffer",a[d[1]]]},format:h,reference:g,"#":g,"?":g,"^":g,"<":g,"+":g,"@":g,"%":g,partial:g,context:g,params:g,bodies:g,param:g,filters:k,key:k,path:k,literal:k,comment:h};c.pragmas={esc:function(a,
d,b){var c=a.auto;d||(d="h");a.auto="s"===d?"":d;d=f(a,b.block);a.auto=c;return d}};var a={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};c.compileNode=function(a,d){return c.nodes[d[0]](a,d)};c.nodes={body:function(a,d){var b=a.index++,c="body_"+b;a.bodies[b]=f(a,d);return c},buffer:function(a,f){return".write("+d(f[1])+")"},format:function(a,f){return".write("+d(f[1]+f[2])+")"},reference:function(a,d){return".reference("+c.compileNode(a,d[1])+",ctx,"+c.compileNode(a,d[2])+")"},"#":function(a,d){return b(a,
d,"section")},"?":function(a,d){return b(a,d,"exists")},"^":function(a,d){return b(a,d,"notexists")},"<":function(a,d){for(var f=d[4],b=1,h=f.length;b<h;b++){var g=f[b];if("block"===g[1][1]){a.blocks[d[1].text]=c.compileNode(a,g[2]);break}}return""},"+":function(a,f){return"undefined"===typeof f[1].text&&"undefined"===typeof f[4]?".block(ctx.getBlock("+c.compileNode(a,f[1])+",chk, ctx),"+c.compileNode(a,f[2])+", {},"+c.compileNode(a,f[3])+")":".block(ctx.getBlock("+d(f[1].text)+"),"+c.compileNode(a,
f[2])+","+c.compileNode(a,f[4])+","+c.compileNode(a,f[3])+")"},"@":function(a,f){return".helper("+d(f[1].text)+","+c.compileNode(a,f[2])+","+c.compileNode(a,f[4])+","+c.compileNode(a,f[3])+")"},"%":function(a,d){var f=d[1][1];if(!c.pragmas[f])return"";for(var b=d[4],h={},g=1,k=b.length;g<k;g++){var q=b[g];h[q[1][1]]=q[2]}b=d[3];q={};g=1;for(k=b.length;g<k;g++){var s=b[g];q[s[1][1]]=s[2][1]}return c.pragmas[f](a,d[2][1]?d[2][1].text:null,h,q)},partial:function(a,d){return".partial("+c.compileNode(a,
d[1])+","+c.compileNode(a,d[2])+","+c.compileNode(a,d[3])+")"},context:function(a,d){return d[1]?"ctx.rebase("+c.compileNode(a,d[1])+")":"ctx"},params:function(a,d){for(var f=[],b=1,h=d.length;b<h;b++)f.push(c.compileNode(a,d[b]));return f.length?"{"+f.join(",")+"}":"null"},bodies:function(a,d){for(var f=[],b=1,h=d.length;b<h;b++)f.push(c.compileNode(a,d[b]));return"{"+f.join(",")+"}"},param:function(a,d){return c.compileNode(a,d[1])+":"+c.compileNode(a,d[2])},filters:function(a,d){for(var f=[],b=
1,c=d.length;b<c;b++)f.push('"'+d[b]+'"');return'"'+a.auto+'"'+(f.length?",["+f.join(",")+"]":"")},key:function(a,d){return'ctx.get("'+d[1]+'")'},path:function(a,d){for(var f=d[1],b=d[2],c=[],h=0,g=b.length;h<g;h++)c.push('"'+b[h]+'"');return"ctx.getPath("+f+",["+c.join(",")+"])"},literal:function(a,f){return d(f[1])}};var d="undefined"===typeof JSON?function(a){return'"'+c.escapeJs(a)+'"'}:JSON.stringify})("undefined"!==typeof exports?exports:getGlobal());
(function(c){var g=function(){function c(f){return'"'+f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var h={parse:function(f,b){function a(a){var d={},e;for(e in a)d[e]=a[e];return d}function d(a,d){for(var e=a.offset+d,b=a.offset;b<e;b++){var c=f.charAt(b);"\n"===c?(a.seenCR||a.line++,a.column=1,a.seenCR=!1):"\r"===c||"\u2028"===c||"\u2029"===
c?(a.line++,a.column=1,a.seenCR=!0):(a.column++,a.seenCR=!1)}a.offset+=d}function e(d){j.offset<Q.offset||(j.offset>Q.offset&&(Q=a(j),S=[]),S.push(d))}function h(){var d,e,f;f=a(j);d=[];for(e=i();null!==e;)d.push(e),e=i();null!==d&&(d=["body"].concat(d));null===d&&(j=a(f));return d}function i(){var a;a=F();null===a&&(a=n(),null===a&&(a=v(),null===a&&(a=x(),null===a&&(a=u(),null===a&&(a=G())))));return a}function n(){var b,c,i,g,k,n,x,r,v;m++;r=a(j);v=a(j);b=p();if(null!==b){c=[];for(i=y();null!==
i;)c.push(i),i=y();null!==c?(i=J(),null!==i?(g=h(),null!==g?(k=s(),null!==k?(n=o(),null!==n?(x=b[1].text===n.text?"":null,null!==x?b=[b,c,i,g,k,n,x]:(b=null,j=a(v))):(b=null,j=a(v))):(b=null,j=a(v))):(b=null,j=a(v))):(b=null,j=a(v))):(b=null,j=a(v))}else b=null,j=a(v);null!==b&&(b=function(a,d,e,f,b,c){c.push(["param",["literal","block"],b]);f.push(c);return f}(r.offset,r.line,r.column,b[0],b[3],b[4],b[5]));null===b&&(j=a(r));if(null===b){r=a(j);v=a(j);b=p();if(null!==b){c=[];for(i=y();null!==i;)c.push(i),
i=y();null!==c?(47===f.charCodeAt(j.offset)?(i="/",d(j,1)):(i=null,0===m&&e('"/"')),null!==i)?(g=J(),null!==g?b=[b,c,i,g]:(b=null,j=a(v))):(b=null,j=a(v)):(b=null,j=a(v))}else b=null,j=a(v);null!==b&&(b=function(a,d,e,f){f.push(["bodies"]);return f}(r.offset,r.line,r.column,b[0]));null===b&&(j=a(r))}m--;0===m&&null===b&&e("section");return b}function p(){var b,c,i,h,g,l,k,n;k=a(j);n=a(j);b=K();if(null!==b)if(/^[#?^<+@%]/.test(f.charAt(j.offset))?(c=f.charAt(j.offset),d(j,1)):(c=null,0===m&&e("[#?^<+@%]")),
null!==c){i=[];for(h=y();null!==h;)i.push(h),h=y();null!==i?(h=A(),null!==h?(g=t(),null!==g?(l=q(),null!==l?b=[b,c,i,h,g,l]:(b=null,j=a(n))):(b=null,j=a(n))):(b=null,j=a(n))):(b=null,j=a(n))}else b=null,j=a(n);else b=null,j=a(n);null!==b&&(b=[b[1],b[3],b[4],b[5]]);null===b&&(j=a(k));return b}function o(){var b,c,i,h,g,l,k,n;m++;k=a(j);n=a(j);b=K();if(null!==b)if(47===f.charCodeAt(j.offset)?(c="/",d(j,1)):(c=null,0===m&&e('"/"')),null!==c){i=[];for(h=y();null!==h;)i.push(h),h=y();if(null!==i)if(h=
A(),null!==h){g=[];for(l=y();null!==l;)g.push(l),l=y();null!==g?(l=J(),null!==l?b=[b,c,i,h,g,l]:(b=null,j=a(n))):(b=null,j=a(n))}else b=null,j=a(n);else b=null,j=a(n)}else b=null,j=a(n);else b=null,j=a(n);null!==b&&(b=b[3]);null===b&&(j=a(k));m--;0===m&&null===b&&e("end tag");return b}function t(){var b,c,i,h,g;i=a(j);h=a(j);g=a(j);58===f.charCodeAt(j.offset)?(b=":",d(j,1)):(b=null,0===m&&e('":"'));null!==b?(c=A(),null!==c?b=[b,c]:(b=null,j=a(g))):(b=null,j=a(g));null!==b&&(b=b[1]);null===b&&(j=a(h));
b=null!==b?b:"";null!==b&&(b=b?["context",b]:["context"]);null===b&&(j=a(i));return b}function q(){var b,c,i,h,g,l,k,n;m++;l=a(j);b=[];k=a(j);n=a(j);i=y();if(null!==i)for(c=[];null!==i;)c.push(i),i=y();else c=null;null!==c?(i=B(),null!==i)?(61===f.charCodeAt(j.offset)?(h="=",d(j,1)):(h=null,0===m&&e('"="')),null!==h)?(g=C(),null===g&&(g=A(),null===g&&(g=z())),null!==g)?c=[c,i,h,g]:(c=null,j=a(n)):(c=null,j=a(n)):(c=null,j=a(n)):(c=null,j=a(n));null!==c&&(c=["param",["literal",c[1]],c[3]]);for(null===
c&&(j=a(k));null!==c;){b.push(c);k=a(j);n=a(j);i=y();if(null!==i)for(c=[];null!==i;)c.push(i),i=y();else c=null;null!==c?(i=B(),null!==i)?(61===f.charCodeAt(j.offset)?(h="=",d(j,1)):(h=null,0===m&&e('"="')),null!==h)?(g=C(),null===g&&(g=A(),null===g&&(g=z())),null!==g)?c=[c,i,h,g]:(c=null,j=a(n)):(c=null,j=a(n)):(c=null,j=a(n)):(c=null,j=a(n));null!==c&&(c=["param",["literal",c[1]],c[3]]);null===c&&(j=a(k))}null!==b&&(b=["params"].concat(b));null===b&&(j=a(l));m--;0===m&&null===b&&e("params");return b}
function s(){var b,c,i,g,k,n,p,o,r;m++;p=a(j);b=[];o=a(j);r=a(j);c=K();null!==c?(58===f.charCodeAt(j.offset)?(i=":",d(j,1)):(i=null,0===m&&e('":"')),null!==i)?(g=B(),null!==g?(k=J(),null!==k?(n=h(),null!==n?c=[c,i,g,k,n]:(c=null,j=a(r))):(c=null,j=a(r))):(c=null,j=a(r))):(c=null,j=a(r)):(c=null,j=a(r));null!==c&&(c=["param",["literal",c[2]],c[4]]);for(null===c&&(j=a(o));null!==c;)b.push(c),o=a(j),r=a(j),c=K(),null!==c?(58===f.charCodeAt(j.offset)?(i=":",d(j,1)):(i=null,0===m&&e('":"')),null!==i)?
(g=B(),null!==g?(k=J(),null!==k?(n=h(),null!==n?c=[c,i,g,k,n]:(c=null,j=a(r))):(c=null,j=a(r))):(c=null,j=a(r))):(c=null,j=a(r)):(c=null,j=a(r)),null!==c&&(c=["param",["literal",c[2]],c[4]]),null===c&&(j=a(o));null!==b&&(b=["bodies"].concat(b));null===b&&(j=a(p));m--;0===m&&null===b&&e("bodies");return b}function u(){var d,f,b,c,i,h;m++;i=a(j);h=a(j);d=K();null!==d?(f=A(),null!==f?(b=r(),null!==b?(c=J(),null!==c?d=[d,f,b,c]:(d=null,j=a(h))):(d=null,j=a(h))):(d=null,j=a(h))):(d=null,j=a(h));null!==
d&&(d=["reference",d[1],d[2]]);null===d&&(j=a(i));m--;0===m&&null===d&&e("reference");return d}function v(){var b,c,i,h,g,l,k,n,p,o;m++;p=a(j);o=a(j);b=K();if(null!==b)if(62===f.charCodeAt(j.offset)?(c=">",d(j,1)):(c=null,0===m&&e('">"')),null===c&&(43===f.charCodeAt(j.offset)?(c="+",d(j,1)):(c=null,0===m&&e('"+"'))),null!==c)if(h=a(j),i=B(),null!==i&&(i=["literal",i]),null===i&&(j=a(h)),null===i&&(i=z()),null!==i)if(h=t(),null!==h)if(g=q(),null!==g){l=[];for(k=y();null!==k;)l.push(k),k=y();null!==
l?(47===f.charCodeAt(j.offset)?(k="/",d(j,1)):(k=null,0===m&&e('"/"')),null!==k)?(n=J(),null!==n?b=[b,c,i,h,g,l,k,n]:(b=null,j=a(o))):(b=null,j=a(o)):(b=null,j=a(o))}else b=null,j=a(o);else b=null,j=a(o);else b=null,j=a(o);else b=null,j=a(o);else b=null,j=a(o);null!==b&&(b=[">"===b[1]?"partial":b[1],b[2],b[3],b[4]]);null===b&&(j=a(p));m--;0===m&&null===b&&e("partial");return b}function r(){var b,c,i,h,g,l;m++;h=a(j);b=[];g=a(j);l=a(j);124===f.charCodeAt(j.offset)?(c="|",d(j,1)):(c=null,0===m&&e('"|"'));
null!==c?(i=B(),null!==i?c=[c,i]:(c=null,j=a(l))):(c=null,j=a(l));null!==c&&(c=c[1]);for(null===c&&(j=a(g));null!==c;)b.push(c),g=a(j),l=a(j),124===f.charCodeAt(j.offset)?(c="|",d(j,1)):(c=null,0===m&&e('"|"')),null!==c?(i=B(),null!==i?c=[c,i]:(c=null,j=a(l))):(c=null,j=a(l)),null!==c&&(c=c[1]),null===c&&(j=a(g));null!==b&&(b=["filters"].concat(b));null===b&&(j=a(h));m--;0===m&&null===b&&e("filters");return b}function x(){var b,c,i,h,g,l;m++;g=a(j);l=a(j);b=K();null!==b?(126===f.charCodeAt(j.offset)?
(c="~",d(j,1)):(c=null,0===m&&e('"~"')),null!==c)?(i=B(),null!==i?(h=J(),null!==h?b=[b,c,i,h]:(b=null,j=a(l))):(b=null,j=a(l))):(b=null,j=a(l)):(b=null,j=a(l));null!==b&&(b=["special",b[2]]);null===b&&(j=a(g));m--;0===m&&null===b&&e("special");return b}function A(){var d,f;m++;f=a(j);d=R();null!==d&&(d=function(a,d,e,f){a=["path"].concat(f);a.text=f[1].join(".");return a}(f.offset,f.line,f.column,d));null===d&&(j=a(f));null===d&&(f=a(j),d=B(),null!==d&&(d=function(a,d,e,f){a=["key",f];a.text=f;return a}(f.offset,
f.line,f.column,d)),null===d&&(j=a(f)));m--;0===m&&null===d&&e("identifier");return d}function C(){var d,f;m++;f=a(j);d=L();null===d&&(d=H());null!==d&&(d=["literal",d]);null===d&&(j=a(f));m--;0===m&&null===d&&e("number");return d}function L(){var b,c,i,h,g,l;m++;g=a(j);l=a(j);b=H();if(null!==b)if(46===f.charCodeAt(j.offset)?(c=".",d(j,1)):(c=null,0===m&&e('"."')),null!==c){h=H();if(null!==h)for(i=[];null!==h;)i.push(h),h=H();else i=null;null!==i?b=[b,c,i]:(b=null,j=a(l))}else b=null,j=a(l);else b=
null,j=a(l);null!==b&&(b=parseFloat(b[0]+"."+b[2].join("")));null===b&&(j=a(g));m--;0===m&&null===b&&e("frac");return b}function H(){var b,c,i;m++;i=a(j);/^[0-9]/.test(f.charAt(j.offset))?(c=f.charAt(j.offset),d(j,1)):(c=null,0===m&&e("[0-9]"));if(null!==c)for(b=[];null!==c;)b.push(c),/^[0-9]/.test(f.charAt(j.offset))?(c=f.charAt(j.offset),d(j,1)):(c=null,0===m&&e("[0-9]"));else b=null;null!==b&&(b=parseInt(b.join(""),10));null===b&&(j=a(i));m--;0===m&&null===b&&e("integer");return b}function R(){var b,
c,i,h,g;m++;h=a(j);g=a(j);b=B();b=null!==b?b:"";if(null!==b){i=E();null===i&&(i=D());if(null!==i)for(c=[];null!==i;)c.push(i),i=E(),null===i&&(i=D());else c=null;null!==c?b=[b,c]:(b=null,j=a(g))}else b=null,j=a(g);null!==b&&(c=b[0],b=b[1],b=b[0],c&&b?(b.unshift(c),b=[!1,b]):b=[!0,b]);null===b&&(j=a(h));if(null===b){h=a(j);g=a(j);46===f.charCodeAt(j.offset)?(b=".",d(j,1)):(b=null,0===m&&e('"."'));if(null!==b){c=[];i=E();for(null===i&&(i=D());null!==i;)c.push(i),i=E(),null===i&&(i=D());null!==c?b=[b,
c]:(b=null,j=a(g))}else b=null,j=a(g);null!==b&&(b=0<b[1].length?[!0,b[1][0]]:[!0,[]]);null===b&&(j=a(h))}m--;0===m&&null===b&&e("path");return b}function B(){var b,c,i,h,g;m++;h=a(j);g=a(j);/^[a-zA-Z_$]/.test(f.charAt(j.offset))?(b=f.charAt(j.offset),d(j,1)):(b=null,0===m&&e("[a-zA-Z_$]"));if(null!==b){c=[];/^[0-9a-zA-Z_$\-]/.test(f.charAt(j.offset))?(i=f.charAt(j.offset),d(j,1)):(i=null,0===m&&e("[0-9a-zA-Z_$\\-]"));for(;null!==i;)c.push(i),/^[0-9a-zA-Z_$\-]/.test(f.charAt(j.offset))?(i=f.charAt(j.offset),
d(j,1)):(i=null,0===m&&e("[0-9a-zA-Z_$\\-]"));null!==c?b=[b,c]:(b=null,j=a(g))}else b=null,j=a(g);null!==b&&(b=b[0]+b[1].join(""));null===b&&(j=a(h));m--;0===m&&null===b&&e("key");return b}function D(){var b,c,i,h,g,l,k;m++;h=a(j);g=a(j);l=a(j);k=a(j);91===f.charCodeAt(j.offset)?(b="[",d(j,1)):(b=null,0===m&&e('"["'));if(null!==b){/^[0-9]/.test(f.charAt(j.offset))?(i=f.charAt(j.offset),d(j,1)):(i=null,0===m&&e("[0-9]"));if(null!==i)for(c=[];null!==i;)c.push(i),/^[0-9]/.test(f.charAt(j.offset))?(i=
f.charAt(j.offset),d(j,1)):(i=null,0===m&&e("[0-9]"));else c=null;null!==c?(93===f.charCodeAt(j.offset)?(i="]",d(j,1)):(i=null,0===m&&e('"]"')),null!==i)?b=[b,c,i]:(b=null,j=a(k)):(b=null,j=a(k))}else b=null,j=a(k);null!==b&&(b=b[1].join(""));null===b&&(j=a(l));null!==b?(c=E(),c=null!==c?c:"",null!==c?b=[b,c]:(b=null,j=a(g))):(b=null,j=a(g));null!==b&&(c=b[0],(b=b[1])?b.unshift(c):b=[c]);null===b&&(j=a(h));m--;0===m&&null===b&&e("array");return b}function E(){var b,c,i,h,g,l,k;m++;h=a(j);g=a(j);l=
a(j);k=a(j);46===f.charCodeAt(j.offset)?(c=".",d(j,1)):(c=null,0===m&&e('"."'));null!==c?(i=B(),null!==i?c=[c,i]:(c=null,j=a(k))):(c=null,j=a(k));null!==c&&(c=c[1]);null===c&&(j=a(l));if(null!==c)for(b=[];null!==c;)b.push(c),l=a(j),k=a(j),46===f.charCodeAt(j.offset)?(c=".",d(j,1)):(c=null,0===m&&e('"."')),null!==c?(i=B(),null!==i?c=[c,i]:(c=null,j=a(k))):(c=null,j=a(k)),null!==c&&(c=c[1]),null===c&&(j=a(l));else b=null;null!==b?(c=D(),c=null!==c?c:"",null!==c?b=[b,c]:(b=null,j=a(g))):(b=null,j=a(g));
null!==b&&(c=b[0],b=(b=b[1])?c.concat(b):c);null===b&&(j=a(h));m--;0===m&&null===b&&e("array_part");return b}function z(){var b,c,i,h,g;m++;h=a(j);g=a(j);34===f.charCodeAt(j.offset)?(b='"',d(j,1)):(b=null,0===m&&e('"\\""'));null!==b?(34===f.charCodeAt(j.offset)?(c='"',d(j,1)):(c=null,0===m&&e('"\\""')),null!==c)?b=[b,c]:(b=null,j=a(g)):(b=null,j=a(g));null!==b&&(b=["literal",""]);null===b&&(j=a(h));if(null===b&&(h=a(j),g=a(j),34===f.charCodeAt(j.offset)?(b='"',d(j,1)):(b=null,0===m&&e('"\\""')),null!==
b?(c=w(),null!==c)?(34===f.charCodeAt(j.offset)?(i='"',d(j,1)):(i=null,0===m&&e('"\\""')),null!==i)?b=[b,c,i]:(b=null,j=a(g)):(b=null,j=a(g)):(b=null,j=a(g)),null!==b&&(b=["literal",b[1]]),null===b&&(j=a(h)),null===b)){h=a(j);g=a(j);34===f.charCodeAt(j.offset)?(b='"',d(j,1)):(b=null,0===m&&e('"\\""'));if(null!==b){i=M();if(null!==i)for(c=[];null!==i;)c.push(i),i=M();else c=null;null!==c?(34===f.charCodeAt(j.offset)?(i='"',d(j,1)):(i=null,0===m&&e('"\\""')),null!==i)?b=[b,c,i]:(b=null,j=a(g)):(b=null,
j=a(g))}else b=null,j=a(g);null!==b&&(b=["body"].concat(b[1]));null===b&&(j=a(h))}m--;0===m&&null===b&&e("inline");return b}function M(){var d,e;d=x();null===d&&(d=u(),null===d&&(e=a(j),d=w(),null!==d&&(d=["buffer",d]),null===d&&(j=a(e))));return d}function G(){var b,c,i,h,g,l,k,n;m++;l=a(j);k=a(j);b=P();if(null!==b){c=[];for(i=y();null!==i;)c.push(i),i=y();null!==c?b=[b,c]:(b=null,j=a(k))}else b=null,j=a(k);null!==b&&(b=["format",b[0],b[1].join("")]);null===b&&(j=a(l));if(null===b){l=a(j);k=a(j);
n=a(j);g=a(j);m++;c=O();m--;null===c?c="":(c=null,j=a(g));null!==c?(g=a(j),m++,i=P(),m--,null===i?i="":(i=null,j=a(g)),null!==i)?(g=a(j),m++,h=F(),m--,null===h?h="":(h=null,j=a(g)),null!==h)?(f.length>j.offset?(g=f.charAt(j.offset),d(j,1)):(g=null,0===m&&e("any character")),null!==g)?c=[c,i,h,g]:(c=null,j=a(n)):(c=null,j=a(n)):(c=null,j=a(n)):(c=null,j=a(n));null!==c&&(c=c[3]);null===c&&(j=a(k));if(null!==c)for(b=[];null!==c;)b.push(c),k=a(j),n=a(j),g=a(j),m++,c=O(),m--,null===c?c="":(c=null,j=a(g)),
null!==c?(g=a(j),m++,i=P(),m--,null===i?i="":(i=null,j=a(g)),null!==i)?(g=a(j),m++,h=F(),m--,null===h?h="":(h=null,j=a(g)),null!==h)?(f.length>j.offset?(g=f.charAt(j.offset),d(j,1)):(g=null,0===m&&e("any character")),null!==g)?c=[c,i,h,g]:(c=null,j=a(n)):(c=null,j=a(n)):(c=null,j=a(n)):(c=null,j=a(n)),null!==c&&(c=c[3]),null===c&&(j=a(k));else b=null;null!==b&&(b=["buffer",b.join("")]);null===b&&(j=a(l))}m--;0===m&&null===b&&e("buffer");return b}function w(){var b,c,i,h,g,l;m++;h=a(j);g=a(j);l=a(j);
i=a(j);m++;c=O();m--;null===c?c="":(c=null,j=a(i));null!==c?(i=I(),null===i&&(/^[^"]/.test(f.charAt(j.offset))?(i=f.charAt(j.offset),d(j,1)):(i=null,0===m&&e('[^"]'))),null!==i)?c=[c,i]:(c=null,j=a(l)):(c=null,j=a(l));null!==c&&(c=c[1]);null===c&&(j=a(g));if(null!==c)for(b=[];null!==c;)b.push(c),g=a(j),l=a(j),i=a(j),m++,c=O(),m--,null===c?c="":(c=null,j=a(i)),null!==c?(i=I(),null===i&&(/^[^"]/.test(f.charAt(j.offset))?(i=f.charAt(j.offset),d(j,1)):(i=null,0===m&&e('[^"]'))),null!==i)?c=[c,i]:(c=null,
j=a(l)):(c=null,j=a(l)),null!==c&&(c=c[1]),null===c&&(j=a(g));else b=null;null!==b&&(b=b.join(""));null===b&&(j=a(h));m--;0===m&&null===b&&e("literal");return b}function I(){var b,c;c=a(j);'\\"'===f.substr(j.offset,2)?(b='\\"',d(j,2)):(b=null,0===m&&e('"\\\\\\""'));null!==b&&(b='"');null===b&&(j=a(c));return b}function F(){var b,c,i,h,g,l,k,n;m++;g=a(j);l=a(j);"{!"===f.substr(j.offset,2)?(b="{!",d(j,2)):(b=null,0===m&&e('"{!"'));if(null!==b){c=[];k=a(j);n=a(j);h=a(j);m++;"!}"===f.substr(j.offset,
2)?(i="!}",d(j,2)):(i=null,0===m&&e('"!}"'));m--;null===i?i="":(i=null,j=a(h));null!==i?(f.length>j.offset?(h=f.charAt(j.offset),d(j,1)):(h=null,0===m&&e("any character")),null!==h)?i=[i,h]:(i=null,j=a(n)):(i=null,j=a(n));null!==i&&(i=i[1]);for(null===i&&(j=a(k));null!==i;)c.push(i),k=a(j),n=a(j),h=a(j),m++,"!}"===f.substr(j.offset,2)?(i="!}",d(j,2)):(i=null,0===m&&e('"!}"')),m--,null===i?i="":(i=null,j=a(h)),null!==i?(f.length>j.offset?(h=f.charAt(j.offset),d(j,1)):(h=null,0===m&&e("any character")),
null!==h)?i=[i,h]:(i=null,j=a(n)):(i=null,j=a(n)),null!==i&&(i=i[1]),null===i&&(j=a(k));null!==c?("!}"===f.substr(j.offset,2)?(i="!}",d(j,2)):(i=null,0===m&&e('"!}"')),null!==i)?b=[b,c,i]:(b=null,j=a(l)):(b=null,j=a(l))}else b=null,j=a(l);null!==b&&(b=["comment",b[1].join("")]);null===b&&(j=a(g));m--;0===m&&null===b&&e("comment");return b}function O(){var b,c,i,h,g,l,k,n,p;n=a(j);b=K();if(null!==b)if(/^[#?^><+%:@\/~%]/.test(f.charAt(j.offset))?(c=f.charAt(j.offset),d(j,1)):(c=null,0===m&&e("[#?^><+%:@\\/~%]")),
null!==c){i=[];for(h=y();null!==h;)i.push(h),h=y();if(null!==i){p=a(j);k=a(j);m++;g=J();m--;null===g?g="":(g=null,j=a(k));null!==g?(k=a(j),m++,l=P(),m--,null===l?l="":(l=null,j=a(k)),null!==l)?(f.length>j.offset?(k=f.charAt(j.offset),d(j,1)):(k=null,0===m&&e("any character")),null!==k)?g=[g,l,k]:(g=null,j=a(p)):(g=null,j=a(p)):(g=null,j=a(p));if(null!==g)for(h=[];null!==g;)(h.push(g),p=a(j),k=a(j),m++,g=J(),m--,null===g?g="":(g=null,j=a(k)),null!==g)?(k=a(j),m++,l=P(),m--,null===l?l="":(l=null,j=
a(k)),null!==l)?(f.length>j.offset?(k=f.charAt(j.offset),d(j,1)):(k=null,0===m&&e("any character")),null!==k)?g=[g,l,k]:(g=null,j=a(p)):(g=null,j=a(p)):(g=null,j=a(p));else h=null;if(null!==h){g=[];for(l=y();null!==l;)g.push(l),l=y();null!==g?(l=J(),null!==l?b=[b,c,i,h,g,l]:(b=null,j=a(n))):(b=null,j=a(n))}else b=null,j=a(n)}else b=null,j=a(n)}else b=null,j=a(n);else b=null,j=a(n);null===b&&(b=u());return b}function K(){var a;123===f.charCodeAt(j.offset)?(a="{",d(j,1)):(a=null,0===m&&e('"{"'));return a}
function J(){var a;125===f.charCodeAt(j.offset)?(a="}",d(j,1)):(a=null,0===m&&e('"}"'));return a}function P(){var a;10===f.charCodeAt(j.offset)?(a="\n",d(j,1)):(a=null,0===m&&e('"\\n"'));if(null===a&&("\r\n"===f.substr(j.offset,2)?(a="\r\n",d(j,2)):(a=null,0===m&&e('"\\r\\n"')),null===a))if(13===f.charCodeAt(j.offset)?(a="\r",d(j,1)):(a=null,0===m&&e('"\\r"')),null===a)if(8232===f.charCodeAt(j.offset)?(a="\u2028",d(j,1)):(a=null,0===m&&e('"\\u2028"')),null===a)8233===f.charCodeAt(j.offset)?(a="\u2029",
d(j,1)):(a=null,0===m&&e('"\\u2029"'));return a}function y(){var a;/^[\t\x0B\f \xA0\uFEFF]/.test(f.charAt(j.offset))?(a=f.charAt(j.offset),d(j,1)):(a=null,0===m&&e("[\\t\\x0B\\f \\xA0\\uFEFF]"));null===a&&(a=P());return a}function U(a){a.sort();for(var d=null,b=[],e=0;e<a.length;e++)a[e]!==d&&(b.push(a[e]),d=a[e]);return b}var N={body:h,part:i,section:n,sec_tag_start:p,end_tag:o,context:t,params:q,bodies:s,reference:u,partial:v,filters:r,special:x,identifier:A,number:C,frac:L,integer:H,path:R,key:B,
array:D,array_part:E,inline:z,inline_part:M,buffer:G,literal:w,esc:I,comment:F,tag:O,ld:K,rd:J,eol:P,ws:y};if(void 0!==b){if(void 0===N[b])throw Error("Invalid rule name: "+c(b)+".");}else b="body";var j={offset:0,line:1,column:1,seenCR:!1},m=0,Q={offset:0,line:1,column:1,seenCR:!1},S=[],N=N[b]();if(null===N||j.offset!==f.length){var N=Math.max(j.offset,Q.offset),V=N<f.length?f.charAt(N):null,T=j.offset>Q.offset?j:Q;throw new g.SyntaxError(U(S),V,N,T.line,T.column);}return N},toSource:function(){return this._source},
SyntaxError:function(f,b,a,d,e){this.name="SyntaxError";this.expected=f;this.found=b;switch(f.length){case 0:f="end of input";break;case 1:f=f[0];break;default:f=f.slice(0,f.length-1).join(", ")+" or "+f[f.length-1]}b=b?c(b):"end of input";this.message="Expected "+f+" but "+b+" found.";this.offset=a;this.line=d;this.column=e}};h.SyntaxError.prototype=Error.prototype;return h}();c.parse=g.parse})("undefined"!==typeof exports?exports:getGlobal());
(function(){function c(b){b=b.current();return"object"===typeof b&&!0===b.isSelect}function g(b,a){return"function"===typeof a?a.toString():a}function k(b,a,d,e,g){var e=e||{},i=d.block,k,p,o=e.filterOpType||"";if("undefined"!==typeof e.key)k=dust.helpers.tap(e.key,b,a);else if(c(a))k=a.current().selectKey,a.current().isResolved&&(g=function(){return!1});else return f.log("No key specified for filter in:"+o+" helper "),b;p=dust.helpers.tap(e.value,b,a);if(g(h(p,e.type,a),h(k,e.type,a))){c(a)&&(a.current().isResolved=
!0);if(i)return b.render(i,a);f.log("Missing body block in the "+o+" helper ")}else if(d["else"])return b.render(d["else"],a);return b}function h(b,a,d){if(b)switch(a||typeof b){case "number":return+b;case "string":return""+b;case "boolean":return Boolean("false"===b?!1:b);case "date":return new Date(b);case "context":return d.get(b)}return b}"undefined"!==typeof exports&&(dust=require("dustjs-linkedin"));var f="undefined"!==typeof console?console:{log:function(){}};dust.helpers={tap:function(b,a,
d){var e=b;"function"===typeof b&&(!0===b.isFunction?e=b():(e="",a.tap(function(a){e+=a;return""}).render(b,d).untap(),""===e&&(e=!1)));return e},sep:function(b,a,d){return a.stack.index===a.stack.of-1?b:d.block?d.block(b,a):b},idx:function(b,a,d){return d.block?d.block(b,a.push(a.stack.index)):b},contextDump:function(b,a,d,e){e=e||{};d=e.to||"output";e=e.key||"current";d=dust.helpers.tap(d,b,a);e=dust.helpers.tap(e,b,a);a="full"===e?JSON.stringify(a.stack,g,2):JSON.stringify(a.stack.head,g,2);return"console"===
d?(f.log(a),b):b.write(a)},"if":function(b,a,d,e){var c=d.block,i=d["else"];if(e&&e.cond){e=e.cond;e=dust.helpers.tap(e,b,a);if(eval(e)){if(c)return b.render(d.block,a);f.log("Missing body block in the if helper!");return b}if(i)return b.render(d["else"],a)}else f.log("No condition given in the if helper!");return b},math:function(b,a,d,e){if(e&&"undefined"!==typeof e.key&&e.method){var c=e.key,i=e.method,e=e.operand,h=null,c=dust.helpers.tap(c,b,a),e=dust.helpers.tap(e,b,a);switch(i){case "mod":(0===
e||-0.0===e)&&f.log("operand for divide operation is 0/-0: expect Nan!");h=parseFloat(c)%parseFloat(e);break;case "add":h=parseFloat(c)+parseFloat(e);break;case "subtract":h=parseFloat(c)-parseFloat(e);break;case "multiply":h=parseFloat(c)*parseFloat(e);break;case "divide":(0===e||-0.0===e)&&f.log("operand for divide operation is 0/-0: expect Nan/Infinity!");h=parseFloat(c)/parseFloat(e);break;case "ceil":h=Math.ceil(parseFloat(c));break;case "floor":h=Math.floor(parseFloat(c));break;case "abs":h=
Math.abs(parseFloat(c));break;default:f.log("method passed is not supported")}if(null!==h)return d&&d.block?b.render(d.block,a.push({isSelect:!0,isResolved:!1,selectKey:h})):b.write(h)}else f.log("Key is a required parameter for math helper along with method/operand!");return b},select:function(b,a,d,e){var c=d.block;if(e&&"undefined"!==typeof e.key){e=dust.helpers.tap(e.key,b,a);if(c)return b.render(d.block,a.push({isSelect:!0,isResolved:!1,selectKey:e}));f.log("Missing body block in the select helper ")}else f.log("No key given in the select helper!");
return b},eq:function(b,a,d,e){e&&(e.filterOpType="eq");return k(b,a,d,e,function(a,d){return d===a})},ne:function(b,a,d,e){return e?(e.filterOpType="ne",k(b,a,d,e,function(a,d){return d!==a})):b},lt:function(b,a,d,e){if(e)return e.filterOpType="lt",k(b,a,d,e,function(a,d){return d<a})},lte:function(b,a,d,e){return e?(e.filterOpType="lte",k(b,a,d,e,function(a,d){return d<=a})):b},gt:function(b,a,d,e){return e?(e.filterOpType="gt",k(b,a,d,e,function(a,d){return d>a})):b},gte:function(b,a,d,e){return e?
(e.filterOpType="gte",k(b,a,d,e,function(a,d){return d>=a})):b},"default":function(b,a,d,e){e&&(e.filterOpType="default");return k(b,a,d,e,function(){return true})},size:function(b,a,d,e){var f,e=e||{},e=e.key;if(!e||!0===e)a=0;else if(dust.isArray(e))a=e.length;else if(!isNaN(parseFloat(e))&&isFinite(e))a=e;else if("object"===typeof e)for(f in a=0,e)Object.hasOwnProperty.call(e,f)&&a++;else a=(e+"").length;return b.write(a)}};"undefined"!==typeof exports&&(module.exports=dust)})();
(function(){var c=Math,g=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"";/android/gi.test(navigator.appVersion);var k=/iphone|ipad/gi.test(navigator.appVersion),h=/playbook/gi.test(navigator.appVersion),f=/hp-tablet/gi.test(navigator.appVersion),b="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="ontouchstart"in window&&!f,d=g+"Transform"in document.documentElement.style,e=k||h,l=function(){return window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,17)}}(),i=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,n="onorientationchange"in window?"orientationchange":"resize",p=a?"touchstart":"mousedown",
o=a?"touchmove":"mousemove",t=a?"touchend":"mouseup",q=a?"touchcancel":"mouseup",s="translate"+(b?"3d(":"("),u=b?",0)":")",k=function(b,f){var c=document,i;this.wrapper="object"==typeof b?b:c.getElementById(b);this.wrapper.style.overflow="hidden";this.scroller=this.wrapper.children[0];this.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,
onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in f)this.options[i]=f[i];this.x=this.options.x;this.y=this.options.y;this.options.useTransform=d?this.options.useTransform:!1;this.options.hScrollbar=this.options.hScroll&&this.options.hScrollbar;this.options.vScrollbar=this.options.vScroll&&this.options.vScrollbar;this.options.useTransition=e&&this.options.useTransition;this.scroller.style[g+"TransitionProperty"]=this.options.useTransform?
"-"+g.toLowerCase()+"-transform":"top left";this.scroller.style[g+"TransitionDuration"]="0";this.scroller.style[g+"TransformOrigin"]="0 0";this.options.useTransition&&(this.scroller.style[g+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");this.options.useTransform?this.scroller.style[g+"Transform"]=s+this.x+"px,"+this.y+"px"+u:this.scroller.style.cssText+=";position:absolute;top:"+this.y+"px;left:"+this.x+"px";this.refresh();this._bind(n,window);this._bind(p);a||this._bind("mouseout",
this.wrapper)};k.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,handleEvent:function(d){switch(d.type){case p:if(!a&&0!==d.button)break;this._start(d);break;case o:this._move(d);break;case t:case q:this._end(d);break;case n:this._resize();break;case "mouseout":this._mouseout(d);break;case "webkitTransitionEnd":this._transitionEnd(d)}},_resize:function(){this.refresh()},_pos:function(a,d){a=this.hScroll?a:0;d=this.vScroll?d:0;this.options.useTransform?this.scroller.style[g+"Transform"]=s+a+"px,"+d+
"px"+u+" scale("+this.scale+")":(a>>=0,d>>=0,this.scroller.style.left=a+"px",this.scroller.style.top=d+"px");this.x=a;this.y=d},_start:function(d){var b=a?d.touches[0]:d,e,f;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,d);this.options.useTransition&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.momentum&&(this.options.useTransform?(e=getComputedStyle(this.scroller,
null)[g+"Transform"].replace(/[^0-9-.,]/g,"").split(","),f=1*e[4],e=1*e[5]):(f=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),e=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),f!=this.x||e!=this.y))this.options.useTransition?this._unbind("webkitTransitionEnd"):i(this.aniTime),this.steps=[],this._pos(f,e);this.startX=this.x;this.startY=this.y;this.pointX=b.pageX;this.pointY=b.pageY;this.startTime=d.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,
d);this._bind(o);this._bind(t);this._bind(q)}},_move:function(d){var b=a?d.touches[0]:d,e=b.pageX-this.pointX,f=b.pageY-this.pointY,i=this.x+e,h=this.y+f,g=d.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,d);this.pointX=b.pageX;this.pointY=b.pageY;if(0<i||i<this.maxScrollX)i=this.options.bounce?this.x+e/2:0<=i||0<=this.maxScrollX?0:this.maxScrollX;if(0<h||h<this.maxScrollY)h=this.options.bounce?this.y+f/2:0<=h||0<=this.maxScrollY?0:this.maxScrollY;
this.distX+=e;this.distY+=f;this.absDistX=c.abs(this.distX);this.absDistY=c.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(h=this.y,f=0):this.absDistY>this.absDistX+5&&(i=this.x,e=0)),this.moved=!0,this._pos(i,h),this.dirX=0<e?-1:0>e?1:0,this.dirY=0<f?-1:0>f?1:0,300<g-this.startTime&&(this.startTime=g,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,d))},_end:function(d){if(!(a&&0!=
d.touches.length)){var b=a?d.changedTouches[0]:d,e,f,i={dist:0,time:0},h={dist:0,time:0},g=(d.timeStamp||Date.now())-this.startTime;e=this.x;f=this.y;this._unbind(o);this._unbind(t);this._unbind(q);this.options.onBeforeScrollEnd&&this.options.onBeforeScrollEnd.call(this,d);if(this.moved){if(300>g&&this.options.momentum){i=e?this._momentum(e-this.startX,g,-this.x,this.scrollerW-this.wrapperW+this.x,this.options.bounce?this.wrapperW:0):i;h=f?this._momentum(f-this.startY,g,-this.y,0>this.maxScrollY?
this.scrollerH-this.wrapperH+this.y:0,this.options.bounce?this.wrapperH:0):h;e=this.x+i.dist;f=this.y+h.dist;if(0<this.x&&0<e||this.x<this.maxScrollX&&e<this.maxScrollX)i={dist:0,time:0};if(0<this.y&&0<f||this.y<this.maxScrollY&&f<this.maxScrollY)h={dist:0,time:0}}i.dist||h.dist?(b=c.max(c.max(i.time,h.time),10),this.scrollTo(e>>0,f>>0,b)):this._resetPos(200)}else{if(a){for(e=b.target;1!=e.nodeType;)e=e.parentNode;"SELECT"!=e.tagName&&("INPUT"!=e.tagName&&"TEXTAREA"!=e.tagName)&&(f=document.createEvent("MouseEvents"),
f.initMouseEvent("click",!0,!0,d.view,1,b.screenX,b.screenY,b.clientX,b.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,0,null),f._fake=!0,e.dispatchEvent(f))}this._resetPos(200)}this.options.onTouchEnd&&this.options.onTouchEnd.call(this,d)}},_resetPos:function(a){var d=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,b=0<=this.y||0<this.maxScrollY?0:this.y<this.maxScrollY?this.maxScrollY:this.y;d==this.x&&b==this.y?this.moved&&(this.options.onScrollEnd&&this.options.onScrollEnd.call(this),
this.moved=!1):this.scrollTo(d,b,a||0)},_mouseout:function(a){var d=a.relatedTarget;if(d)for(;d=d.parentNode;)if(d==this.wrapper)return;this._end(a)},_transitionEnd:function(a){a.target==this.scroller&&(this._unbind("webkitTransitionEnd"),this._startAni())},_startAni:function(){var a=this,d=a.x,b=a.y,e=Date.now(),f,i,h;a.animating||(a.steps.length?(f=a.steps.shift(),f.x==d&&f.y==b&&(f.time=0),a.animating=!0,a.moved=!0,a.options.useTransition)?(a._transitionTime(f.time),a._pos(f.x,f.y),a.animating=
!1,f.time?a._bind("webkitTransitionEnd"):a._resetPos(0)):(h=function(){var g=Date.now(),k;if(g>=e+f.time){a._pos(f.x,f.y);a.animating=false;a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a);a._startAni()}else{g=(g-e)/f.time-1;i=c.sqrt(1-g*g);g=(f.x-d)*i+d;k=(f.y-b)*i+b;a._pos(g,k);if(a.animating)a.aniTime=l(h)}},h()):a._resetPos(400))},_transitionTime:function(a){this.scroller.style[g+"TransitionDuration"]=a+"ms"},_momentum:function(a,d,b,e,f){var d=c.abs(a)/d,i=d*d/0.0012;0<a&&i>b?(b+=f/
(6/(6.0E-4*(i/d))),d=d*b/i,i=b):0>a&&i>e&&(e+=f/(6/(6.0E-4*(i/d))),d=d*e/i,i=e);return{dist:i*(0>a?-1:1),time:d/6.0E-4>>0}},_offset:function(a){for(var d=-a.offsetLeft,b=-a.offsetTop;a=a.offsetParent;)d-=a.offsetLeft,b-=a.offsetTop;return{left:d,top:b}},_bind:function(a,d,b){(d||this.scroller).addEventListener(a,this,!!b)},_unbind:function(a,d,b){(d||this.scroller).removeEventListener(a,this,!!b)},destroy:function(){this.scroller.style[g+"Transform"]="";this._unbind(n,window);this._unbind(p);this._unbind(o);
this._unbind(t);this._unbind(q);this._unbind("mouseout",this.wrapper);this.options.useTransition&&this._unbind("webkitTransitionEnd");this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var a;this.wrapperW=this.wrapper.clientWidth;this.wrapperH=this.wrapper.clientHeight;this.scrollerW=this.scroller.offsetWidth;this.scrollerH=this.scroller.offsetHeight;this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH;this.dirY=this.dirX=0;this.hScroll=
this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;this.scroller.style[g+"TransitionDuration"]="0";this._resetPos(200)},scrollTo:function(a,d,b,e){var f=a;this.stop();f.length||(f=[{x:a,y:d,time:b,relative:e}]);a=0;for(d=f.length;a<d;a++)f[a].relative&&(f[a].x=this.x-f[a].x,f[a].y=this.y-f[a].y),this.steps.push({x:f[a].x,
y:f[a].y,time:f[a].time||0});this._startAni()},scrollToElement:function(a,d){var b;if(a=a.nodeType?a:this.scroller.querySelector(a))b=this._offset(a),b.left+=this.wrapperOffsetLeft,b.top+=this.wrapperOffsetTop,b.left=0<b.left?0:b.left<this.maxScrollX?this.maxScrollX:b.left,b.top=0<b.top?0:b.top<this.maxScrollY?this.maxScrollY:b.top,d=void 0===d?c.max(2*c.abs(b.left),2*c.abs(b.top)):d,this.scrollTo(b.left,b.top,d)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(o);this._unbind(t);
this._unbind(q)},enable:function(){this.enabled=!0},stop:function(){i(this.aniTime);this.steps=[];this.animating=this.moved=!1}};"undefined"!==typeof exports?exports.iScroll=k:window.iScroll=k})();
var LZ77=function(c){var c=c||{},g=c.referenceIntBase||96,k=32+g-1,h=Math.pow(g,2)-1,f=c.minStringLength||5,b=Math.pow(g,1)-1+f,a=c.defaultWindowLength||144,d=h+f,e=function(a,d){if(0<=a&&a<Math.pow(g,d)-1){for(var b="";0<a;)b=String.fromCharCode(a%g+32)+b,a=Math.floor(a/g);for(var e=d-b.length,f=0;f<e;f++)b=String.fromCharCode(32)+b;return b}throw"Reference int out of range: "+a+" (width = "+d+")";},l=function(a,d){for(var b=0,e=0;e<d;e++){var b=b*g,f=a.charCodeAt(e);if(32<=f&&f<=k)b+=f-32;else throw"Invalid char code in reference int: "+
f;}return b};this.compress=function(c,g){g=g||a;if(g>d)throw"Window length too large";for(var l="",k=0,t=c.length-f;k<t;){for(var q=Math.max(k-g,0),s=f,u=!1,v=h,r=0,x=null;q+s<k;)c.substr(q,s)==c.substr(k,s)&&s<b?(s++,u=!0):(s-=1,u&&s>r&&(v=k-q-s,r=s),s=f,q++,u=!1);r?(x="`"+e(v,2)+e(r-f,1),k+=r):(x="`"!=c.charAt(k)?c.charAt(k):"``",k++);l+=x}return l+c.slice(k).replace(/`/g,"``")};this.decompress=function(a){for(var d="",b=0;b<a.length;){var e=a.charAt(b);if("`"!=e)d+=e,b++;else if("`"!=a.charAt(b+
1)){var e=l(a.substr(b+1,2),2),c;c=a.charAt(b+3);c=l(c,1)+f;d+=d.substr(d.length-e-c,c);b+=f-1}else d+="`",b+=2}return d}};
(function(c,g){var k=0;c.$=g.noConflict?g.noConflict():g;c.resolve=function(c,f){if(!c)return null;for(var c=c.split("."),b=window,a=window,d=-1,e;e=c[++d];){a=a[e];if(!a)if(f)a=b[e]={};else return null;b=a}return a};c.extend=function(h,f,b){function a(){}"object"==typeof h?(b=h,h=Object,f=function(){}):"object"==typeof f&&(b=f,f=h,h=Object);a.prototype=h.prototype;f.prototype=new a;f.prototype.constructor=f;if(b)for(var d in b)f.prototype[d]=b[d];f.extend=function(a,d){if(typeof a=="object"){d=a;
a=function(){f.apply(this,arguments)}}c.extend(f,a,d);return a};return f};c.log=function(){window.console?console.log.apply(console,arguments):alert([].join.call(arguments," "))};c.uuid=function(){return k++};c.delay=function(c,f,b){return setTimeout(function(){c.call(f)},b||0)};c.clone=function(h,f){return h?h instanceof Array?h.slice(0):h instanceof Date?new Date(h.getTime()):"object"==typeof h?c.merge(f,{},h):h.valueOf():h};c.merge=function(h,f){var b=-1,a=[].slice.call(arguments,2),d,e;"object"==
typeof h&&(a.unshift(f),f=h,h=!1);for(;d=a[++b];)for(e in d)d.hasOwnProperty(e)&&(f[e]=h?c.clone(d[e]):d[e]);return f};g.fn.dataAttrs=function(){for(var c={},f=this[0].attributes,b=-1,a;a=f[++b];)0==a.name.indexOf("data-")&&(c[a.name.slice(5)]=a.value);return c};g.proxy||(g.proxy=function(c,f){return function(){c.apply(f,arguments)}});g.fn.detach||(g.fn.detach=g.fn.remove)})(window.Lavaca=window.Lavaca||{},window.jQuery||window.Zepto||window.jMiny);
(function(c){c.indexOf=function(c,k){if(c){if(c.indexOf)return c.indexOf(k);for(var h=0,f=c.length;h<f;h++)if(c[h]===k)return h}return-1};c.contains=function(g,k){return-1<c.indexOf(g,k)};c.remove=function(g,k){var h=c.indexOf(g,k);-1<h&&g.splice(h,1);return h};c.pushIfNotExists=function(g,k){var h=c.indexOf(g,k);-1==h&&(g[h=g.length]=k);return h}})(Lavaca.resolve("Lavaca.util.ArrayUtils",!0));
(function(c){function g(a){return parseInt(a,10)}function k(a,d){for(var a=a.toLowerCase(),b=-1,c;c=d[++b];)if(a==c.toLowerCase()||a==f(c).toLowerCase())return b-1;throw'Invalid code "'+c+'"';}function h(a,d,b){for(var f=0>a?"-":"",b=b||"0",a=Math.abs(a).toString();0<d-a.length;)a=b+a;return f+a}function f(a){Lavaca.util.Translation&&(result=Lavaca.util.Translation.get(a));return result?result:a}function b(a){for(var d=[],b="",f=-1,c,h;h=a.charAt(++f);)if(c=b.charAt(0),c==h||'"'==c||"'"==c){if(b+=
h,'"'==c&&'"'==h||"'"==c&&"'"==h)d.push(b),b=""}else b&&d.push(b),b=h;b&&d.push(b);return d}c.timeOfDayDesignatorAbbr=["A","P"];c.timeOfDayDesignator=["AM","PM"];c.daysOfWeekAbbr="Sun Mon Tue Wed Thu Fri Sat".split(" ");c.daysOfWeek="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");c.monthsAbbr="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");c.months="January February March April May June July August September October November December".split(" ");c.fn={d:{exp:"\\d{1,2}",
i:function(a,d){d.date=g(a)},o:function(a,d){return(d?a.getUTCDate():a.getDate()).toString()}},dd:{exp:"\\d{2}",i:function(a,d){d.date=g(a)},o:function(a,d){return h(c.fn.d.o(a,d),2)}},ddd:{exp:"[a-z]{3}",i:function(){},o:function(a,d){return f(c.daysOfWeekAbbr[d?a.getUTCDay():a.getDay()])}},dddd:{exp:"[a-z]+",i:function(){},o:function(a,d){return f(c.daysOfWeek[d?a.getUTCDay():a.getDay()])}},f:{exp:"\\d",i:function(a,d){d.ms=100*g(a)},o:function(a,d,b){b=b||100;return h(Math.floor((d?a.getUTCMilliseconds():
a.getMilliseconds())/b),3-b.toString().length)}},ff:{exp:"\\d{2}",i:function(a,d){d.ms=10*g(a)},o:function(a,d){return h(c.fn.f.o(a,d,10),2)}},fff:{exp:"\\d{3}",i:function(a,d){d.ms=g(a,10)},o:function(a,d){return h(c.fn.f.o(a,d,1),3)}},h:{exp:"1?\\d",i:function(a,d,b){a=g(a)-1;b=0==(b.t||b.tt||"A").indexOf("A")?0:12;d.hour=a+b},o:function(a,d){return((d?a.getUTCHours():a.getHours())%12+1).toString()}},hh:{exp:"[0-1]\\d",i:function(a,d,b){c.fn.h.i(a,d,b)},o:function(a,d){return h(c.fn.h.o(a,d),2)}},
H:{exp:"[0-2]?\\d",i:function(a,d){d.hour=g(a)},o:function(a,d){return(d?a.getUTCHours():a.getHours()).toString()}},HH:{exp:"[0-2]\\d",i:function(a,d){d.hour=g(a)},o:function(a,d){return h(c.fn.H.o(a,d),2)}},m:{exp:"[1-5]?\\d",i:function(a,d){d.minute=g(a)},o:function(a,d){return(d?a.getUTCMinutes():a.getMinutes()).toString()}},mm:{exp:"[0-5]\\d",i:function(a,d,b){c.fn.m.i(a,d,b)},o:function(a,d){return h(c.fn.m.o(a,d),2)}},M:{exp:"1?\\d",i:function(a,d){d.month=g(a)-1},o:function(a,d){return((d?
a.getUTCMonth():a.getMonth())+1).toString()}},MM:{exp:"[0-1]\\d",i:function(a,d,b){c.fn.M.i(a,d,b)},o:function(a,d){return h(c.fn.M.o(a,d),2)}},MMM:{exp:"[a-z]{3}",i:function(a,d){d.month=k(a,c.monthsAbbr)},o:function(a,d){return f(c.monthsAbbr[d?a.getUTCMonth():a.getMonth()])}},MMMM:{exp:"[a-z]+",i:function(a,d){d.month=k(a,c.months)},o:function(a,d){return f(c.months[d?a.getUTCMonth():a.getMonth()])}},s:{exp:"[1-5]?\\d",i:function(a,d){d.second=g(a)},o:function(a,d){return(d?a.getUTCSeconds():a.getSeconds()).toString()}},
ss:{exp:"[0-5]\\d",i:function(a,d,b){c.fn.s.i(a,d,b)},o:function(a,d){return h(c.fn.s.o(a,d),2)}},t:{exp:"[a-z]",i:function(){},o:function(a,d){return f(c.timeOfDayDesignatorAbbr[Math.floor((d?a.getUTCHours():a.getHours())/12)])}},tt:{exp:"[a-z]+",i:function(){},o:function(a,d){return f(c.timeOfDayDesignator[Math.floor((d?a.getUTCHours():a.getHours())/12)])}},y:{exp:"\\d?\\d",i:function(a,d){d.year=(new Date).getFullYear()%100+g(a)},o:function(a,d){return((d?a.getUTCFullYear():a.getFullYear())%100).toString()}},
yy:{exp:"\\d{2}",i:function(a,d,b){c.fn.y.i(a,d,b)},o:function(a,d){return h(c.fn.y.o(a,d),2)}},yyy:{exp:"\\d*\\d{3}",i:function(a,d){d.year=g(a)},o:function(a,d){return h(d?a.getUTCFullYear():a.getFullYear(),3)}},yyyy:{exp:"\\d*\\d{4}",i:function(a,d,b){c.fn.yyy.i(a,d,b)},o:function(a,d){return h(d?a.getUTCFullYear():a.getFullYear(),4)}},z:{exp:"[-+]?1?\\d",i:function(a,d){d.offset=60*g(a)},o:function(a,d){var b=a.getTimezoneOffset(),f=Math.floor(Math.abs(b/60));return(0>b?"-":"+")+h(f,d)}},zz:{exp:"[-+]?[0-1]\\d",
i:function(a,d,b){c.fn.z.i(a,d,b)},o:function(a){return c.fn.z.o(a,2)}},zzz:{exp:"[-+]?[0-1]\\d:\\d{2}",i:function(a,d){var b=a.split(":");d.offset=60*g(b[0])+g(b[1])},o:function(a){var a=a.getTimezoneOffset(),d=a%60;return(0>a?"-":"+")+h((a-d)/60,2)+":"+h(Math.abs(d),2)}}};c.parse=function(a,d){for(var e=b(d),f,i=["^"],g=-1,k;k=e[++g];)(f=c.fn[k])?i.push("(",f.exp,")"):i.push("(",k.replace(/(^")|(^')|('$)|("$)/g,"").replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),")");i.push("$");f=RegExp(i.join(""));
i={year:0,month:0,date:1,hour:0,minute:0,second:0,ms:0,offset:0};g={};k=-1;var o;if(f.test(a))for(f=f.exec(a);o=e[++k];)g[o]=f[k+1];for(o in g)(e=c.fn[o])&&e.i(g[o],i,g);return new Date(c.monthsAbbr[i.month]+" "+h(i.date,2)+" "+h(i.year,4)+" "+h(i.hour,2)+":"+h(i.minute,2)+":"+h(i.second,2)+(0<i.ms?"."+h(i.ms,3):"")+(0<=i.offset?"+":"-")+h(Math.floor(Math.abs(i.offset/60)),2)+h(Math.abs(i.offset%60),2))};c.stringify=function(a,d,e){for(var d=b(d),f=-1,i=[],h,g;h=d[++f];)(g=c.fn[h])?i.push(g.o(a,e)):
i.push(h.replace(/(^")|(^')|('$)|("$)/g,""));return i.join("")}})(Lavaca.resolve("Lavaca.util.DateUtils",!0));(function(c){function g(c){var h,f,b;for(h in c){if(c.hasOwnProperty(h)&&(f=c[h]))if("function"==typeof f.dispose)f.dispose();else if(f instanceof Array)for(b=f.length-1;-1<b;b--)g(f[b]);delete c[h]}}c.Disposable=Lavaca.extend({dispose:function(){g(this)}})})(Lavaca.resolve("Lavaca.util",!0));
(function(c,g){c.Cache=g.extend({get:function(c,h){var f=this["@"+c];void 0===f&&void 0!==h&&(f=this["@"+c]=h);return void 0===f?null:f},set:function(c,h){this["@"+c]=h},add:function(c){var h=Lavaca.uuid();this.set(h,c);return h},remove:function(c){delete this["@"+c]},each:function(c,h){for(var f in this)this.hasOwnProperty(f)&&0==f.indexOf("@")&&c.call(h||this,f.slice(1),this[f])},toObject:function(){var c={};this.each(function(h,f){c[h]="function"===typeof f.toObject?f.toObject():f});return c},
toJSON:function(){return JSON.stringify(this.toObject())}})})(Lavaca.util,Lavaca.util.Disposable);
(function(c,g,k){c.Map=k.extend(function(c,f,b){k.call(this);this.hasLoaded=!1;this.name=c;(c=f)&&0!=c.indexOf("http")&&(c="/"==c.charAt(0)?location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+(0==c.indexOf("/")?c:"/"+c):location.toString().split("#")[0].split("?")[0].replace(/\w+\.\w+$/,"")+c);this.src=c;this.code=b;this.cache=new Lavaca.util.Cache},{is:function(c){return this.name==c},get:function(c){this.hasLoaded||(this.code?this.add(this.code):this.src&&this.load(this.src),
this.hasLoaded=!0);return this.cache.get(c)},add:function(c){for(var f in c)this.cache.set(f,c[f])},process:function(c){this.add("string"==typeof c?JSON.parse(c):c)},load:function(c){var f=this;Lavaca.net.Connectivity.ajax({async:!1,url:c,success:function(b){f.process(b)}})}});c.Map.setDefault=function(c,f){var b=f;"string"==typeof b&&(b=c.get(f));c.set("default",b)};c.Map.get=function(c,f,b,a){b||(b=f,f=a);return f&&(c=c.get(f))?c.get(b):null};c.Map.init=function(h,f,b,a){g(a||document.documentElement).find('script[type="'+
f+'"]').each(function(){var a=g(this),e=a.attr("data-src"),f=a.attr("data-name"),i=null!==a.attr("data-default"),a=a.text(),e=b(f,e,a);h.set(e.name,e);i&&c.Map.setDefault(h,f)})};c.Map.dispose=function(c){c.dispose()}})(Lavaca.util,Lavaca.$,Lavaca.util.Disposable);
(function(c,g,k){function h(b,a,d){d&&(d=JSON.parse(d));return new c.Config(b,a,d)}var f=new c.Cache;c.Config=k.extend({});c.Config.setDefault=function(b){k.setDefault(f,b)};c.Config.currentEnvironment=function(){return f.get("default").name};c.Config.get=function(b,a){return k.get(f,b,a,"default")};c.Config.init=function(b){k.init(f,"text/x-config",h,b)};c.Config.dispose=function(){k.dispose(f)}})(Lavaca.util,Lavaca.$,Lavaca.util.Map);
(function(c){c.Promise=Lavaca.extend(function(c){this.thisp=c;this.resolvedQueue=[];this.rejectedQueue=[]},{succeeded:!1,failed:!1,success:function(c){c&&(this.succeeded?c.apply(this.thisp,this.resolveArgs):this.resolvedQueue.push(c));return this},error:function(c){c&&(this.failed?c.apply(this.thisp,this.rejectArgs):this.rejectedQueue.push(c));return this},always:function(c){return this.then(c,c)},then:function(c,k){return this.success(c).error(k)},resolve:function(){if(!this.succeeded&&!this.failed){this.succeeded=
!0;this.resolveArgs=[].slice.call(arguments,0);for(var c=-1,k;k=this.resolvedQueue[++c];)k.apply(this.thisp,this.resolveArgs)}return this},reject:function(){if(!this.succeeded&&!this.failed){this.failed=!0;this.rejectArgs=[].slice.call(arguments,0);for(var c=-1,k;k=this.rejectedQueue[++c];)k.apply(this.thisp,this.rejectArgs)}return this},when:function(){for(var c=this,k=[],h=-1,f=arguments.length,b;b=arguments[++h];)(function(a){b.success(function(d){k[a]=d;1>--f&&c.resolve.apply(c,k)}).error(function(){c.reject.apply(c,
arguments)})})(h);b=null;return this},resolver:function(){var c=this;return function(){c.resolve.apply(c,arguments)}},rejector:function(){var c=this;return function(){c.reject.apply(c,arguments)}}});c.Promise.when=function(g){var k=g instanceof c.Promise,h=new c.Promise(k?window:g),k=[].slice.call(arguments,k?0:1);return h.when.apply(h,k)}})(Lavaca.resolve("Lavaca.util",!0));
(function(c,g){function k(c){return c}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};c.format=function(c){var b,a=k,d,e;arguments[1]instanceof Array?(b=arguments[1],a=arguments[2]||k):b=[].slice.call(arguments,1);d=0;for(e=b.length;d<e;d++)c=c.split("{"+d+"}").join(a(b[d]+""));return c};c.escapeHTML=function(c){var c=""+c,b;for(b in h)c=c.split(b).join(h[b]);return c};c.compress=function(c){"string"!=typeof c&&(c=JSON.stringify(c));return(new g).compress(c)};c.decompress=function(c){return(new g).decompress(c)}})(Lavaca.resolve("Lavaca.util.StringUtils",
!0),window.LZ77);
(function(c,g){function k(f,b,a){a&&(a=JSON.parse(a));f=new c.Translation(f,b,a);h.get(f.language)||h.set(f.language,f);return f}var h=new c.Cache;c.Translation=g.extend(function(c,b,a){g.apply(this,arguments);var d=c=c.toLowerCase().split("_");this.language=d[0];this.locale=(this.country=d[1]||"")?this.language+"_"+this.country:this.language},{is:function(c,b){return c==this.language&&(!b||!this.country||b==this.country)}});c.Translation.setDefault=function(f){h.remove("default");g.setDefault(h,
c.Translation.forLocale(f))};c.Translation.forLocale=function(c){c=(c||"default").toLowerCase();return h.get(c)||h.get(c.split("_")[0])||h.get("default")};c.Translation.get=function(f,b){b||(b=f,f="default");var a=c.Translation.forLocale(f),d=null;a&&(d=a.get(b));null===d&&(a=c.Translation.forLocale(f.split("_")[0]))&&(d=a.get(b));null===d&&(a=c.Translation.forLocale("default"))&&(d=a.get(b));return d};c.Translation.init=function(f,b){g.init(h,"text/x-translation",k,b);c.Translation.setDefault(f)};
c.Translation.dispose=function(){g.dispose(h)}})(Lavaca.util,Lavaca.util.Map);
(function(c,g){c.EventDispatcher=g.extend({suppressEvents:!1,on:function(c,h,f){var b=this.callbacks||(this.callbacks={}),c=b[c]||(b[c]=[]);c[c.length]={fn:h,thisp:f};return this},off:function(c,h,f){var b=this.callbacks,a,d=-1,e,g;if(c){if(b)if(h){if(a=b[c])for(b=b[c]=[];c=a[++d];)if(e=c.fn==h||c.fn.fn==h,g=f&&(c.thisp==f||c.fn.thisp==f),!e||e&&(!f||!g))b[b.length]=c}else delete b[c]}else delete this.callbacks;return this},trigger:function(c,h){if(!this.suppressEvents&&this.callbacks){var f=this.callbacks[c],
b=this.createEvent(c,h),a=-1,d;if(f)for(;d=f[++a];)d.fn.apply(d.thisp||this,[b])}return this},createEvent:function(c,h){return Lavaca.merge({},h||{},{type:c,target:h&&h.target?h.target:this,currentTarget:this})}})})(Lavaca.resolve("Lavaca.events",!0),Lavaca.util.Disposable);
(function(c){var g="screenX screenY clientX clientY pageX pageY".split(" ");c.EventPoint=Lavaca.extend(function(c){this.init(c)},{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,init:function(c){for(var h=-1,f;f=g[++h];)this[f]=c?c[f]:null}})})(Lavaca.resolve("Lavaca.events",!0));(function(c){c.EventVector=Lavaca.extend(function(c,k,h){this.length=c;this.axis=k;this.compass=h},{length:0,axis:"vertical",compass:"north"})})(Lavaca.resolve("Lavaca.events",!0));
(function(c,g,k,h){function f(a,d){u[a]=function(a){d(a)}}function b(a,d){v[a]=function(a){d(a)}}function a(a,d){a.touches&&(a=a.touches[d||0]);return new h(a)}function d(a,d){for(var b={},c=-1,e;e=q[++c];)b[e]=a[e]-d[e];return new h(b)}function e(a,d){return Math.sqrt((a.screenX-d.screenX)*(a.screenX-d.screenX)+(a.screenY-d.screenY)*(a.screenY-d.screenY))}function l(a,d){var b=a.screenX-d.screenX,c=a.screenY-d.screenY;return b*b>c*c?new k(Math.abs(b),"horizontal",0<b?"east":"west"):new k(Math.abs(c),
"vertical",0<c?"south":"north")}function i(a,d){var b=-1,c;if(null!==a&&d.changedTouches){for(;c=d.changedTouches[++b];)if(c.identifier===a)return c;return null}return d}function n(a){if(a){for(var d in a)"function"!=typeof a[d]&&(this[d]=a[d]);this.originalEvent=a}}var p="mousedown",o="mousemove",t="mouseup",q="screenX screenY clientX clientY pageX pageY".split(" "),s=!1,u={},v={};(function(){var a=document.createElement("div");a.setAttribute("ontouchstart","return;");a.setAttribute("ongesturestart",
"return;");if(s="function"==typeof a.ontouchstart)p="touchstart",o="touchmove",t="touchend"})();(function(){g(document.body).on(o,function(a){for(var d in u)u[d](a)}).on(t,function(a){for(var d in v)v[d](a)})})();n.prototype={preventDefault:function(){this.defaultPrevented=!0;this.originalEvent&&this.originalEvent.preventDefault()},stopPropagation:function(){this.originalEvent&&this.originalEvent.stopPropagation()}};c.moveThreshold=4;c.tapholdDuration=800;c.isSupported=function(){return s};c.bind=
function(h,g,k,o,t,q){function s(a){var b=new n(a);if(a&&(b.startTime=B,b.elapsed=(new Date).getTime()-B,b.startPoint=D,b.lastPoint=E,b.currentPoint=z,b.hasMoved=M||(M=!(e(D,z)<=c.moveThreshold)),D&&z&&(b.startDelta=d(z,D),b.startDistance=e(z,D),b.startVector=l(z,D)),z&&E))b.lastDelta=d(z,E),b.lastDistance=e(z,E),b.lastVector=l(z,E);return b}"function"==typeof g&&(g={start:g,move:k,end:o},q=t);g&&"object"==typeof g&&(q=k,k=g,g=null);k&&"object"==typeof k&&(o=k.move,t=k.end,k=k.start,q=o);var B,D,
E,z,M=!1,G=!1,w,I={},F;I.click=function(a){G&&a.preventDefault()};I[p]=function(d){var d=d.originalEvent||d,c=this,e=Lavaca.uuid();B=(new Date).getTime();D=E=z=a(d);M=false;d.changedTouches&&d.changedTouches.length?w=d.changedTouches[0].identifier:idenfifier=null;k&&k.call(q||c,s(d));G=G||d.defaultPrevented;f(e,function(d){var b=i(w,d);if(null!==b){z=a(b);if(o){d=s(d);d.currentTarget=c;o.call(q||c,d);G=G||d.defaultPrevented}E=z}});b(e,function(d){var b=i(w,d);if(null!==b){z=a(b);if(t){d=s(d);d.currentTarget=
c;t.call(q||c,d);G=G||d.defaultPrevented}delete u[e];delete v[e];c=null}})};for(F in I)if(g)h.on(F,g,I[F]);else h.on(F,I[F]);h=null};g.fn.touch=function(a,d,b,e,f){a instanceof Function&&(f=e,e=b,b=d,d=a,a=null);c.bind(this,a,d,b,e,f);return this};g.fn.tap=function(a,d,b){"function"==typeof a&&(b=d,d=a,a=null);if(s)c.bind(this,a,null,null,function(a){!a.hasMoved&&d&&d.apply(b||this,arguments)});else this.on("click",a,function(){d.apply(b||this,arguments)});return this};g.fn.taphold=function(a,d,b,
e){"function"==typeof a&&(e=b,b=d,d=a,a=null);b=b||c.tapholdDuration;this.tap(a,function(a){a.elapsed>=b&&d&&d.apply(this,arguments)},e);return this};g.fn.swipe=function(a,d,b,e){"function"==typeof a&&(b=d,d=a,a=null);var b=b||{},f=b.minDistance||30,i=b.maxDistance||Number.MAX_VALUE,h=b.direction||"horizontal",g=b.timeLimit||1E3,l=b.cancel||null,k=b.move||null,n=b.end||null;c.bind(this,a,b.start||null,function(a){a.elapsed<=g&&k&&k.apply(e||this,arguments)},function(a){n&&n.apply(e||this,arguments);
a.elapsed<=g&&(h==a.startVector.compass||h==a.startVector.axis)&&a.startVector.length>=f&&a.startVector.length<=i?d&&d.apply(e||this,arguments):l&&l.apply(e||this,arguments)});return this}})(Lavaca.resolve("Lavaca.events.Touch",!0),Lavaca.$,Lavaca.events.EventVector,Lavaca.events.EventPoint);
(function(c,g,k){var h=!1,f=[];c.isCordova=function(){return!!k};c.mobileBrowser=function(){var b={};b.agent=navigator.userAgent.toLowerCase();b.scrWidth=screen.width;b.scrHeight=screen.height;b.elemWidth=document.documentElement.clientWidth;b.elemHeight=document.documentElement.clientHeight;b.otherBrowser=-1!=b.agent.indexOf("series60")||-1!=b.agent.indexOf("symbian")||-1!=b.agent.indexOf("windows ce")||-1!=b.agent.indexOf("blackberry");b.mobileOS="undefined"!=typeof orientation?!0:!1;b.touchOS=
"ontouchstart"in document.documentElement?!0:!1;b.blackberry=-1<b.agent.indexOf("blackberry");b.ipad=-1!=b.agent.indexOf("ipad")?!0:!1;b.ipod=-1!=b.agent.indexOf("ipod")?!0:!1;b.iphone=-1!=b.agent.indexOf("iphone")?!0:!1;b.palm=-1!=b.agent.indexOf("palm")?!0:!1;b.symbian=-1!=b.agent.indexOf("symbian")?!0:!1;b.iOS=b.iphone||b.ipod||b.ipad?!0:!1;b.android=-1!=b.agent.indexOf("android")||!b.iOS&&!b.otherBrowser&&b.touchOS&&b.mobileOS?!0:!1;b.android2=b.android&&-1!=b.agent.indexOf("android 2")?!0:!1;
b.isMobile=b.android||b.iOS||b.mobileOS||b.touchOS?!0:!1;return b};c.register=function(b,a){function d(){window.plugins||(window.plugins={});window.plugins[b]=new a}h?d():f.push(d)};c.exec=function(b,a,d){var c=new Lavaca.util.Promise(window);k?k.exec(c.resolver(),c.rejector(),b,a,d):c.reject();return c};c.init=function(b){if(document.addEventListener)document.addEventListener("deviceready",b,!1);else g(document).on("deviceready",b)};g(document).ready(function(){for(var b=-1,a;a=f[++b];)a();h=!0;
k||(document.createEvent?(b=document.createEvent("Events"),b.initEvent("deviceready",!0,!1),document.dispatchEvent(b)):document.fireEvent&&(b=document.createEventObject(),b.eventType="deviceready",document.fireEvent("ondeviceready",b)))})})(Lavaca.resolve("Lavaca.env.Device",!0),Lavaca.$,window.Cordova||window.cordova);
(function(c,g){c.Badge=Lavaca.events.EventDispatcher.extend({get:function(){return g.exec("Badge","get")},set:function(c){var h=this;return g.exec("Badge","set",[c]).success(function(c){h.trigger("change",{count:c})})},increment:function(c){var c=c||1,h=this,f=new Lavaca.util.Promise;this.get().success(function(b){h.set(b+c).success(f.resolver()).error(f.rejector())}).error(f.rejector());return f},decrement:function(c){return self.increment(-(c||1))},clear:function(){return this.set(0)}});g.register("badge",
c.Badge)})(Lavaca.env,Lavaca.env.Device);(function(c,g){c.ChildBrowser=Lavaca.events.EventDispatcher.extend({showWebPage:function(c){if(g.isCordova())return g.exec("ChildBrowser","showWebPage",[c]).error(function(){window.location.href=c});window.open(c);return(new Lavaca.util.Promise(window)).resolve()},close:function(){return g.exec("ChildBrowser","close",[])}});g.register("childBrowser",c.ChildBrowser)})(Lavaca.env,Lavaca.env.Device);
(function(c,g,k){function h(b,a,d,c,h){d===f&&(d=a,a="");c||(c=[]);var c=[].concat(c),i=-1,g=c.length,d=[d,function(a){b=="confirm"&&(a===f||a===g||g===0&&a==2)?h.reject((g||2)-1):h.resolve(a-1)},a],k=[];for("confirm"==b&&c.push(c.shift());a=c[++i];)if(k.push(a.name),a.exec)h["confirm"==b&&i==c.length-1?"error":"success"](function(a,d){return function(b){b===f&&(b=g);b==a&&d(a)}}(i,a.exec));d.push(k.join(","));navigator.notification[b].apply(navigator.notification,d)}var f;c.Notification=Lavaca.events.EventDispatcher.extend({alert:function(b,
a,d){var c=new k;g.isCordova()?h("alert",b,a,d,c):window.alert?((button=(d||[])[0])&&button.exec&&c.then(button.exec),alert(a||b),c.resolve(0)):c.reject();return c},confirm:function(b,a,d){var c=new k;g.isCordova()?h("confirm",b,a,d,c):window.confirm?(d&&c.success((d[1]||{}).exec).error((d[0]||{}).exec),confirm(a)?c.resolve(1):c.reject(0)):c.reject();return c}});g.register("notification",c.Notification)})(Lavaca.env,Lavaca.env.Device,Lavaca.util.Promise);
(function(c,g){var k={animation:["animation","animationend","keyframes"],webkitAnimation:["-webkit-animation","webkitAnimationEnd","-webkit-keyframes"],MozAnimation:["-moz-animation","animationend","-moz-keyframes"],OAnimation:["-o-animation","oAnimationEnd","-o-keyframes"],MSAnimation:["-ms-animation","MSAnimationEnd","-ms-keyframes"]},h,f,b,a;(function(){var d=document.createElement("div").style,c;for(c in k)if(c in d){d=k[c];h=c;f=d[0];a=d[1];b=d[2];break}})();c.isSupported=function(){return!!h};
c.keyframesToCSS=function(a,c){var f=Lavaca.fx.Transform,i=["@",b," ",a,"{"],h,g,k,t;for(h in c){i.push(h,"{");g=c[h];if("string"==typeof g)i.push(g);else for(k in g)t=g[k],"transform"==k&&f&&(k=f.cssProperty(),t=f.toCSS(t)),i.push(k,":",t,";");i.push("}")}i.push("}");return i.join("")};c.generateKeyframes=function(a,b){"object"==typeof a&&(b=a,a="a"+(new Date).getTime());var f=c.keyframesToCSS(a,b);g("<style>"+f+"</style>").appendTo("head");return a};c.cssProperty=function(){return f};g.fn.keyframe=
function(a,b,f,i,h,g,k){c.isSupported()&&("object"==typeof a&&(a=c.generateKeyframes(a)),"object"==typeof b&&(k=b.complete,g=b.direction,h=b.iterations,i=b.delay,f=b.easing,b=b.duration),g=g||"normal",h=h||1,i=i||0,f=f||"linear",b=b||1,"number"==typeof b&&(b+="ms"),"number"==typeof i&&(i+="ms"),k&&this.nextAnimationEnd(k),this.css(c.cssProperty(),[a,b,f,i,h,g].join(" ")));return this};g.fn.animationEnd=function(d,b){return a?this.on(a,d,b):this};g.fn.nextAnimationEnd=function(d,b){return a?this.one(a,
d,b):this}})(Lavaca.resolve("Lavaca.fx.Animation",!0),Lavaca.$);
(function(c,g){function k(a,b){var c=0==a.indexOf("rotate"),f="scale"==a,h=0==a.indexOf("translate");/(X|Y|Z)$/.test(a);var g,k=[];if("object"==typeof b)for(g in b)k.push(a+g.toUpperCase()+"("+(h?"number"==typeof b[g]?b[g]+"px":b[g]:c?"number"==typeof b[g]?b[g]+"deg":b[g]:f?"number"==typeof b[g]?b[g]+","+b[g]:b[g]:b[g])+")");else f?b="number"==typeof b?b+","+b:b:c?b="number"==typeof b?b+"deg":b:h&&(b="number"==typeof b?b+"px":b),k.push(a+"("+b+")");return k.join(" ")}var h={transform:"transform",
webkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",MSTransform:"-ms-transform"},f,b,a=!1;(function(){var d=document.createElement("div").style,c;for(c in h)if(c in d){f=c;b=h[c];d[c]="translate3d(0,0,0)";a=-1<d[c].indexOf("translate3d")&&-1==navigator.userAgent.indexOf("Android");break}})();c.isSupported=function(){return!!f};c.is3dSupported=function(){return a};c.toCSS=function(a){var b=[],c;if("object"==typeof a)for(c in a)b.push(k(c,a[c]));else b.push(a);
return b.join(" ")};c.cssProperty=function(){return b};g.fn.transform=function(a,b){c.isSupported()&&(a=c.toCSS(a),b&&"object"==typeof b&&(b=("number"==typeof b.x?100*b.x+"%":b.x)+(void 0===b.y?"":" "+("number"==typeof b.y?100*b.y+"%":b.y))),this.each(function(){this.style[f]=a;b&&(this.style[f+"Origin"]=b)}));return this}})(Lavaca.resolve("Lavaca.fx.Transform",!0),Lavaca.$);
(function(c,g){var k={transition:["transition","transitionend"],webkitTransition:["-webkit-transition","webkitTransitionEnd"],MozTransition:["-moz-transition","MozTransitionEnd"],OTransition:["-o-transition","OTransitionEnd"],MSTransition:["-ms-transition","MSTransitionEnd"]},h,f,b;(function(){var a=document.createElement("div").style,d;for(d in k)if(d in a){h=d;f=k[d][0];b=k[d][1];break}})();c.isSupported=function(){return!!h};c.toCSS=function(a,b,c){var c=c||"linear",f=[],i=a instanceof Array,g;
for(g in a)i&&(g=a[g]),f.push(g+" "+b+"ms "+c);return f.join(",")};c.cssProperty=function(){return f};g.fn.transition=function(a,b,f,g){f instanceof Function&&(g=f,f=null);if(c.isSupported()){var i=c.toCSS(a,b,f);g&&this.nextTransitionEnd(g);this.each(function(){this.style[h]=i});this.css(a)}else this.css(a),g&&g.call(this[0],{});return this};g.fn.transitionEnd=function(a,d){return b?this.on(b,a,d):this};g.fn.nextTransitionEnd=function(a,d){return b?this.one(b,a,d):this}})(Lavaca.resolve("Lavaca.fx.Transition",
!0),Lavaca.$);
(function(c,g,k,h){c.Controller=g.extend(function(f,b){f instanceof c.Controller?(this.router=f.router,this.viewManager=f.viewManager):(this.router=f,this.viewManager=b)},{router:null,viewManager:null,exec:function(c,b,a){this.params=b;this.state=a;var d=new k(this),e;a&&(e=a.state,d.success(function(){document.title=a.title}));c=this[c](b,e);c instanceof k?d.when(c):d.resolve();return d},ajax:function(c){return k.when(this,Lavaca.net.Connectivity.ajax(c))},view:function(c,b,a,d){return k.when(this,this.viewManager.load(c,
b,a,d))},ajaxThenView:function(c,b,a,d,e){var g=new k(this),i=this;this.ajax(c).success(function(c){g.when(this.view(a,d,b.apply(i,arguments),e))}).error(function(){g.reject.apply(g,arguments)});return g},history:function(c,b,a,d){var e=!this.state;return function(){if(e)Lavaca.net.History[d?"replace":"push"](c,b,a)}},translate:function(c,b){var a=Lavaca.util.Translation.get(c);a&&b&&(a=h.format.apply(null,[a].concat(b)));return a},url:function(c,b){return h.format(c,b,encodeURIComponent)},redirect:function(c,
b){return this.router.unlock().exec(this.url(c,b||[]))},ajaxThenRedirect:function(c,b){var a=new k(this),d=this;this.ajax(c).success(function(c){a.when(this.redirect(b.apply(d,arguments)))}).error(function(){a.reject.apply(a,arguments)});return a},dispose:function(){this.router=this.viewManager=null;g.prototype.dispose.apply(this,arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util.Disposable,Lavaca.util.Promise,Lavaca.util.StringUtils,Lavaca.$);
(function(c,g,k,h,f){function b(a,b,d,c,f,g){a.trigger(b,{attribute:d,previous:c===e?null:c,value:f===e?a.get(d):f,messages:g||[]})}function a(a,b,d){for(var b=!!b,c=["suppressValidation","suppressEvents","suppressTracking"],f={},e=-1,g;g=c[++e];)f[g]=a[g],a[g]=b||a[g];b=d.call(a);for(e=-1;g=c[++e];)a[g]=f[g];return b}function d(a){var b=!0,d;for(d in a)0<a[d].length&&(b=!1);a.isValid=b;return a}var e;c.Model=g.extend(function(a){g.call(this);this.attributes=new k;this.rules=new k;this.unsavedAttributes=
[];this.flags={};this.defaults&&(a=Lavaca.merge({},this.defaults,a));a&&(this.suppressEvents=this.suppressTracking=!0,this.apply(a),this.suppressEvents=this.suppressTracking=!1)},{suppressValidation:!1,suppressTracking:!1,get:function(a){a=this.attributes.get(a);return"function"===typeof a?a.call(this):a},canSet:function(){return!0},set:function(d,c,e,g){return a(this,g,function(){if(!this.canSet(d))return!1;var a=this.attributes.get(d),g=this.suppressValidation?[]:this.validate(d,c);if(g.length)return b(this,
"invalid",d,a,c,g),!1;a!==c&&(this.attributes.set(d,c),e&&((g=this.flags[e])||(g=this.flags[e]=[]),f.contains(g,d)||g.push(d)),b(this,"change",d,a,c),!this.suppressTracking&&!Lavaca.util.ArrayUtils.contains(this.unsavedAttributes,d)&&this.unsavedAttributes.push(d));return!0})},has:function(a){return null!==this.get(a)},idAttribute:"id",id:function(){return this.get(this.idAttribute)},isNew:function(){return null===this.id()},parse:function(a){"string"==typeof a&&(a=JSON.parse(a));return a},apply:function(b,
d){a(this,d,function(){b=this.parse(b);for(var a in b)this.set(a,b[a])})},clear:function(a){if(a){var a=this.flags[a],b=-1,d,c;if(a)for(;d=a[++b];)f.remove(this.unsavedAttributes,d),(c=this.get(d))&&c.dispose&&c.dispose(),this.set(d,null)}else this.attributes.dispose(),this.attributes=new k,this.unsavedAttributes.length=0},clone:function(){return new this.constructor(this.attributes.toObject())},addRule:function(a,b,d){this.rules.get(a,[]).push({rule:b,message:d})},validate:function(a,b){var c,f,
g=-1,h;if(a){c=[];b=b===e?this.get(a,b):b;if(f=this.rules.get(a))for(;h=f[++g];)h.rule(a,b)||c.push(h.message);return c}c={};this.rules.each(function(a){c[a]=this.validate(a)},this);return d(c)},onFetchSuccess:function(a){a=this.parse(a);this.apply(a,!0);this.trigger("fetchSuccess",{response:a})},onFetchError:function(a){this.trigger("fetchError",{response:a})},fetch:function(a,b){b=Lavaca.clone(b||{});b.url=a;return h.when(this,Lavaca.net.Connectivity.ajax(b)).success(this.onFetchSuccess).error(this.onFetchError)},
save:function(a,b){for(var d=new h(this),c=this.toObject(),f={},g=-1,k;k=this.unsavedAttributes[++g];)f[k]=c[k];d.success(function(a){var b=this.idAttribute;this.isNew()&&a[b]!==e&&this.set(b,a[b]);this.unsavedAttributes=[];this.trigger("saveSuccess",{response:a})}).error(function(a){this.trigger("saveError",{response:a})});c=a.call(b||this,this,f,c);c instanceof h?d.when(c):c?d.resolve(c):d.reject(c);return d},saveToServer:function(a){return this.save(function(b,d,c){b=this.id();this.isNew()?d=c:
d[this.idAttribute]=b;return h.when(this,Lavaca.net.Connectivity.ajax({url:a,cache:!1,type:"POST",data:d,dataType:"json"}))})},toObject:function(){var a=this.attributes.toObject(),b;for(b in a)"function"===typeof a[b]&&(a[b]=a[b].call(this));return a},toJSON:function(){return JSON.stringify(this.toObject())},on:function(a,b,d,c){function f(a){if(!b||a.attribute==b)d.call(c||this,a)}"function"==typeof b&&(c=d,d=b,b=null);f.fn=d;f.thisp=c;return g.prototype.on.call(this,a,f,c)}});c.Model.SENSITIVE=
"sensitive"})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.events.EventDispatcher,Lavaca.util.Cache,Lavaca.util.Promise,Lavaca.util.ArrayUtils);
(function(c,g,k,h,f){function b(a,b,c,f,g){a.trigger(b,{previousIndex:c,index:f,model:g})}function a(a,b){var c=b?1:-1;return function(b,f){var e=b.get(a),g=f.get(a);return e==g?0:e<g?c:-c}}c.Collection=g.extend(function(a,b){g.call(this,b);this.models=[];this.changedOrder=!1;this.addedItems=[];this.removedItems=[];this.changedItems=[];a&&(this.suppressEvents=!0,this.add.apply(this,a),this.suppressEvents=!1)},{TModel:c.Model,itemsProperty:"items",clear:function(){g.prototype.clear.apply(this,arguments);
for(var a=-1,b;b=this.models[++a];)this.remove(b);this.changedOrder=!1;this.addedItems.length=this.removedItems.length=this.changedItems.length=this.models.length=0},prepare:function(a){a=a instanceof this.TModel?a:this.TModel.prototype instanceof c.Collection?new this.TModel(a[this.TModel.prototype.itemsProperty],a):new this.TModel(a);if(-1==f.indexOf(this.models,a))a.on("change",this.onItemEvent,this).on("invalid",this.onItemEvent,this).on("saveSuccess",this.onItemEvent,this).on("saveError",this.onItemEvent,
this);return a},canSet:function(a){return a!=this.itemsProperty},add:function(){if(arguments.length&&arguments[0]instanceof Array)return this.add.apply(this,arguments[0]);var a=!1,c,g,i,h,k;c=0;for(g=arguments.length;c<g;c++)if(i=arguments[c],h=i instanceof this.TModel,i=this.prepare(i),k=f.indexOf(this.models,i),!h||!f.contains(this.models,i))this.models.push(i),this.suppressTracking||(f.remove(this.removedItems,i),f.remove(this.changedItems,i),f.pushIfNotExists(this.addedItems,i)),b(this,"addItem",
null,k,i),a=!0;return a},moveTo:function(a,c){a instanceof this.TModel&&(a=f.indexOf(this.models,a));if(-1<a){var g=this.models.splice(a,1)[0];g&&(this.models.splice(c,0,g),this.suppressTracking||(this.changedOrder=!0),b(this,"moveItem",a,c,g))}},remove:function(a){if(a instanceof this.TModel){var c=f.remove(this.models,a);return-1<c?(this.suppressTracking||(f.remove(this.addedItems,a),f.remove(this.changedItems,a),f.pushIfNotExists(this.removedItems,a)),a.off("change",this.onItemEvent).off("invalid",
this.onItemEvent).off("saveSuccess",this.onItemEvent).off("saveError",this.onItemEvent),b(this,"removeItem",c,null,a),!0):!1}for(var c=this.filter(a),g=-1,i=!1;a=c[++g];)i=this.remove(a)||i;return i},filter:function(a,b){var b=void 0===b?Number.MAX_VALUE:b,c=[],f=-1,g,h,k;"function"!=typeof a&&(h=a,a=function(a,b){for(k in h)if(b.get(k)!=h[k])return!1;return!0});for(;(g=this.models[++f])&&(!a(f,g)||!(c.push(g),1>--b)););return c},first:function(a){return this.filter(a,1)[0]||null},itemAt:function(a){return this.models[a]},
count:function(){return this.models.length},each:function(a,b){for(var c=-1,f;f=this.itemAt(++c);)a.call(b||this,c,f)},sort:function(b,c){var f="function"===typeof b?b:a(b,c),g=Lavaca.clone(this.models);this.models.sort(f,this);this.suppressTracking||(this.changedOrder=!0);this.trigger("rearrange",{oldModels:g,newModels:this.models});return this},reverse:function(){var a=Lavaca.clone(this.models);this.models.reverse();this.suppressTracking||(this.changedOrder=!0);this.trigger("rearrange",{oldModels:a,
newModels:this.models});return this},onItemEvent:function(a){var b=a.target,c=f.indexOf(this.models,b);"change"==a.type?f.pushIfNotExists(this.changedItems,b):"saveSuccess"==a.type&&f.remove(this.changedItems,b);this.trigger(a.type+"Item",Lavaca.merge({},a,{target:b,model:b,index:c,previousIndex:null}))},onFetchSuccess:function(a){var b=a=this.parse(a);b instanceof Array||(this.apply(a),b=a[this.itemsProperty]);this.add.apply(this,b);this.trigger("fetchSuccess",{response:a})},saveToServer:function(a){return this.save(function(b,
c,f){b=this.id();this.isNew()?c=f:c[this.idAttribute]=b;return(new h(this)).when(Lavaca.net.Connectivity.ajax({url:a,cache:!1,type:"POST",data:c,dataType:"json"}))})},toObject:function(a){for(var b=g.prototype.toObject.apply(this,arguments),c=this.itemsProperty,f=b[c]=[],h=-1,k;k=this.models[++h];)f[b[c].length]=a&&!k.isNew()?k.id():k.toObject();return b}})})(Lavaca.mvc,Lavaca.mvc.Model,Lavaca.util.Cache,Lavaca.util.Promise,Lavaca.util.ArrayUtils);
(function(c,g){function k(){return RegExp("\\{\\*(.*?)\\}","g")}function h(c){c=decodeURIComponent(c);isNaN(c)?"true"==c.toLowerCase()?c=!0:"false"==c.toLowerCase()?c=!1:RegExp("^\\d{4}-[0-1]\\d-[0-3]\\d$","g").test(c)&&(c=c.split("-"),c=new Date(Number(c[0]),Number(c[1])-1,Number(c[2]))):c=Number(c);return c}c.Route=g.extend(function(c,b,a,d){g.call(this);this.pattern=c;this.TController=b;this.action=a;this.params=d||{}},{matches:function(c){var b;b=this.pattern;if("/"==b)b=RegExp("^\\/(\\?.*)?(#.*)?$",
"g");else{"/"==b.charAt(0)&&(b=b.slice(1));b=b.split("/");for(var a="^",d=-1,e;e=b[++d];)a=k().test(e)?a+"(/([^/?#]+))*?":RegExp("\\{([^\\/]*?)\\}","g").test(e)?a+"/([^/?#]+)":a+("/"+e);b=RegExp(a+"(\\?.*)?(#.*)?$","g")}return b.test(c)},parse:function(c){var b=Lavaca.clone(this.params),a=this.pattern.slice(1),d=c.split("#"),e,g,i;b.url=c;b.route=this;d=d[1]?d[1].split("?"):d[0].split("?");if(e=d[1]){c=-1;for(e=e.split("&");g=e[++c];)g=g.split("="),i=decodeURIComponent(g[0]),void 0!==b[i]?(b[i]instanceof
Array||(b[i]=[b[i]]),b[i].push(h(g[1]))):b[i]=h(g[1])}c=0;d=d[0].replace(/(^(http(s?)\:\/\/[^\/]+)?\/?)|(\/$)/,"");g=RegExp(a.replace(k(),"(.+)").replace(RegExp("\\{([^\\/]*?)\\}","g"),"([^/]+)"));d=g.exec(d);for(e=g.exec(a);g=d[++c];)a=e[c],k().test(a)&&(g=g.split("/")),b[a.replace(RegExp("[\\{\\}\\*]","g"),"")]=g;return b},exec:function(c,b,a,d,e){function g(){Lavaca.delay(h.dispose,h)}var h=new this.TController(b,a),c=this.parse(c),d=h.exec(this.action,Lavaca.merge(c,e),d);d.then(g,g);return d}})})(Lavaca.resolve("Lavaca.mvc",
!0),Lavaca.util.Disposable);
(function(c,g,k){c.Router=g.extend(function(c){g.call(this);this.routes=[];this.viewManager=c;this.onpopstate=function(c){this.hasNavigated&&this.exec(c.url,c)};Lavaca.net.History.on("popstate",this.onpopstate,this)},{locked:!1,hasNavigated:!1,add:function(g,f,b,a){if("object"==typeof g)for(var d in g)a=g[d],a instanceof Array?(f=a[0],b=a[1],a=a[2]):(f=a.controller,b=a.action,a=a.params),this.add(d,f,b,a);else this.routes.push(new c.Route(g,f,b,a));return this},exec:function(c,f,b){if(this.locked)return(new k(this)).reject("locked");
this.locked=!0;c||(c="/");0==c.indexOf("http")&&(c=c.replace(/^http(s?):\/\/.+?/,""));var a=-1,d,e=new k(this);e.always(function(){this.unlock()});for(this.hasNavigated||e.success(function(){this.hasNavigated=!0});d=this.routes[++a];)if(d.matches(c))return e.when(d.exec(c,this,this.viewManager,f,b));return e.reject(c,f)},unlock:function(){this.locked=!1;return this},dispose:function(){this.onpopstate&&(Lavaca.net.History.off("popstate",this.onpopstate),this.onpopstate=null);g.prototype.dispose.apply(this,
arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util.Disposable,Lavaca.util.Promise);
(function(c,g,k,h){c.View=k.extend(function(c,b,a,d){k.call(this);this.model=c||null;this.layer=b||0;this.eventMap=a||{};this.widgetMap=d||{};this.widgets=new Lavaca.util.Cache;this.on("rendersuccess",this.onRenderSuccess).on("rendererror",this.onRenderError)},{el:null,shell:null,template:null,className:null,wrapper:function(){return g('<div class="view"></div>')},interior:function(){return g('<div class="view-interior"></div>')},render:function(){var f=new h(this),b=Lavaca.ui.Template.get(this.template),
a=this.model;a instanceof c.Model&&(a=a.toObject());this.el&&this.el.detach();this.shell=this.wrapper();this.el=this.interior();this.shell.append(this.el);this.shell.attr("data-layer-index",this.layer);this.className&&this.shell.addClass(this.className);f.success(function(a){this.trigger("rendersuccess",{html:a})}).error(function(a){this.trigger("rendererror",{err:a})});this.shell.addClass("tmpl-"+this.template.toLowerCase().replace(/\s/g,"-"));b.render(a).success(f.resolver()).error(f.rejector());
return f},redraw:function(f,b){var a=new h(this),d=new h(this),e=Lavaca.ui.Template.get(this.template),k;"object"===typeof f||f instanceof c.Model?(b=f,k=!0,f=null):"boolean"==typeof f?(k=f,f=null):f||(k=!0);if(!this.hasRendered)return d.rejector("View has not been rendered yet and cannot be redrawn.");b=b||this.model;b instanceof c.Model&&(b=b.toObject());a.success(function(a){if(k){this.el.html(a);d.resolve(a)}else if(f){var b=g("<div>"+a+"</div>").find(f),c=this.el.find(f);if(b.length>0&&b.length===
c.length){c.each(function(a){g(this).replaceWith(b.eq(a))});d.resolve(a)}else d.reject("Count of items matching selector is not the same in the original html and in the newly rendered html.")}else d.resolve(a)}).error(d.rejector());e.render(b).success(a.resolver()).error(a.rejector());return d},clearModelEvents:function(){var c,b;if(this.eventMap&&this.eventMap.model&&this.model&&this.model instanceof k)for(c in this.eventMap.model)b=this.eventMap.model[c],"object"==typeof b&&(b=b.on),this.model.off(c,
b,this)},applyEvents:function(){var c=this.el,b,a,d,e,g;for(d in this.eventMap)for(e in b=this.eventMap[d],b)if(a=b[e],"object"==typeof a?(g=a,a=a.on):g=void 0,"model"==d){if(this.model&&this.model instanceof k)this.model.on(e,a,this)}else if("tap"==e&&c.tap)c.tap(d,a);else if("taphold"==e&&c.taphold)c.taphold(d,a,g?g.duration:void 0);else if("swipe"==e&&c.swipe)c.swipe(d,a,g);else if("animationEnd"==e&&c.animationEnd)c.animationEnd(d,a);else if("transitionEnd"==e&&c.transitionEnd)c.transitionEnd(d,
a);else c.on(e,d,a)},mapEvent:function(c,b,a){var d;if("object"==typeof c)for(c in d=c,d)for(b in d[c])this.mapEvent(c,b,d[c][b]);else(d=this.eventMap[c])||(d=this.eventMap[c]={}),d[b]=a;return this},createWidgets:function(){var c=this.widgets,b,a,d;for(a in this.widgetMap)d=this.widgetMap[a],("self"==a?this.el:this.el.find(a)).each(function(a,h){b=new d(g(h));c.set(b.id,b)})},mapWidget:function(c,b){if("object"==typeof c){var a=c;for(c in a)this.mapWidget(c,a[c])}else this.widgetMap[c]=b;return this},
insertInto:function(c){if(!this.shell.parent()[0]!=c[0]){for(var b=c.children("[data-layer-index]"),a=-1,d;d=b[++a];)if(d=g(d),d.attr("data-layer-index")>this.index){this.shell.insertBefore(d);return}c.append(this.shell)}},enter:function(c){var b=new h(this),a,c=g(c);this.hasRendered||(a=this.render().error(b.rejector()));this.insertInto(c);a?b.when(a):Lavaca.delay(b.resolver());b.then(function(){this.trigger("enter")});return b},exit:function(){var c=new h(this);this.shell.detach();Lavaca.delay(c.resolver());
c.then(function(){this.trigger("exit")});return c},onRenderSuccess:function(c){this.el.html(c.html);this.applyEvents(this.el);this.createWidgets(this.el);this.hasRendered=!0},onRenderError:function(c){Lavaca.log(c.err)},dispose:function(){this.model&&this.clearModelEvents();this.template=this.model=null;k.prototype.dispose.apply(this,arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.$,Lavaca.events.EventDispatcher,Lavaca.util.Promise);
(function(c,g,k,h,f,b){c.ViewManager=f.extend(function(a){f.call(this);this.el=k(a||document.body);this.views=new g.Cache;this.layers=[];this.exitingViews=[];this.enteringViews=[]},{locked:!1,load:function(a,b,c,f){function g(){k.enteringViews=[p];o.success(function(){Lavaca.delay(function(){k.enteringViews=[]})});s=k.dismissLayersAbove(f-1,p);k.layers[f]!=p?(t.when(p.enter(k.el,k.exitingViews),s).then(o.resolve),k.layers[f]=p):o.when(s)}if(this.locked)return(new h(this)).reject("locked");this.locked=
!0;var f=f||0,k=this,p=this.views.get(a),o=new h(this),t=new h(o),q=null,s=null;o.always(function(){this.locked=!1});p||(p=new b(c,f),q=p.render(),null!==a&&(this.views.set(a,p),p.cacheKey=a));q?q.then(g,o.rejector()):g();return o},dismiss:function(a){if("number"==typeof a)this.dismissLayersAbove(a-1);else if(a instanceof Lavaca.mvc.View)this.dismiss(a.layer);else{var a=k(a),b=a.attr("data-layer-index");null===b&&(a=a.closest("[data-layer-index]"),b=a.attr("data-layer-index"));null!==b&&this.dismiss(Number(b))}},
dismissLayersAbove:function(a,c){var f=new h(this),g=!1,i,k;for(i=this.layers.length-1;i>a;i--)if((k=this.layers[i])&&(!c||c!=k))(function(a){this.exitingViews.push(a);f.when(a.exit(this.el,this.enteringViews)).success(function(){Lavaca.delay(function(){b.remove(this.exitingViews,a);(!a.cacheKey||c&&c.cacheKey==a.cacheKey)&&a.dispose()},this)});this.layers[i]=null}).call(this,k),g=!0;g||f.resolve();return f},flush:function(a){if(a)this.views.remove(a);else{for(var a=-1,b;b=this.layers[++a];)b.cacheKey&&
this.views.remove(b.cacheKey);this.views.dispose();this.views=new g.Cache}},dispose:function(){f.prototype.dispose.call(this)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util,Lavaca.$,Lavaca.util.Promise,Lavaca.util.Disposable,Lavaca.util.ArrayUtils);
(function(c,g,k){function h(c){c.preventDefault();c.stopPropagation()}c.Application=g.extend(function(c){Lavaca.env.Device.init(k.proxy(this.init,this));k(window).on("unload",k.proxy(this.dispose,this));if(c)this.on("init",c)},{TViewManager:Lavaca.mvc.ViewManager,TRouter:Lavaca.mvc.Router,TState:Lavaca.mvc.Model,initRoute:"/",initState:null,initParams:null,initLocale:"en_US",viewRootSelector:"#view-root",onInvalidRoute:function(c){"locked"!=c&&plugins.notification.alert("An error occurred while trying to display this URL.")},
onTapLink:function(c){var b=k(c.currentTarget),a=b.attr("href"),d=b.attr("rel"),e=b.attr("target");if(/^((mailto)|(tel)|(sms))\:/.test(a))return location.href=a,!0;c.preventDefault();"back"==d?Lavaca.net.History.back():"nofollow"==d||"_blank"==e?(c.stopPropagation(),plugins.childBrowser.showWebPage(a)):"cancel"==d?this.viewManager.dismiss(c.currentTarget):a&&this.router.exec(a,null,b.dataAttrs()).error(this.onInvalidRoute)},ajax:function(){return Lavaca.net.Connectivity.ajax.apply(Lavaca.net.Connectivity,
arguments)},init:function(){var c=new Lavaca.util.Promise(this);this.mobileBrowser=Lavaca.env.Device.mobileBrowser();this.animations=!this.mobileBrowser.android;this.state=new this.TState;Lavaca.util.Config.init();this.state.set("lang",localStorage.getItem("app:lang")||this.initLocale);Lavaca.util.Translation.init(app.state.get("lang"));Lavaca.ui.Template.init();this.viewManager=new this.TViewManager(this.viewRootSelector);this.router=new this.TRouter(this.viewManager);k(document.body).tap("a",this.onTapLink,
this).tap(".ui-blocker",h);this.trigger("init");this.router.hasNavigated?c.resolve():(c.when(this.router.exec(this.initialHashRoute||this.initRoute,this.initState,this.initParams)),this.initState&&Lavaca.net.History.replace(this.initState.state,this.initState.title,this.initState.url));return c.then(function(){this.trigger("ready")})},dispose:function(){this.trigger("dispose");Lavaca.util.Config.dispose();Lavaca.util.Translation.dispose();Lavaca.ui.Template.dispose();g.prototype.dispose.call(this)},
initialHashRoute:function(c){c=c.match(/^(?:#)(\/.*)#?@?/);return c instanceof Array&&c[1]?c[1].replace(/#.*/,""):null}(window.location.hash)})})(Lavaca.mvc,Lavaca.events.EventDispatcher,Lavaca.$);(function(c,g){function k(){throw"Not implemented";}c.Store=g.extend(function(c){this.id=c},{get:function(){k()},set:function(){k()},remove:function(){k()},all:function(){k()}})})(Lavaca.resolve("Lavaca.storage",!0),Lavaca.util.Disposable);
(function(c,g,k){function h(c){localStorage.setItem(c.id+"@manifest",JSON.stringify(c.manifest))}c.LocalStore=c.Store.extend(function(f){c.Store.call(this,f);this.manifest=JSON.parse(localStorage.getItem(this.id+"@manifest")||"[]")},{key:function(c){return this.id+":"+c},get:function(c){return(c=localStorage.getItem(this.key(c)))?JSON.parse(g.decompress(c)):null},set:function(c,b){localStorage.setItem(this.key(c),g.compress(JSON.stringify(b)));k.pushIfNotExists(this.manifest,c);h(this)},remove:function(c){localStorage.removeItem(this.key(c));
k.remove(this.manifest,c);h(this)},all:function(){for(var c=[],b=-1,a;a=this.manifest[++b];)c.push(this.get(a));return c}})})(Lavaca.resolve("Lavaca.storage"),Lavaca.util.StringUtils,Lavaca.util.ArrayUtils);
(function(c,g){function k(a){if(a==b)for(var c=-1,e;e=f[++c];)e(a)}var h="boolean"==typeof navigator.onLine,f=[],b="offline";navigator.userAgent.indexOf("Android");c.isOffline=function(){var a=Lavaca.resolve("navigator.connection.type");return null!==a?a==Lavaca.resolve("Connection.NONE"):h?!navigator.onLine:!1};c.ajax=function(a){var d=new Lavaca.util.Promise,e=a.success,f=a.error;a.success=function(){e&&e.apply(this,arguments);d.resolve.apply(d,arguments)};a.error=function(){f&&f.apply(this,arguments);
d.reject.apply(d,arguments)};c.isOffline()?d.reject(b):g.ajax(a);d.error(k);return d};c.registerOfflineAjaxHandler=function(a){f.push(a)}})(Lavaca.resolve("Lavaca.net.Connectivity",!0),Lavaca.$);
(function(c,g,k){function h(b,c,d,e,f,g){b.position=c;e={id:d,state:e,title:f,url:g};b.sequence[c]=e;location.hash=a=g+"#@"+d;return e}var f=!(-1<navigator.userAgent.indexOf("Android"))&&"function"==typeof k.pushState,b=!1,a,d,e=0;c.History=g.extend(function(){g.call(this);this.sequence=[];this.position=-1;this.replace({},document.title,location.pathname);var b=this;f?(this.onPopState=function(a){a.state&&(e--,b.trigger("popstate",{state:a.state.state,title:a.state.title,url:a.state.url}))},window.addEventListener("popstate",
this.onPopState,!1)):(this.onPopState=function(){var c=location.hash,d,f,g=-1;c&&(c=c.replace(/^#/,""));if(c!=a&&(a=c)){e--;for(c=c.split("#@")[1];f=b.sequence[++g];)if(f.id==c){d=f;this.position=g;break}d&&(location.hash=d.url+"#@"+d.id,document.title=d.title,b.trigger("popstate",{state:d.state,title:d.title,url:d.url}))}},window.attachEvent?window.attachEvent("onhashchange",this.onPopState):window.addEventListener("hashchange",this.onPopState,!1))},{current:function(){return this.sequence[this.position]||
null},hasHistory:function(){return 0<e},push:function(a,c,d){e++;b?(document.title=c,f?k.pushState({state:a,title:c,url:d},c,d):h(this,++this.position,Lavaca.uuid(),a,c,d)):this.replace(a,c,d)},replace:function(a,c,d){b=!0;document.title=c;if(f)k.replaceState({state:a,title:c,url:d},c,d);else{0>this.position&&(this.position=0);var e=this.current()||{id:Lavaca.uuid()};h(this,this.position,e.id,a,c,d)}},dispose:function(){this.onPopState&&(f?window.removeEventListener("popstate",this.onPopState,!1):
window.detachEvent?window.detachEvent("onhashchange",this.onPopState):window.removeEventListener("hashchange",this.onPopState,!1));g.prototype.dispose.call(this)}});c.History.init=function(a){d||(a&&c.History.overrideStandardsMode(),d=new c.History);return d};c.History.push=function(){c.History.init().push.apply(d,arguments)};c.History.replace=function(){c.History.init().replace.apply(d,arguments)};c.History.back=function(){k.back()};c.History.forward=function(){k.forward()};c.History.dispose=function(){_history&&
(d.dispose(),d=null)};c.History.on=function(){return c.History.init().on.apply(d,arguments)};c.History.off=function(){return c.History.init().off.apply(d,arguments)};c.History.overrideStandardsMode=function(){f=!1}})(Lavaca.resolve("Lavaca.net",!0),Lavaca.events.EventDispatcher,window.history);
(function(c,g,k){var h=new Lavaca.util.Cache,f=[];c.Template=k.extend({compile:function(){},render:function(){throw"Abstract";},process:function(b){this.code=b}});c.Template.get=function(b){return h.get(b)};c.Template.init=function(b){for(var a=-1,c;c=f[++a];)k.init(h,c.mime,function(a,b,f){return new c.js(a,b,f)},b)};c.Template.dispose=function(){k.dispose(h)};c.Template.render=function(b,a){var d=c.Template.get(b);if(d)return d.render(a);throw'No template named "'+b+'"';};c.Template.register=function(b,
a){f[f.length]={mime:b,js:a}}})(Lavaca.resolve("Lavaca.ui",!0),Lavaca.$,Lavaca.util.Map);
(function(c,g,k,h){c.DustTemplate=k.extend(function(c,b,a){k.apply(this,arguments);var d=this.prepareHelpers(),e;g.helpers||(g.helpers=[]);for(e in d)g.helpers[e]=d[e]},{prepareHelpers:function(){return{msg:this.helperMsg,include:this.helperInclude,config:this.helperConfig}},helperMsg:function(c,b,a,d){var e=g.helpers.tap(d.key,c,b),k=g.helpers.tap(d.locale,c,b),i=h.get(e,k),e=[i],k=-1;if(!i)return a.block?c.render(a.block,b):c;for(a=d["p"+ ++k];"undefined"!==typeof a;)e.push(g.helpers.tap(a,c,b)),
a=d["p"+ ++k];return c.write(Lavaca.util.StringUtils.format.apply(this,e))},helperInclude:function(c,b,a,d){var a=g.helpers.tap(d.name,c,b),e;k.render(a,b.stack.head).then(function(a){e=a});return c.write(e)},helperConfig:function(c,b,a,d){var e=g.helpers.tap(d.key,c,b),h=g.helpers.tap(d.environment,c,b),i=h?Lavaca.util.Config.get(h,e):Lavaca.util.Config.get(e),e=[i],h=-1;if(d.only||d.not)return e=Lavaca.util.Config.currentEnvironment(),d.only&&e==d.only||d.not&&e!=d.not?a.block?c.render(a.block,
b):c:a["else"]?c.render(a["else"],b):c;if(!i)return a.block?c.render(a.block,b):c;for(a=d["p"+ ++h];"undefined"!==typeof a;)e.push(g.helpers.tap(a,c,b)),a=d["p"+ ++h];return c.write(Lavaca.util.StringUtils.format.apply(this,e))},compile:function(){k.prototype.compile.call(this);g.loadSource(g.compile(this.code,this.name))},render:function(c){var b=new Lavaca.util.Promise(this);!this.code&&this.src&&this.load(this.src);this.code&&!this.compiled&&(this.compile(),this.compiled=!0);g.render(this.name,
c,function(a,c){a?b.reject(a):b.resolve(c)});return b},dispose:function(){delete g.cache[this.name];k.prototype.dispose.call(this)}});c.Template.register("text/dust-template",c.DustTemplate)})(Lavaca.ui,dust,Lavaca.ui.Template,Lavaca.util.Translation);(function(c,g,k){c.Widget=k.extend(function(c){k.call(this);this.el=c=g(c);var f=c.attr("id");f||(f="widget-"+Lavaca.uuid(),c.attr("id",f));this.id=f})})(Lavaca.resolve("Lavaca.ui",!0),Lavaca.$,Lavaca.events.EventDispatcher);
(function(c,g,k,h){function f(a){return a?null:"error_required"}function b(a,b){return a&&!RegExp(b.attr("pattern")).test(a)?"error_pattern":null}function a(a){return a&&!/^\w+@\w+(\.\w+)*\.\w+$/.test(a)?"error_email":null}function d(a){return a&&!/^\d?(\d{3})?\d{7}$/.test(a.replace(/\D/g,""))?"error_email":null}function e(a){return a&&!/^\d+(\.\d+)?$/.test(a)?"error_number":null}function l(a){return a&&!/^https?:\/\/\w+(\.\w+)*\.\w(:\d+)?\/\S+$/.test(a)?"error_url":null}c.Form=k.extend(function(){k.apply(this,
arguments);var a=this;this.pendingSync={};this._onChangeInput=function(b){a.onChangeInput(b)};this._onSubmit=function(b){a.onSubmit(b)};this.el.on("submit",this._onSubmit);this.addRule(this.defaultRules())},{onSubmit:function(a){a.preventDefault();this.validate().success(this.onSubmitSuccess).error(this.onSubmitError)},onSubmitSuccess:function(){},onSubmitError:function(){},onChangeInput:function(a){if(this.model){var b=g(a.target),a=b.attr("name"),b=b.val();this.pendingSync[a]=!0;this.model.set(a,
b);this.pendingSync[a]=!1}},onChangeModel:function(a){this.pendingSync[a.attribute]||this.set(a.attribute,a.value)},bind:function(a){this.unbind();this.model=a;a.on("change",this.onChangeModel,this);this.el.on("change",this._onChangeInput)},unbind:function(){this.model&&(this.el.off("change",this._onChangeInput),this.model.off("change",this.onchangeModel,this),this.model=null)},input:function(a){return this.el.find("input, select, textarea").filter('[name="'+a+'"]')},get:function(a){return this.input(a).val()},
set:function(a,b){this.input(a).val(b||null)},defaultRules:function(){return{"[required]":f,"[pattern]":b,"[type=email]":a,"[type=tel]":d,"[type=number]":e,"[type=url]":l}},addRule:function(a,b){this.rules||(this.rules=[]);if("object"==typeof a)for(var c in a)this.addRule(c,a[c]);else this.rules.push({selector:a,callback:b})},values:function(){for(var a=this.el.find("input, select, textarea"),b={},c=-1,d,e,f;d=a[++c];)if(d=g(d),e=d.attr("type"),!("radio"==e||"checkbox"==e)||d[0].checked)e=d.attr("name"),
f=b[e],d=d.val(),f instanceof Array?f.push(d):b[e]=void 0!==f?[f,d]:d;return b},validate:function(a,b,c){a&&"function"!=typeof a&&(c=a,a=null);c&&(c=g(c));for(var d=null,e=new h(this),f=-1,k,l,v,r,x,A,C,L,H;l=this.rules[++f];){v=c?c.filter(l.selector):this.el.find(l.selector);for(k=-1;r=v[++k];)if(r=g(r),H=r.val(),x=l.callback.call(this,H,r,this))A=r.attr("name"),d||(d={}),d[A]||(L=r.attr("id"),C=null,L&&(C=this.el.find('label[for="'+L+'"]').text()),d[A]={id:L,name:A,label:C,el:r,value:H,messages:[]}),
d[A].messages.push(x)}d?e.reject(d):e.resolve(this.values());return e.error(function(a){this.trigger("invalid",{inputs:a})}).success(function(a){this.trigger("valid",a)}).success(a).error(b)},dispose:function(){this.unbind();k.prototype.dispose.call(this)}});c.Form.withSubmit=function(a,b){return c.Form.extend({onSubmitSuccess:function(b){a.call(this,b)},onSubmitError:function(a){b.call(this,a)}})}})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget,Lavaca.util.Promise);
(function(c,g,k){c.LoadingIndicator=k.extend({className:"loading",show:function(){this.el.addClass(this.className)},hide:function(){this.el.removeClass(this.className)}});c.LoadingIndicator.init=function(h){function f(){b.hide()}var h=h||c.LoadingIndicator,b=new h(document.body);g(document).on("ajaxStart",function(){b.show()}).on("ajaxStop",f).on("ajaxError",f);return b}})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget);
(function(c,g,k,h){var f=["overflowScrolling","webkitOverflowScrolling","MozOverflowScrolling","OOverflowScrolling","MSOverflowScrolling"],b;(function(){for(var a=document.createElement("div").style,c=-1,e;e=f[++c];)if(e in a){b=e;break}})();c.Scrollable=k.extend(function(){k.apply(this,arguments);this.iScrollOptions||(this.iScrollOptions={});this.supportsOverflow?this.initOverflowScroll():(this.className="synthetic-scroll",this.initIScroll())},{supportsOverflow:!!b,className:"overflow-scroll",iScrollOptions:null,
wrapper:function(){return g('<div class="scroll-wrapper"></div>')},initOverflowScroll:function(){this.el.addClass(this.className);this.preventParentScroll()},initIScroll:function(){var a=this.wrapper(),b={},c,f;for(c in this.iScrollOptions)f=this.iScrollOptions[c],"function"==typeof f&&(f=g.proxy(f,this)),b[c]=f;f=b.onBeforeScrollStart;b.onBeforeScrollStart=function(a){var b=(a.explicitOriginalTarget||a.target).nodeName;"SELECT"!=b&&("OPTION"!=b&&"INPUT"!=b&&"TEXTAREA"!=b&&"LABEL"!=b)&&(a.preventDefault(),
a.stopPropagation());f&&f.apply(this,arguments)};this.el.addClass(this.className);a.append(this.el.children());this.el.append(a);this.iScroll=new h(this.el[0],b);this.refresh()},refresh:function(){this.supportsOverflow||Lavaca.delay(function(){this.iScroll.refresh()},this,10)},preventParentScroll:function(){var a=this.el[0];this.el.on("touchstart",function(){startTopScroll=a.scrollTop;0>=startTopScroll&&(a.scrollTop=1);startTopScroll+a.offsetHeight>=a.scrollHeight&&(a.scrollTop=a.scrollHeight-a.offsetHeight-
1)})},dispose:function(){this.isScroll&&this.iScroll.destroy();k.prototype.dispose.call(this)}})})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget,iScroll);
