/*
Lavaca 1.0.5
Copyright (c) 2012 Mutual Mobile

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

Contains components from or inspired by:

Simple Reset
(c) 2011 Eric Meyer
Released to public domain

jQuery v1.7.1
(c) 2011, John Resig
Dual licensed under the MIT or GPL Version 2 licenses.

Sizzle.js
(c) 2011, The Dojo Foundation
Released under the MIT, BSD, and GPL licenses.

Backbone.js 0.9.1 and Underscore.js 1.3.1
(c) 2012, Jeremy Ashkenas, DocumentCloud Inc
Released under the MIT license.

Dust.js v0.3.0
(c) 2010, Aleksander Williams
Released under the MIT license.

Zepto.js 0.8.0
(c) 2011 Thomas Fuchs
Released under the MIT license

ChildBrowser
(c) 2012 Jesse MacFadyen, Nitobi
Released under the MIT license

lz77.js
(c) 2009 Olle Törnström
Released under the MIT license

iScroll 4.1.9
(c) 2011 Matteo Spinelli
Released under the MIT license
*/
(function(b){String.prototype.trim===b&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});Array.prototype.reduce===b&&(Array.prototype.reduce=function(h){if(this===void 0||this===null)throw new TypeError;var k=Object(this),g=k.length>>>0,f=0,c;if(typeof h!="function")throw new TypeError;if(g==0&&arguments.length==1)throw new TypeError;if(arguments.length>=2)c=arguments[1];else{do{if(f in k){c=k[f++];break}if(++f>=g)throw new TypeError;}while(1)}for(;f<g;){f in k&&
(c=h.call(b,c,k[f],f,k));f++}return c})})();
var Zepto=function(){function b(a){return"[object Function]"==K.call(a)}function h(a){return a instanceof Object}function k(a){var e,d;if("[object Object]"!==K.call(a))return!1;d=b(a.constructor)&&a.constructor.prototype;if(!d||!hasOwnProperty.call(d,"isPrototypeOf"))return!1;for(e in a);return e===m||hasOwnProperty.call(a,e)}function g(a){return a instanceof Array}function f(a){return"number"==typeof a.length}function c(a){return a.filter(function(a){return a!==m&&null!==a})}function a(a){return a.replace(/::/g,
"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function d(a){return a in x?x[a]:x[a]=RegExp("(^|\\s)"+a+"(\\s|$)")}function e(a,e){return e===m?o(a):o(a).filter(e)}function l(a,e,d,f){return b(e)?e.call(a,d,f):e}function i(a,e,d){var f=a%2?e:e.parentNode;f?f.insertBefore(d,!a?e.nextSibling:1==a?f.firstChild:2==a?e:null):o(d).remove()}function u(a,e){e(a);for(var d in a.childNodes)u(a.childNodes[d],e)}var m,p,o,r,t=[],w=t.slice,s=
window.document,q={},x={},z=s.defaultView.getComputedStyle,C={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},L=/^\s*<(\w+|!)[^>]*>/,J=[1,3,8,9,11],Q=s.createElement("table"),B=s.createElement("tr"),D={tr:s.createElement("tbody"),tbody:Q,thead:Q,tfoot:Q,td:B,th:B,"*":s.createElement("div")},E=/complete|loaded|interactive/,A=/^\.([\w-]+)$/,N=/^#([\w-]+)$/,H=/^[\w-]+$/,K={}.toString,v={},F,M,I=s.createElement("div");v.matches=function(a,e){if(!a||1!==a.nodeType)return!1;
var d=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(d)return d.call(a,e);var f;f=a.parentNode;(d=!f)&&(f=I).appendChild(a);f=~v.qsa(f,e).indexOf(a);d&&I.removeChild(a);return f};F=function(a){return a.replace(/-+(.)?/g,function(a,e){return e?e.toUpperCase():""})};M=function(a){return a.filter(function(e,d){return a.indexOf(e)==d})};v.fragment=function(a,e){e===m&&(e=L.test(a)&&RegExp.$1);e in D||(e="*");var d=D[e];d.innerHTML=""+a;return o.each(w.call(d.childNodes),
function(){d.removeChild(this)})};v.Z=function(a,e){a=a||[];a.__proto__=arguments.callee.prototype;a.selector=e||"";return a};v.isZ=function(a){return a instanceof v.Z};v.init=function(a,e){if(a){if(b(a))return o(s).ready(a);if(v.isZ(a))return a;var d;if(g(a))d=c(a);else if(k(a))d=[o.extend({},a)],a=null;else if(0<=J.indexOf(a.nodeType)||a===window)d=[a],a=null;else if(L.test(a))d=v.fragment(a.trim(),RegExp.$1),a=null;else{if(e!==m)return o(e).find(a);d=v.qsa(s,a)}return v.Z(d,a)}return v.Z()};o=
function(a,e){return v.init(a,e)};o.extend=function(a){w.call(arguments,1).forEach(function(e){for(p in e)e[p]!==m&&(a[p]=e[p])});return a};v.qsa=function(a,e){var d;return a===s&&N.test(e)?(d=a.getElementById(RegExp.$1))?[d]:t:1!==a.nodeType&&9!==a.nodeType?t:w.call(A.test(e)?a.getElementsByClassName(RegExp.$1):H.test(e)?a.getElementsByTagName(e):a.querySelectorAll(e))};o.isFunction=b;o.isObject=h;o.isArray=g;o.isPlainObject=k;o.inArray=function(a,e,d){return t.indexOf.call(e,a,d)};o.trim=function(a){return a.trim()};
o.uuid=0;o.map=function(a,e){var d,c=[],b;if(f(a))for(b=0;b<a.length;b++)d=e(a[b],b),null!=d&&c.push(d);else for(b in a)d=e(a[b],b),null!=d&&c.push(d);return 0<c.length?[].concat.apply([],c):c};o.each=function(a,e){var d;if(f(a))for(d=0;d<a.length&&!1!==e.call(a[d],d,a[d]);d++);else for(d in a)if(!1===e.call(a[d],d,a[d]))break;return a};o.fn={forEach:t.forEach,reduce:t.reduce,push:t.push,indexOf:t.indexOf,concat:t.concat,map:function(a){return o.map(this,function(e,d){return a.call(e,d,e)})},slice:function(){return o(w.apply(this,
arguments))},ready:function(a){E.test(s.readyState)?a(o):s.addEventListener("DOMContentLoaded",function(){a(o)},!1);return this},get:function(a){return a===m?w.call(this):this[a]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){this.forEach(function(e,d){a.call(e,d,e)});return this},filter:function(a){return o([].filter.call(this,function(e){return v.matches(e,
a)}))},add:function(a,e){return o(M(this.concat(o(a,e))))},is:function(a){return 0<this.length&&v.matches(this[0],a)},not:function(a){var e=[];if(b(a)&&a.call!==m)this.each(function(d){a.call(this,d)||e.push(this)});else{var d="string"==typeof a?this.filter(a):f(a)&&b(a.item)?w.call(a):o(a);this.forEach(function(a){0>d.indexOf(a)&&e.push(a)})}return o(e)},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!h(a)?a:o(a)},last:function(){var a=this[this.length-
1];return a&&!h(a)?a:o(a)},find:function(a){var e;e=1==this.length?v.qsa(this[0],a):this.map(function(){return v.qsa(this,a)});return o(e)},closest:function(a,e){for(var d=this[0];d&&!v.matches(d,a);)d=d!==e&&d!==s&&d.parentNode;return o(d)},parents:function(a){for(var d=[],f=this;0<f.length;)f=o.map(f,function(a){if((a=a.parentNode)&&a!==s&&0>d.indexOf(a))return d.push(a),a});return e(d,a)},parent:function(a){return e(M(this.pluck("parentNode")),a)},children:function(a){return e(this.map(function(){return w.call(this.children)}),
a)},siblings:function(a){return e(this.map(function(a,e){return w.call(e.parentNode.children).filter(function(a){return a!==e})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return this.map(function(){return this[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null);if("none"==z(this,"").getPropertyValue("display")){var a=this.style,e=this.nodeName,d,f;q[e]||(d=s.createElement(e),s.body.appendChild(d),f=
z(d,"").getPropertyValue("display"),d.parentNode.removeChild(d),"none"==f&&(f="block"),q[e]=f);a.display=q[e]}})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return this.each(function(){o(this).wrapAll(o(a)[0].cloneNode(!1))})},wrapAll:function(a){this[0]&&(o(this[0]).before(a=o(a)),a.append(this));return this},unwrap:function(){this.parent().each(function(){o(this).replaceWith(o(this).children())});return this},clone:function(){return o(this.map(function(){return this.cloneNode(!0)}))},
hide:function(){return this.css("display","none")},toggle:function(a){return(a===m?"none"==this.css("display"):a)?this.show():this.hide()},prev:function(){return o(this.pluck("previousElementSibling"))},next:function(){return o(this.pluck("nextElementSibling"))},html:function(a){return a===m?0<this.length?this[0].innerHTML:null:this.each(function(e){var d=this.innerHTML;o(this).empty().append(l(this,a,e,d))})},text:function(a){return a===m?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=
a})},attr:function(a,e){var d;return"string"==typeof a&&e===m?0==this.length||1!==this[0].nodeType?m:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(d=this[0].getAttribute(a))&&a in this[0]?this[0][a]:d:this.each(function(d){if(1===this.nodeType)if(h(a))for(p in a)this.setAttribute(p,a[p]);else this.setAttribute(a,l(this,e,d,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&this.removeAttribute(a)})},prop:function(a,e){return e===m?this[0]?this[0][a]:
m:this.each(function(d){this[a]=l(this,e,d,this[a])})},data:function(e,d){var f=this.attr("data-"+a(e),d);return null!==f?f:m},val:function(a){return a===m?0<this.length?this[0].value:m:this.each(function(e){this.value=l(this,a,e,this.value)})},offset:function(){if(0==this.length)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}},css:function(e,d){if(d===m&&"string"==typeof e)return 0==this.length?m:
this[0].style[F(e)]||z(this[0],"").getPropertyValue(e);var f="";for(p in e)"string"==typeof e[p]&&""==e[p]?this.each(function(){this.style.removeProperty(a(p))}):f+=a(p)+":"+("number"==typeof e[p]&&!C[a(p)]?e[p]+"px":e[p])+";";"string"==typeof e&&(""==d?this.each(function(){this.style.removeProperty(a(e))}):f=a(e)+":"+("number"==typeof d&&!C[a(e)]?d+"px":d));return this.each(function(){this.style.cssText+=";"+f})},index:function(a){return a?this.indexOf(o(a)[0]):this.parent().children().indexOf(this[0])},
hasClass:function(a){return 1>this.length?!1:d(a).test(this[0].className)},addClass:function(a){return this.each(function(e){r=[];var d=this.className;l(this,a,e,d).split(/\s+/g).forEach(function(a){o(this).hasClass(a)||r.push(a)},this);r.length&&(this.className+=(d?" ":"")+r.join(" "))})},removeClass:function(a){return this.each(function(e){if(a===m)return this.className="";r=this.className;l(this,a,e,r).split(/\s+/g).forEach(function(a){r=r.replace(d(a)," ")});this.className=r.trim()})},toggleClass:function(a,
e){return this.each(function(d){d=l(this,a,d,this.className);(e===m?!o(this).hasClass(d):e)?o(this).addClass(d):o(this).removeClass(d)})}};["width","height"].forEach(function(a){o.fn[a]=function(e){var d,f=a.replace(/./,function(a){return a[0].toUpperCase()});return e===m?this[0]==window?window["inner"+f]:this[0]==s?s.documentElement["offset"+f]:(d=this.offset())&&d[a]:this.each(function(d){var f=o(this);f.css(a,l(this,e,d,f[a]()))})}});["after","prepend","before","append"].forEach(function(a,e){o.fn[a]=
function(){var a=o.map(arguments,function(a){return h(a)?a:v.fragment(a)});if(1>a.length)return this;var d=this.length,f=1<d,c=2>e;return this.each(function(b,l){for(var g=0;g<a.length;g++){var h=a[c?a.length-g-1:g];u(h,function(a){null!=a.nodeName&&("SCRIPT"===a.nodeName.toUpperCase()&&(!a.type||"text/javascript"===a.type))&&window.eval.call(window,a.innerHTML)});f&&b<d-1&&(h=h.cloneNode(!0));i(e,l,h)}})};o.fn[e%2?a+"To":"insert"+(e?"Before":"After")]=function(e){o(e)[a](this);return this}});v.Z.prototype=
o.fn;v.camelize=F;v.uniq=M;o.zepto=v;return o}();window.Zepto=Zepto;"$"in window||(window.$=Zepto);
(function(b){function h(a){return a._zid||(a._zid=i++)}function k(a,e,d,f){e=g(e);if(e.ns)var c=RegExp("(?:^| )"+e.ns.replace(" "," .* ?")+"(?: |$)");return(l[h(a)]||[]).filter(function(a){return a&&(!e.e||a.e==e.e)&&(!e.ns||c.test(a.ns))&&(!d||h(a.fn)===h(d))&&(!f||a.sel==f)})}function g(a){a=(""+a).split(".");return{e:a[0],ns:a.slice(1).sort().join(" ")}}function f(a,e,d){b.isObject(a)?b.each(a,d):a.split(/\s/).forEach(function(a){d(a,e)})}function c(a,e,d,c,i,u){var u=!!u,k=h(a),C=l[k]||(l[k]=
[]);f(e,d,function(e,d){var f=i&&i(d,e),l=f||d,h=function(e){var d=l.apply(a,[e].concat(e.data));!1===d&&e.preventDefault();return d},f=b.extend(g(e),{fn:d,proxy:h,sel:c,del:f,i:C.length});C.push(f);a.addEventListener(f.e,h,u)})}function a(a,e,d,c){var b=h(a);f(e||"",d,function(e,d){k(a,e,d,c).forEach(function(e){delete l[b][e.i];a.removeEventListener(e.e,e.proxy,!1)})})}function d(a){var e=b.extend({originalEvent:a},a);b.each(o,function(d,f){e[d]=function(){this[f]=m;return a[d].apply(a,arguments)};
e[f]=p});return e}function e(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var e=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0;e.call(this)}}}var l={},i=1,u={};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents";b.event={add:c,remove:a};b.proxy=function(a,e){if(b.isFunction(a)){var d=function(){return a.apply(e,arguments)};d._zid=h(a);return d}if("string"==typeof e)return b.proxy(a[e],a);throw new TypeError("expected function");};b.fn.bind=function(a,e){return this.each(function(){c(this,
a,e)})};b.fn.unbind=function(e,d){return this.each(function(){a(this,e,d)})};b.fn.one=function(e,d){return this.each(function(f,b){c(this,e,d,null,function(e,d){return function(){var f=e.apply(b,arguments);a(b,d,e);return f}})})};var m=function(){return!0},p=function(){return!1},o={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};b.fn.delegate=function(a,e,f){var l=!1;if("blur"==e||"focus"==e)b.iswebkit?e="blur"==
e?"focusout":"focus"==e?"focusin":e:l=!0;return this.each(function(i,g){c(g,e,f,a,function(e){return function(f){var c,l=b(f.target).closest(a,g).get(0);if(l)return c=b.extend(d(f),{currentTarget:l,liveFired:g}),e.apply(l,[c].concat([].slice.call(arguments,1)))}},l)})};b.fn.undelegate=function(e,d,f){return this.each(function(){a(this,d,f,e)})};b.fn.live=function(a,e){b(document.body).delegate(this.selector,a,e);return this};b.fn.die=function(a,e){b(document.body).undelegate(this.selector,a,e);return this};
b.fn.on=function(a,e,d){return void 0==e||b.isFunction(e)?this.bind(a,e):this.delegate(e,a,d)};b.fn.off=function(a,e,d){return void 0==e||b.isFunction(e)?this.unbind(a,e):this.undelegate(e,a,d)};b.fn.trigger=function(a,d){"string"==typeof a&&(a=b.Event(a));e(a);a.data=d;return this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(a)})};b.fn.triggerHandler=function(a,e){var f,c;this.each(function(l,i){f=d("string"==typeof a?b.Event(a):a);f.data=e;f.target=i;b.each(k(i,a.type||a),function(a,
e){c=e.proxy(f);if(f.isImmediatePropagationStopped())return!1})});return c};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(a){b.fn[a]=function(e){return this.bind(a,e)}});["focus","blur"].forEach(function(a){b.fn[a]=function(e){if(e)this.bind(a,e);else if(this.length)try{this.get(0)[a]()}catch(d){}return this}});b.Event=function(a,e){var d=document.createEvent(u[a]||"Events"),
f=!0;if(e)for(var c in e)"bubbles"==c?f=!!e[c]:d[c]=e[c];d.initEvent(a,f,!0,null,null,null,null,null,null,null,null,null,null,null,null);return d}})(Zepto);
(function(b){function h(b){var g=this.os={},f=this.browser={},c=b.match(/WebKit\/([\d.]+)/),a=b.match(/(Android)\s+([\d.]+)/),d=b.match(/(iPad).*OS\s([\d_]+)/),e=!d&&b.match(/(iPhone\sOS)\s([\d_]+)/),l=b.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=l&&b.match(/TouchPad/),h=b.match(/Kindle\/([\d.]+)/),m=b.match(/Silk\/([\d._]+)/),p=b.match(/(BlackBerry).*Version\/([\d.]+)/);if(f.webkit=!!c)f.version=c[1];a&&(g.android=!0,g.version=a[2]);e&&(g.ios=g.iphone=!0,g.version=e[2].replace(/_/g,"."));d&&(g.ios=g.ipad=
!0,g.version=d[2].replace(/_/g,"."));l&&(g.webos=!0,g.version=l[2]);i&&(g.touchpad=!0);p&&(g.blackberry=!0,g.version=p[2]);h&&(g.kindle=!0,g.version=h[1]);m&&(f.silk=!0,f.version=m[1]);!m&&(g.android&&b.match(/Kindle Fire/))&&(f.silk=!0)}h.call(b,navigator.userAgent);b.__detect=h})(Zepto);
(function(b,h){var k="",g,f=window.document.createElement("div"),c=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,a={};b.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(a,e){if(f.style[a+"TransitionProperty"]!==h)return k="-"+a.toLowerCase()+"-",g=e,!1});a[k+"transition-property"]=a[k+"transition-duration"]=a[k+"transition-timing-function"]=a[k+"animation-name"]=a[k+"animation-duration"]="";b.fx={off:g===h&&f.style.transitionProperty===h,cssPrefix:k,transitionEnd:g?
g+"TransitionEnd":"transitionend",animationEnd:g?g+"AnimationEnd":"animationend"};b.fn.animate=function(a,e,f,c){b.isObject(e)&&(f=e.easing,c=e.complete,e=e.duration);e&&(e/=1E3);return this.anim(a,e,f,c)};b.fn.anim=function(d,e,f,i){var g,m={},p,o=this,r,t=b.fx.transitionEnd;e===h&&(e=0.4);b.fx.off&&(e=0);if("string"==typeof d)m[k+"animation-name"]=d,m[k+"animation-duration"]=e+"s",t=b.fx.animationEnd;else{for(p in d)c.test(p)?(g||(g=[]),g.push(p+"("+d[p]+")")):m[p]=d[p];g&&(m[k+"transform"]=g.join(" "));
!b.fx.off&&"object"===typeof d&&(m[k+"transition-property"]=Object.keys(d).join(", "),m[k+"transition-duration"]=e+"s",m[k+"transition-timing-function"]=f||"linear")}r=function(e){if("undefined"!==typeof e){if(e.target!==e.currentTarget)return;b(e.target).unbind(t,arguments.callee)}b(this).css(a);i&&i.call(this)};0<e&&this.bind(t,r);setTimeout(function(){o.css(m);0>=e&&setTimeout(function(){o.each(function(){r.call(this)})},0)},0);return this};f=null})(Zepto);
(function(b){function h(a,e,d,f){if(a.global)return a=e||p,d=b.Event(d),b(a).trigger(d,f),!d.defaultPrevented}function k(a){a.global&&0===b.active++&&h(a,null,"ajaxStart")}function g(a,e){var d=e.context;if(!1===e.beforeSend.call(d,a,e)||!1===h(e,d,"ajaxBeforeSend",[a,e]))return!1;h(e,d,"ajaxSend",[a,e])}function f(e,d,f){var c=f.context;f.success.call(c,e,"success",d);h(f,c,"ajaxSuccess",[d,f,e]);a("success",d,f)}function c(e,d,f,c){var b=c.context;c.error.call(b,f,d,e);h(c,b,"ajaxError",[f,c,e]);
a(d,f,c)}function a(a,e,d){var f=d.context;d.complete.call(f,e,a);h(d,f,"ajaxComplete",[e,d]);d.global&&!--b.active&&h(d,null,"ajaxStop")}function d(){}function e(a){return a&&(a==x?"html":a==q?"json":w.test(a)?"script":s.test(a)&&"xml")||"text"}function l(a){m(a.data)&&(a.data=b.param(a.data));if(a.data&&(!a.type||"GET"==a.type.toUpperCase()))a.url=(a.url+"&"+a.data).replace(/[&?]{1,2}/,"?")}function i(a,e,d,f){var c=b.isArray(e);b.each(e,function(e,l){f&&(e=d?f:f+"["+(c?"":e)+"]");!f&&c?a.add(l.name,
l.value):(d?b.isArray(l):m(l))?i(a,l,d,e):a.add(e,l)})}var u=0,m=b.isObject,p=window.document,o,r,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,q="application/json",x="text/html",z=/^\s*$/;b.active=0;b.ajaxJSONP=function(e){var c="jsonp"+ ++u,i=p.createElement("script"),g={abort:function(){b(i).remove();c in window&&(window[c]=d);a("abort",g,e)}},h;e.error&&(i.onerror=function(){g.abort();e.error()});window[c]=function(a){clearTimeout(h);
b(i).remove();delete window[c];f(a,g,e)};l(e);i.src=e.url.replace(/=\?/,"="+c);b("head").append(i);0<e.timeout&&(h=setTimeout(function(){g.abort();a("timeout",g,e)},e.timeout));return g};b.ajaxSettings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:q,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0};b.ajax=function(a){var i=
b.extend({},a||{});for(o in b.ajaxSettings)void 0===i[o]&&(i[o]=b.ajaxSettings[o]);k(i);i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host);var h=i.dataType,a=/=\?/.test(i.url);if("jsonp"==h||a)return a||(i.url=(i.url+"&callback=?").replace(/[&?]{1,2}/,"?")),b.ajaxJSONP(i);i.url||(i.url=window.location.toString());l(i);var a=i.accepts[h],u={},C=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,m=b.ajaxSettings.xhr(),p;i.crossDomain||
(u["X-Requested-With"]="XMLHttpRequest");a&&(u.Accept=a,-1<a.indexOf(",")&&(a=a.split(",",2)[0]),m.overrideMimeType&&m.overrideMimeType(a));if(i.contentType||i.data&&"GET"!=i.type.toUpperCase())u["Content-Type"]=i.contentType||"application/x-www-form-urlencoded";i.headers=b.extend(u,i.headers||{});m.onreadystatechange=function(){if(m.readyState==4){clearTimeout(p);var a,d=false;if(m.status>=200&&m.status<300||m.status==304||m.status==0&&C=="file:"){h=h||e(m.getResponseHeader("content-type"));a=m.responseText;
try{h=="script"?(0,eval)(a):h=="xml"?a=m.responseXML:h=="json"&&(a=z.test(a)?null:JSON.parse(a))}catch(b){d=b}d?c(d,"parsererror",m,i):f(a,m,i)}else c(null,"error",m,i)}};m.open(i.type,i.url,"async"in i?i.async:!0);for(r in i.headers)m.setRequestHeader(r,i.headers[r]);if(!1===g(m,i))return m.abort(),!1;0<i.timeout&&(p=setTimeout(function(){m.onreadystatechange=d;m.abort();c(null,"timeout",m,i)},i.timeout));m.send(i.data?i.data:null);return m};b.get=function(a,e){return b.ajax({url:a,success:e})};
b.post=function(a,e,d,f){b.isFunction(e)&&(f=f||d,d=e,e=null);return b.ajax({type:"POST",url:a,data:e,success:d,dataType:f})};b.getJSON=function(a,e){return b.ajax({url:a,success:e,dataType:"json"})};b.fn.load=function(a,e){if(!this.length)return this;var d=this,f=a.split(/\s/),c;1<f.length&&(a=f[0],c=f[1]);b.get(a,function(a){d.html(c?b(p.createElement("div")).html(a.replace(t,"")).find(c).html():a);e&&e.call(d)});return this};var C=encodeURIComponent;b.param=function(a,e){var d=[];d.add=function(a,
e){this.push(C(a)+"="+C(e))};i(d,a,e);return d.join("&").replace("%20","+")}})(Zepto);
(function(b){b.fn.serializeArray=function(){var h=[],k;b(Array.prototype.slice.call(this.get(0).elements)).each(function(){k=b(this);var g=k.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&(!this.disabled&&"submit"!=g&&"reset"!=g&&"button"!=g&&("radio"!=g&&"checkbox"!=g||this.checked))&&h.push({name:k.attr("name"),value:k.val()})});return h};b.fn.serialize=function(){var b=[];this.serializeArray().forEach(function(k){b.push(encodeURIComponent(k.name)+"="+encodeURIComponent(k.value))});return b.join("&")};
b.fn.submit=function(h){h?this.bind("submit",h):this.length&&(h=b.Event("submit"),this.eq(0).trigger(h),h.defaultPrevented||this.get(0).submit());return this}})(Zepto);
(function(b){function h(a,d,e,f){var c=Math.abs(a-d),b=Math.abs(e-f);return c>=b?0<a-d?"Left":"Right":0<e-f?"Up":"Down"}function k(){c=null;g.last&&(g.el.trigger("longTap"),g={})}var g={},f,c;b(document).ready(function(){var a,d;b(document.body).bind("touchstart",function(e){a=Date.now();d=a-(g.last||a);g.el=b("tagName"in e.touches[0].target?e.touches[0].target:e.touches[0].target.parentNode);f&&clearTimeout(f);g.x1=e.touches[0].pageX;g.y1=e.touches[0].pageY;0<d&&250>=d&&(g.isDoubleTap=!0);g.last=
a;c=setTimeout(k,750)}).bind("touchmove",function(a){c&&clearTimeout(c);c=null;g.x2=a.touches[0].pageX;g.y2=a.touches[0].pageY}).bind("touchend",function(){c&&clearTimeout(c);c=null;g.isDoubleTap?(g.el.trigger("doubleTap"),g={}):g.x2&&30<Math.abs(g.x1-g.x2)||g.y2&&30<Math.abs(g.y1-g.y2)?(g.el.trigger("swipe")&&g.el.trigger("swipe"+h(g.x1,g.x2,g.y1,g.y2)),g={}):"last"in g&&(g.el.trigger("tap"),f=setTimeout(function(){f=null;g.el.trigger("singleTap");g={}},250))}).bind("touchcancel",function(){f&&clearTimeout(f);
c&&clearTimeout(c);c=f=null;g={}})});"swipe swipeLeft swipeRight swipeUp swipeDown doubleTap tap singleTap longTap".split(" ").forEach(function(a){b.fn[a]=function(d){return this.bind(a,d)}})})(Zepto);var dust={};function getGlobal(){return function(){return this.dust}.call(null)}
(function(b){function h(a,e,d){this.stack=a;this.global=e;this.blocks=d}function k(a,e,d,f){this.tail=e;this.isObject=!b.isArray(a)&&a&&"object"===typeof a;this.head=a;this.index=d;this.of=f}function g(a){this.head=new c(this);this.callback=a;this.out=""}function f(){this.head=new c(this)}function c(a,e,d){this.root=a;this.next=e;this.data="";this.flushable=!1;this.taps=d}function a(a,e){this.head=a;this.tail=e}b.cache={};b.register=function(a,e){a&&(b.cache[a]=e)};b.render=function(a,e,d){d=(new g(d)).head;
b.load(a,d,h.wrap(e)).end()};b.stream=function(a,e){var d=new f;b.nextTick(function(){b.load(a,d.head,h.wrap(e)).end()});return d};b.renderSource=function(a,e,d){return b.compileFn(a)(e,d)};b.compileFn=function(a,e){var d=b.loadSource(b.compile(a,e));return function(a,e){var c=e?new g(e):new f;b.nextTick(function(){d(c.head,h.wrap(a)).end()});return c}};b.load=function(a,e,d){var f=b.cache[a];return f?f(e,d):b.onLoad?e.map(function(e){b.onLoad(a,function(f,c){if(f)return e.setError(f);b.cache[a]||
b.loadSource(b.compile(c,a));b.cache[a](e,d).end()})}):e.setError(Error("Template Not Found: "+a))};b.loadSource=function(a){return eval(a)};b.isArray=Array.isArray?Array.isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)};b.nextTick=function(){return"undefined"!==typeof process?process.nextTick:function(a){setTimeout(a,0)}}();b.isEmpty=function(a){return b.isArray(a)&&!a.length?!0:0===a?!1:!a};b.filter=function(a,e,d){if(d)for(var f=0,c=d.length;f<c;f++){var l=d[f];"s"===
l?e=null:"function"===typeof b.filters[l]&&(a=b.filters[l](a))}e&&(a=b.filters[e](a));return a};b.filters={h:function(a){return b.escapeHtml(a)},j:function(a){return b.escapeJs(a)},u:encodeURI,uc:encodeURIComponent,js:function(a){return!JSON?a:JSON.stringify(a)},jp:function(a){return!JSON?a:JSON.parse(a)}};b.makeBase=function(a){return new h(new k,a)};h.wrap=function(a){return a instanceof h?a:new h(new k(a))};h.prototype.get=function(a){for(var e=this.stack,d;e;){if(e.isObject&&(d=e.head[a],void 0!==
d))return d;e=e.tail}return this.global?this.global[a]:void 0};h.prototype.getPath=function(a,e){var d=this.stack,f=e.length;if(a&&0===f)return d.head;for(var d=d.head,c=0;d&&c<f;)d=d[e[c]],c++;return d};h.prototype.push=function(a,e,d){return new h(new k(a,this.stack,e,d),this.global,this.blocks)};h.prototype.rebase=function(a){return new h(new k(a),this.global,this.blocks)};h.prototype.current=function(){return this.stack.head};h.prototype.getBlock=function(a,e,d){"function"===typeof a&&(a=a(e,
d).data,e.data="");if(e=this.blocks)for(var d=e.length,f;d--;)if(f=e[d][a])return f};h.prototype.shiftBlocks=function(a){var e=this.blocks;return a?(a=e?e.concat([a]):[a],new h(this.stack,this.global,a)):this};g.prototype.flush=function(){for(var a=this.head;a;){if(a.flushable)this.out+=a.data;else{a.error&&(this.callback(a.error),this.flush=function(){});return}this.head=a=a.next}this.callback(null,this.out)};f.prototype.flush=function(){for(var a=this.head;a;){if(a.flushable)this.emit("data",a.data);
else{a.error&&(this.emit("error",a.error),this.flush=function(){});return}this.head=a=a.next}this.emit("end")};f.prototype.emit=function(a,e){if(!this.events)return!1;var d=this.events[a];if(!d)return!1;if("function"==typeof d)d(e);else for(var d=d.slice(0),f=0,c=d.length;f<c;f++)d[f](e)};f.prototype.on=function(a,e){this.events||(this.events={});this.events[a]?"function"===typeof this.events[a]?this.events[a]=[this.events[a],e]:this.events[a].push(e):this.events[a]=e;return this};f.prototype.pipe=
function(a){this.on("data",function(e){a.write(e,"utf8")}).on("end",function(){a.end()}).on("error",function(e){a.error(e)});return this};c.prototype.write=function(a){var e=this.taps;e&&(a=e.go(a));this.data+=a;return this};c.prototype.end=function(a){a&&this.write(a);this.flushable=!0;this.root.flush();return this};c.prototype.map=function(a){var e=new c(this.root,this.next,this.taps),d=new c(this.root,e,this.taps);this.next=d;this.flushable=!0;a(d);return e};c.prototype.tap=function(e){var d=this.taps;
this.taps=d?d.push(e):new a(e);return this};c.prototype.untap=function(){this.taps=this.taps.tail;return this};c.prototype.render=function(a,e){return a(this,e)};c.prototype.reference=function(a,e,d,f){return"function"===typeof a&&(a.isFunction=!0,a=a.apply(e.current(),[this,e,null,{auto:d,filters:f}]),a instanceof c)?a:b.isEmpty(a)?this:this.write(b.filter(a,d,f))};c.prototype.section=function(a,e,d,f){if("function"===typeof a&&(a=a.apply(e.current(),[this,e,d,f]),a instanceof c))return a;var l=
d.block,d=d["else"];f&&(e=e.push(f));if(b.isArray(a)){if(l){var f=a.length,i=this;if(0<f){e.stack.head&&(e.stack.head.$len=f);for(d=0;d<f;d++)e.stack.head&&(e.stack.head.$idx=d),i=l(i,e.push(a[d],d,f));e.stack.head&&(e.stack.head.$idx=void 0,e.stack.head.$len=void 0);return i}if(d)return d(this,e)}}else if(!0===a){if(l)return l(this,e)}else if(a||0===a){if(l)return e.stack.head&&"object"===typeof a&&(e.stack.head.$idx=0,e.stack.head.$len=1),i=l(this,e.push(a)),e.stack.head&&"object"===typeof a&&(e.stack.head.$idx=
void 0,e.stack.head.$len=void 0),i}else if(d)return d(this,e);return this};c.prototype.exists=function(a,e,d){var f=d.block,d=d["else"];if(b.isEmpty(a)){if(d)return d(this,e)}else if(f)return f(this,e);return this};c.prototype.notexists=function(a,e,d){var f=d.block,d=d["else"];if(b.isEmpty(a)){if(f)return f(this,e)}else if(d)return d(this,e);return this};c.prototype.block=function(a,e,d){d=d.block;a&&(d=a);return d?d(this,e):this};c.prototype.partial=function(a,e,d){var f;d?(f=b.makeBase(e.global),
f.blocks=e.blocks,e.stack&&e.stack.tail&&(f.stack=e.stack.tail),f=f.push(d),f=f.push(e.stack.head)):f=e;return"function"===typeof a?this.capture(a,f,function(a,e){b.load(a,e,f).end()}):b.load(a,this,f)};c.prototype.helper=function(a,e,d,f){if(b.helpers[a])return b.helpers[a](this,e,d,f)};c.prototype.capture=function(a,e,d){return this.map(function(f){var c=new g(function(a,e){a?f.setError(a):d(e,f)});a(c.head,e).end()})};c.prototype.setError=function(a){this.error=a;this.root.flush();return this};
a.prototype.push=function(e){return new a(e,this)};a.prototype.go=function(a){for(var e=this;e;)a=e.head(a),e=e.tail;return a};var d=RegExp(/[&<>\"\']/),e=/&/g,l=/</g,i=/>/g,u=/\"/g,m=/\'/g;b.escapeHtml=function(a){return"string"===typeof a?!d.test(a)?a:a.replace(e,"&amp;").replace(l,"&lt;").replace(i,"&gt;").replace(u,"&quot;").replace(m,"&#39;"):a};var p=/\\/g,o=/\r/g,r=/\u2028/g,t=/\u2029/g,w=/\n/g,s=/\f/g,q=/'/g,x=/"/g,z=/\t/g;b.escapeJs=function(a){return"string"===typeof a?a.replace(p,"\\\\").replace(x,
'\\"').replace(q,"\\'").replace(o,"\\r").replace(r,"\\u2028").replace(t,"\\u2029").replace(w,"\\n").replace(s,"\\f").replace(z,"\\t"):a}})(dust);"undefined"!==typeof exports&&("undefined"!==typeof process&&require("./server")(dust),module.exports=dust);
(function(b){function h(a,d){for(var f=[d[0]],c=1,g=d.length;c<g;c++){var h=b.filterNode(a,d[c]);h&&f.push(h)}return f}function k(a,d){return d}function g(){}function f(a,d){for(var f="",c=1,g=d.length;c<g;c++)f=f+b.compileNode(a,d[c]);return f}function c(a,d,f){return"."+f+"("+b.compileNode(a,d[1])+","+b.compileNode(a,d[2])+","+b.compileNode(a,d[4])+","+b.compileNode(a,d[3])+")"}b.compile=function(a,d){try{var f,c=b.parse(a);f=b.filterNode({},c);var c={name:d,bodies:[],blocks:{},index:0,auto:"h"},
g="(function(){dust.register("+(d?'"'+d+'"':"null")+","+b.compileNode(c,f)+");",h;f=[];var k=c.blocks,r;for(r in k)f.push("'"+r+"':"+k[r]);if(f.length){c.blocks="ctx=ctx.shiftBlocks(blocks);";h="var blocks={"+f.join(",")+"};"}else h=c.blocks="";var g=g+h,t;h=[];for(var w=c.bodies,s=c.blocks,c=0,q=w.length;c<q;c++)h[c]="function body_"+c+"(chk,ctx){"+s+"return chk"+w[c]+";}";t=h.join("");return g+t+"return body_0;})();"}catch(x){if(!x.line||!x.column)throw x;throw new SyntaxError(x.message+" At line : "+
x.line+", column : "+x.column);}};b.filterNode=function(a,d){return b.optimizers[d[0]](a,d)};b.optimizers={body:function(a,d){for(var f=[d[0]],c,g=1,h=d.length;g<h;g++){var k=b.filterNode(a,d[g]);if(k)if(k[0]==="buffer")if(c)c[1]=c[1]+k[1];else{c=k;f.push(k)}else{c=null;f.push(k)}}return f},buffer:k,special:function(e,d){return["buffer",a[d[1]]]},format:g,reference:h,"#":h,"?":h,"^":h,"<":h,"+":h,"@":h,"%":h,partial:h,context:h,params:h,bodies:h,param:h,filters:k,key:k,path:k,literal:k,comment:g};
b.pragmas={esc:function(a,d,c){var b=a.auto;d||(d="h");a.auto=d==="s"?"":d;d=f(a,c.block);a.auto=b;return d}};var a={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};b.compileNode=function(a,d){return b.nodes[d[0]](a,d)};b.nodes={body:function(a,d){var c=a.index++,b="body_"+c;a.bodies[c]=f(a,d);return b},buffer:function(a,f){return".write("+d(f[1])+")"},format:function(a,f){return".write("+d(f[1]+f[2])+")"},reference:function(a,d){return".reference("+b.compileNode(a,d[1])+",ctx,"+b.compileNode(a,d[2])+")"},"#":function(a,
d){return c(a,d,"section")},"?":function(a,d){return c(a,d,"exists")},"^":function(a,d){return c(a,d,"notexists")},"<":function(a,d){for(var f=d[4],c=1,g=f.length;c<g;c++){var h=f[c];if(h[1][1]==="block"){a.blocks[d[1].text]=b.compileNode(a,h[2]);break}}return""},"+":function(a,f){return typeof f[1].text==="undefined"&&typeof f[4]==="undefined"?".block(ctx.getBlock("+b.compileNode(a,f[1])+",chk, ctx),"+b.compileNode(a,f[2])+", {},"+b.compileNode(a,f[3])+")":".block(ctx.getBlock("+d(f[1].text)+"),"+
b.compileNode(a,f[2])+","+b.compileNode(a,f[4])+","+b.compileNode(a,f[3])+")"},"@":function(a,f){return".helper("+d(f[1].text)+","+b.compileNode(a,f[2])+","+b.compileNode(a,f[4])+","+b.compileNode(a,f[3])+")"},"%":function(a,d){var f=d[1][1];if(!b.pragmas[f])return"";for(var c=d[4],g={},h=1,k=c.length;h<k;h++){var r=c[h];g[r[1][1]]=r[2]}c=d[3];r={};h=1;for(k=c.length;h<k;h++){var t=c[h];r[t[1][1]]=t[2][1]}return b.pragmas[f](a,d[2][1]?d[2][1].text:null,g,r)},partial:function(a,d){return".partial("+
b.compileNode(a,d[1])+","+b.compileNode(a,d[2])+","+b.compileNode(a,d[3])+")"},context:function(a,d){return d[1]?"ctx.rebase("+b.compileNode(a,d[1])+")":"ctx"},params:function(a,d){for(var f=[],c=1,g=d.length;c<g;c++)f.push(b.compileNode(a,d[c]));return f.length?"{"+f.join(",")+"}":"null"},bodies:function(a,d){for(var f=[],c=1,g=d.length;c<g;c++)f.push(b.compileNode(a,d[c]));return"{"+f.join(",")+"}"},param:function(a,d){return b.compileNode(a,d[1])+":"+b.compileNode(a,d[2])},filters:function(a,d){for(var f=
[],c=1,b=d.length;c<b;c++)f.push('"'+d[c]+'"');return'"'+a.auto+'"'+(f.length?",["+f.join(",")+"]":"")},key:function(a,d){return'ctx.get("'+d[1]+'")'},path:function(a,d){for(var f=d[1],c=d[2],b=[],g=0,h=c.length;g<h;g++)b.push('"'+c[g]+'"');return"ctx.getPath("+f+",["+b.join(",")+"])"},literal:function(a,f){return d(f[1])}};var d=typeof JSON==="undefined"?function(a){return'"'+b.escapeJs(a)+'"'}:JSON.stringify})("undefined"!==typeof exports?exports:getGlobal());
(function(b){var h=function(){function b(f){return'"'+f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var g={parse:function(f,c){function a(a){var d={},e;for(e in a)d[e]=a[e];return d}function d(a,d){for(var e=a.offset+d,c=a.offset;c<e;c++){var b=f.charAt(c);if(b==="\n"){a.seenCR||a.line++;a.column=1;a.seenCR=false}else if(b==="\r"||b===
"\u2028"||b==="\u2029"){a.line++;a.column=1;a.seenCR=true}else{a.column++;a.seenCR=false}}a.offset=a.offset+d}function e(d){if(!(j.offset<R.offset)){if(j.offset>R.offset){R=a(j);S=[]}S.push(d)}}function g(){var d,e,f;f=a(j);d=[];for(e=i();e!==null;){d.push(e);e=i()}d!==null&&(d=["body"].concat(d));d===null&&(j=a(f));return d}function i(){var a;a=F();if(a===null){a=u();if(a===null){a=s();if(a===null){a=x();if(a===null){a=w();a===null&&(a=H())}}}}return a}function u(){var c,b,i,h,k,u,x,q,s;n++;q=a(j);
s=a(j);c=m();if(c!==null){b=[];for(i=y();i!==null;){b.push(i);i=y()}if(b!==null){i=G();if(i!==null){h=g();if(h!==null){k=t();if(k!==null){u=p();if(u!==null){x=c[1].text===u.text?"":null;if(x!==null)c=[c,b,i,h,k,u,x];else{c=null;j=a(s)}}else{c=null;j=a(s)}}else{c=null;j=a(s)}}else{c=null;j=a(s)}}else{c=null;j=a(s)}}else{c=null;j=a(s)}}else{c=null;j=a(s)}c!==null&&(c=function(a,d,e,f,c,b){b.push(["param",["literal","block"],c]);f.push(b);return f}(q.offset,q.line,q.column,c[0],c[3],c[4],c[5]));c===
null&&(j=a(q));if(c===null){q=a(j);s=a(j);c=m();if(c!==null){b=[];for(i=y();i!==null;){b.push(i);i=y()}if(b!==null){if(f.charCodeAt(j.offset)===47){i="/";d(j,1)}else{i=null;n===0&&e('"/"')}if(i!==null){h=G();if(h!==null)c=[c,b,i,h];else{c=null;j=a(s)}}else{c=null;j=a(s)}}else{c=null;j=a(s)}}else{c=null;j=a(s)}c!==null&&(c=function(a,d,e,f){f.push(["bodies"]);return f}(q.offset,q.line,q.column,c[0]));c===null&&(j=a(q))}n--;n===0&&c===null&&e("section");return c}function m(){var c,b,i,g,h,l,k,m;k=a(j);
m=a(j);c=I();if(c!==null){if(/^[#?^<+@%]/.test(f.charAt(j.offset))){b=f.charAt(j.offset);d(j,1)}else{b=null;n===0&&e("[#?^<+@%]")}if(b!==null){i=[];for(g=y();g!==null;){i.push(g);g=y()}if(i!==null){g=z();if(g!==null){h=o();if(h!==null){l=r();if(l!==null)c=[c,b,i,g,h,l];else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}c!==null&&(c=[c[1],c[3],c[4],c[5]]);c===null&&(j=a(k));return c}function p(){var c,b,g,i,h,l,k,m;n++;k=a(j);m=a(j);
c=I();if(c!==null){if(f.charCodeAt(j.offset)===47){b="/";d(j,1)}else{b=null;n===0&&e('"/"')}if(b!==null){g=[];for(i=y();i!==null;){g.push(i);i=y()}if(g!==null){i=z();if(i!==null){h=[];for(l=y();l!==null;){h.push(l);l=y()}if(h!==null){l=G();if(l!==null)c=[c,b,g,i,h,l];else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}c!==null&&(c=c[3]);c===null&&(j=a(k));n--;n===0&&c===null&&e("end tag");return c}function o(){var c,b,i,g,l;i=a(j);
g=a(j);l=a(j);if(f.charCodeAt(j.offset)===58){c=":";d(j,1)}else{c=null;n===0&&e('":"')}if(c!==null){b=z();if(b!==null)c=[c,b];else{c=null;j=a(l)}}else{c=null;j=a(l)}c!==null&&(c=c[1]);c===null&&(j=a(g));c=c!==null?c:"";c!==null&&(c=c?["context",c]:["context"]);c===null&&(j=a(i));return c}function r(){var c,b,i,g,l,h,k,m;n++;h=a(j);c=[];k=a(j);m=a(j);i=y();if(i!==null)for(b=[];i!==null;){b.push(i);i=y()}else b=null;if(b!==null){i=B();if(i!==null){if(f.charCodeAt(j.offset)===61){g="=";d(j,1)}else{g=
null;n===0&&e('"="')}if(g!==null){l=C();if(l===null){l=z();l===null&&(l=A())}if(l!==null)b=[b,i,g,l];else{b=null;j=a(m)}}else{b=null;j=a(m)}}else{b=null;j=a(m)}}else{b=null;j=a(m)}b!==null&&(b=["param",["literal",b[1]],b[3]]);for(b===null&&(j=a(k));b!==null;){c.push(b);k=a(j);m=a(j);i=y();if(i!==null)for(b=[];i!==null;){b.push(i);i=y()}else b=null;if(b!==null){i=B();if(i!==null){if(f.charCodeAt(j.offset)===61){g="=";d(j,1)}else{g=null;n===0&&e('"="')}if(g!==null){l=C();if(l===null){l=z();l===null&&
(l=A())}if(l!==null)b=[b,i,g,l];else{b=null;j=a(m)}}else{b=null;j=a(m)}}else{b=null;j=a(m)}}else{b=null;j=a(m)}b!==null&&(b=["param",["literal",b[1]],b[3]]);b===null&&(j=a(k))}c!==null&&(c=["params"].concat(c));c===null&&(j=a(h));n--;n===0&&c===null&&e("params");return c}function t(){var c,b,i,h,k,m,u,s,q;n++;u=a(j);c=[];s=a(j);q=a(j);b=I();if(b!==null){if(f.charCodeAt(j.offset)===58){i=":";d(j,1)}else{i=null;n===0&&e('":"')}if(i!==null){h=B();if(h!==null){k=G();if(k!==null){m=g();if(m!==null)b=[b,
i,h,k,m];else{b=null;j=a(q)}}else{b=null;j=a(q)}}else{b=null;j=a(q)}}else{b=null;j=a(q)}}else{b=null;j=a(q)}b!==null&&(b=["param",["literal",b[2]],b[4]]);for(b===null&&(j=a(s));b!==null;){c.push(b);s=a(j);q=a(j);b=I();if(b!==null){if(f.charCodeAt(j.offset)===58){i=":";d(j,1)}else{i=null;n===0&&e('":"')}if(i!==null){h=B();if(h!==null){k=G();if(k!==null){m=g();if(m!==null)b=[b,i,h,k,m];else{b=null;j=a(q)}}else{b=null;j=a(q)}}else{b=null;j=a(q)}}else{b=null;j=a(q)}}else{b=null;j=a(q)}b!==null&&(b=["param",
["literal",b[2]],b[4]]);b===null&&(j=a(s))}c!==null&&(c=["bodies"].concat(c));c===null&&(j=a(u));n--;n===0&&c===null&&e("bodies");return c}function w(){var d,f,c,b,i,g;n++;i=a(j);g=a(j);d=I();if(d!==null){f=z();if(f!==null){c=q();if(c!==null){b=G();if(b!==null)d=[d,f,c,b];else{d=null;j=a(g)}}else{d=null;j=a(g)}}else{d=null;j=a(g)}}else{d=null;j=a(g)}d!==null&&(d=["reference",d[1],d[2]]);d===null&&(j=a(i));n--;n===0&&d===null&&e("reference");return d}function s(){var c,b,i,g,l,h,k,m,u,q;n++;u=a(j);
q=a(j);c=I();if(c!==null){if(f.charCodeAt(j.offset)===62){b=">";d(j,1)}else{b=null;n===0&&e('">"')}if(b===null)if(f.charCodeAt(j.offset)===43){b="+";d(j,1)}else{b=null;n===0&&e('"+"')}if(b!==null){g=a(j);i=B();i!==null&&(i=["literal",i]);i===null&&(j=a(g));i===null&&(i=A());if(i!==null){g=o();if(g!==null){l=r();if(l!==null){h=[];for(k=y();k!==null;){h.push(k);k=y()}if(h!==null){if(f.charCodeAt(j.offset)===47){k="/";d(j,1)}else{k=null;n===0&&e('"/"')}if(k!==null){m=G();if(m!==null)c=[c,b,i,g,l,h,k,
m];else{c=null;j=a(q)}}else{c=null;j=a(q)}}else{c=null;j=a(q)}}else{c=null;j=a(q)}}else{c=null;j=a(q)}}else{c=null;j=a(q)}}else{c=null;j=a(q)}}else{c=null;j=a(q)}c!==null&&(c=[c[1]===">"?"partial":c[1],c[2],c[3],c[4]]);c===null&&(j=a(u));n--;n===0&&c===null&&e("partial");return c}function q(){var c,b,i,g,l,h;n++;g=a(j);c=[];l=a(j);h=a(j);if(f.charCodeAt(j.offset)===124){b="|";d(j,1)}else{b=null;n===0&&e('"|"')}if(b!==null){i=B();if(i!==null)b=[b,i];else{b=null;j=a(h)}}else{b=null;j=a(h)}b!==null&&
(b=b[1]);for(b===null&&(j=a(l));b!==null;){c.push(b);l=a(j);h=a(j);if(f.charCodeAt(j.offset)===124){b="|";d(j,1)}else{b=null;n===0&&e('"|"')}if(b!==null){i=B();if(i!==null)b=[b,i];else{b=null;j=a(h)}}else{b=null;j=a(h)}b!==null&&(b=b[1]);b===null&&(j=a(l))}c!==null&&(c=["filters"].concat(c));c===null&&(j=a(g));n--;n===0&&c===null&&e("filters");return c}function x(){var c,b,i,g,l,h;n++;l=a(j);h=a(j);c=I();if(c!==null){if(f.charCodeAt(j.offset)===126){b="~";d(j,1)}else{b=null;n===0&&e('"~"')}if(b!==
null){i=B();if(i!==null){g=G();if(g!==null)c=[c,b,i,g];else{c=null;j=a(h)}}else{c=null;j=a(h)}}else{c=null;j=a(h)}}else{c=null;j=a(h)}c!==null&&(c=["special",c[2]]);c===null&&(j=a(l));n--;n===0&&c===null&&e("special");return c}function z(){var d,f;n++;f=a(j);d=Q();d!==null&&(d=function(a,d,e,f){a=["path"].concat(f);a.text=f[1].join(".");return a}(f.offset,f.line,f.column,d));d===null&&(j=a(f));if(d===null){f=a(j);d=B();d!==null&&(d=function(a,d,e,f){a=["key",f];a.text=f;return a}(f.offset,f.line,
f.column,d));d===null&&(j=a(f))}n--;n===0&&d===null&&e("identifier");return d}function C(){var d,f;n++;f=a(j);d=L();d===null&&(d=J());d!==null&&(d=["literal",d]);d===null&&(j=a(f));n--;n===0&&d===null&&e("number");return d}function L(){var c,b,i,g,l,h;n++;l=a(j);h=a(j);c=J();if(c!==null){if(f.charCodeAt(j.offset)===46){b=".";d(j,1)}else{b=null;n===0&&e('"."')}if(b!==null){g=J();if(g!==null)for(i=[];g!==null;){i.push(g);g=J()}else i=null;if(i!==null)c=[c,b,i];else{c=null;j=a(h)}}else{c=null;j=a(h)}}else{c=
null;j=a(h)}c!==null&&(c=parseFloat(c[0]+"."+c[2].join("")));c===null&&(j=a(l));n--;n===0&&c===null&&e("frac");return c}function J(){var c,b,i;n++;i=a(j);if(/^[0-9]/.test(f.charAt(j.offset))){b=f.charAt(j.offset);d(j,1)}else{b=null;n===0&&e("[0-9]")}if(b!==null)for(c=[];b!==null;){c.push(b);if(/^[0-9]/.test(f.charAt(j.offset))){b=f.charAt(j.offset);d(j,1)}else{b=null;n===0&&e("[0-9]")}}else c=null;c!==null&&(c=parseInt(c.join(""),10));c===null&&(j=a(i));n--;n===0&&c===null&&e("integer");return c}
function Q(){var c,b,i,g,l;n++;g=a(j);l=a(j);c=B();c=c!==null?c:"";if(c!==null){i=E();i===null&&(i=D());if(i!==null)for(b=[];i!==null;){b.push(i);i=E();i===null&&(i=D())}else b=null;if(b!==null)c=[c,b];else{c=null;j=a(l)}}else{c=null;j=a(l)}if(c!==null){b=c[0];c=c[1];c=c[0];if(b&&c){c.unshift(b);c=[false,c]}else c=[true,c]}c===null&&(j=a(g));if(c===null){g=a(j);l=a(j);if(f.charCodeAt(j.offset)===46){c=".";d(j,1)}else{c=null;n===0&&e('"."')}if(c!==null){b=[];i=E();for(i===null&&(i=D());i!==null;){b.push(i);
i=E();i===null&&(i=D())}if(b!==null)c=[c,b];else{c=null;j=a(l)}}else{c=null;j=a(l)}c!==null&&(c=c[1].length>0?[true,c[1][0]]:[true,[]]);c===null&&(j=a(g))}n--;n===0&&c===null&&e("path");return c}function B(){var c,b,i,g,l;n++;g=a(j);l=a(j);if(/^[a-zA-Z_$]/.test(f.charAt(j.offset))){c=f.charAt(j.offset);d(j,1)}else{c=null;n===0&&e("[a-zA-Z_$]")}if(c!==null){b=[];if(/^[0-9a-zA-Z_$\-]/.test(f.charAt(j.offset))){i=f.charAt(j.offset);d(j,1)}else{i=null;n===0&&e("[0-9a-zA-Z_$\\-]")}for(;i!==null;){b.push(i);
if(/^[0-9a-zA-Z_$\-]/.test(f.charAt(j.offset))){i=f.charAt(j.offset);d(j,1)}else{i=null;n===0&&e("[0-9a-zA-Z_$\\-]")}}if(b!==null)c=[c,b];else{c=null;j=a(l)}}else{c=null;j=a(l)}c!==null&&(c=c[0]+c[1].join(""));c===null&&(j=a(g));n--;n===0&&c===null&&e("key");return c}function D(){var c,b,i,g,l,h,k;n++;g=a(j);l=a(j);h=a(j);k=a(j);if(f.charCodeAt(j.offset)===91){c="[";d(j,1)}else{c=null;n===0&&e('"["')}if(c!==null){if(/^[0-9]/.test(f.charAt(j.offset))){i=f.charAt(j.offset);d(j,1)}else{i=null;n===0&&
e("[0-9]")}if(i!==null)for(b=[];i!==null;){b.push(i);if(/^[0-9]/.test(f.charAt(j.offset))){i=f.charAt(j.offset);d(j,1)}else{i=null;n===0&&e("[0-9]")}}else b=null;if(b!==null){if(f.charCodeAt(j.offset)===93){i="]";d(j,1)}else{i=null;n===0&&e('"]"')}if(i!==null)c=[c,b,i];else{c=null;j=a(k)}}else{c=null;j=a(k)}}else{c=null;j=a(k)}c!==null&&(c=c[1].join(""));c===null&&(j=a(h));if(c!==null){b=E();b=b!==null?b:"";if(b!==null)c=[c,b];else{c=null;j=a(l)}}else{c=null;j=a(l)}if(c!==null){b=c[0];(c=c[1])?c.unshift(b):
c=[b]}c===null&&(j=a(g));n--;n===0&&c===null&&e("array");return c}function E(){var c,b,i,g,l,h,k;n++;g=a(j);l=a(j);h=a(j);k=a(j);if(f.charCodeAt(j.offset)===46){b=".";d(j,1)}else{b=null;n===0&&e('"."')}if(b!==null){i=B();if(i!==null)b=[b,i];else{b=null;j=a(k)}}else{b=null;j=a(k)}b!==null&&(b=b[1]);b===null&&(j=a(h));if(b!==null)for(c=[];b!==null;){c.push(b);h=a(j);k=a(j);if(f.charCodeAt(j.offset)===46){b=".";d(j,1)}else{b=null;n===0&&e('"."')}if(b!==null){i=B();if(i!==null)b=[b,i];else{b=null;j=a(k)}}else{b=
null;j=a(k)}b!==null&&(b=b[1]);b===null&&(j=a(h))}else c=null;if(c!==null){b=D();b=b!==null?b:"";if(b!==null)c=[c,b];else{c=null;j=a(l)}}else{c=null;j=a(l)}if(c!==null){b=c[0];c=(c=c[1])?b.concat(c):b}c===null&&(j=a(g));n--;n===0&&c===null&&e("array_part");return c}function A(){var c,b,i,g,l;n++;g=a(j);l=a(j);if(f.charCodeAt(j.offset)===34){c='"';d(j,1)}else{c=null;n===0&&e('"\\""')}if(c!==null){if(f.charCodeAt(j.offset)===34){b='"';d(j,1)}else{b=null;n===0&&e('"\\""')}if(b!==null)c=[c,b];else{c=
null;j=a(l)}}else{c=null;j=a(l)}c!==null&&(c=["literal",""]);c===null&&(j=a(g));if(c===null){g=a(j);l=a(j);if(f.charCodeAt(j.offset)===34){c='"';d(j,1)}else{c=null;n===0&&e('"\\""')}if(c!==null){b=K();if(b!==null){if(f.charCodeAt(j.offset)===34){i='"';d(j,1)}else{i=null;n===0&&e('"\\""')}if(i!==null)c=[c,b,i];else{c=null;j=a(l)}}else{c=null;j=a(l)}}else{c=null;j=a(l)}c!==null&&(c=["literal",c[1]]);c===null&&(j=a(g));if(c===null){g=a(j);l=a(j);if(f.charCodeAt(j.offset)===34){c='"';d(j,1)}else{c=null;
n===0&&e('"\\""')}if(c!==null){i=N();if(i!==null)for(b=[];i!==null;){b.push(i);i=N()}else b=null;if(b!==null){if(f.charCodeAt(j.offset)===34){i='"';d(j,1)}else{i=null;n===0&&e('"\\""')}if(i!==null)c=[c,b,i];else{c=null;j=a(l)}}else{c=null;j=a(l)}}else{c=null;j=a(l)}c!==null&&(c=["body"].concat(c[1]));c===null&&(j=a(g))}}n--;n===0&&c===null&&e("inline");return c}function N(){var d,e;d=x();if(d===null){d=w();if(d===null){e=a(j);d=K();d!==null&&(d=["buffer",d]);d===null&&(j=a(e))}}return d}function H(){var c,
b,i,g,l,h,k,m;n++;h=a(j);k=a(j);c=P();if(c!==null){b=[];for(i=y();i!==null;){b.push(i);i=y()}if(b!==null)c=[c,b];else{c=null;j=a(k)}}else{c=null;j=a(k)}c!==null&&(c=["format",c[0],c[1].join("")]);c===null&&(j=a(h));if(c===null){h=a(j);k=a(j);m=a(j);l=a(j);n++;b=M();n--;if(b===null)b="";else{b=null;j=a(l)}if(b!==null){l=a(j);n++;i=P();n--;if(i===null)i="";else{i=null;j=a(l)}if(i!==null){l=a(j);n++;g=F();n--;if(g===null)g="";else{g=null;j=a(l)}if(g!==null){if(f.length>j.offset){l=f.charAt(j.offset);
d(j,1)}else{l=null;n===0&&e("any character")}if(l!==null)b=[b,i,g,l];else{b=null;j=a(m)}}else{b=null;j=a(m)}}else{b=null;j=a(m)}}else{b=null;j=a(m)}b!==null&&(b=b[3]);b===null&&(j=a(k));if(b!==null)for(c=[];b!==null;){c.push(b);k=a(j);m=a(j);l=a(j);n++;b=M();n--;if(b===null)b="";else{b=null;j=a(l)}if(b!==null){l=a(j);n++;i=P();n--;if(i===null)i="";else{i=null;j=a(l)}if(i!==null){l=a(j);n++;g=F();n--;if(g===null)g="";else{g=null;j=a(l)}if(g!==null){if(f.length>j.offset){l=f.charAt(j.offset);d(j,1)}else{l=
null;n===0&&e("any character")}if(l!==null)b=[b,i,g,l];else{b=null;j=a(m)}}else{b=null;j=a(m)}}else{b=null;j=a(m)}}else{b=null;j=a(m)}b!==null&&(b=b[3]);b===null&&(j=a(k))}else c=null;c!==null&&(c=["buffer",c.join("")]);c===null&&(j=a(h))}n--;n===0&&c===null&&e("buffer");return c}function K(){var c,b,i,g,l,h;n++;g=a(j);l=a(j);h=a(j);i=a(j);n++;b=M();n--;if(b===null)b="";else{b=null;j=a(i)}if(b!==null){i=v();if(i===null)if(/^[^"]/.test(f.charAt(j.offset))){i=f.charAt(j.offset);d(j,1)}else{i=null;n===
0&&e('[^"]')}if(i!==null)b=[b,i];else{b=null;j=a(h)}}else{b=null;j=a(h)}b!==null&&(b=b[1]);b===null&&(j=a(l));if(b!==null)for(c=[];b!==null;){c.push(b);l=a(j);h=a(j);i=a(j);n++;b=M();n--;if(b===null)b="";else{b=null;j=a(i)}if(b!==null){i=v();if(i===null)if(/^[^"]/.test(f.charAt(j.offset))){i=f.charAt(j.offset);d(j,1)}else{i=null;n===0&&e('[^"]')}if(i!==null)b=[b,i];else{b=null;j=a(h)}}else{b=null;j=a(h)}b!==null&&(b=b[1]);b===null&&(j=a(l))}else c=null;c!==null&&(c=c.join(""));c===null&&(j=a(g));
n--;n===0&&c===null&&e("literal");return c}function v(){var c,b;b=a(j);if(f.substr(j.offset,2)==='\\"'){c='\\"';d(j,2)}else{c=null;n===0&&e('"\\\\\\""')}c!==null&&(c='"');c===null&&(j=a(b));return c}function F(){var c,b,i,g,l,h,k,m;n++;l=a(j);h=a(j);if(f.substr(j.offset,2)==="{!"){c="{!";d(j,2)}else{c=null;n===0&&e('"{!"')}if(c!==null){b=[];k=a(j);m=a(j);g=a(j);n++;if(f.substr(j.offset,2)==="!}"){i="!}";d(j,2)}else{i=null;n===0&&e('"!}"')}n--;if(i===null)i="";else{i=null;j=a(g)}if(i!==null){if(f.length>
j.offset){g=f.charAt(j.offset);d(j,1)}else{g=null;n===0&&e("any character")}if(g!==null)i=[i,g];else{i=null;j=a(m)}}else{i=null;j=a(m)}i!==null&&(i=i[1]);for(i===null&&(j=a(k));i!==null;){b.push(i);k=a(j);m=a(j);g=a(j);n++;if(f.substr(j.offset,2)==="!}"){i="!}";d(j,2)}else{i=null;n===0&&e('"!}"')}n--;if(i===null)i="";else{i=null;j=a(g)}if(i!==null){if(f.length>j.offset){g=f.charAt(j.offset);d(j,1)}else{g=null;n===0&&e("any character")}if(g!==null)i=[i,g];else{i=null;j=a(m)}}else{i=null;j=a(m)}i!==
null&&(i=i[1]);i===null&&(j=a(k))}if(b!==null){if(f.substr(j.offset,2)==="!}"){i="!}";d(j,2)}else{i=null;n===0&&e('"!}"')}if(i!==null)c=[c,b,i];else{c=null;j=a(h)}}else{c=null;j=a(h)}}else{c=null;j=a(h)}c!==null&&(c=["comment",c[1].join("")]);c===null&&(j=a(l));n--;n===0&&c===null&&e("comment");return c}function M(){var c,b,i,g,l,h,k,m,u;m=a(j);c=I();if(c!==null){if(/^[#?^><+%:@\/~%]/.test(f.charAt(j.offset))){b=f.charAt(j.offset);d(j,1)}else{b=null;n===0&&e("[#?^><+%:@\\/~%]")}if(b!==null){i=[];
for(g=y();g!==null;){i.push(g);g=y()}if(i!==null){u=a(j);k=a(j);n++;l=G();n--;if(l===null)l="";else{l=null;j=a(k)}if(l!==null){k=a(j);n++;h=P();n--;if(h===null)h="";else{h=null;j=a(k)}if(h!==null){if(f.length>j.offset){k=f.charAt(j.offset);d(j,1)}else{k=null;n===0&&e("any character")}if(k!==null)l=[l,h,k];else{l=null;j=a(u)}}else{l=null;j=a(u)}}else{l=null;j=a(u)}if(l!==null)for(g=[];l!==null;){g.push(l);u=a(j);k=a(j);n++;l=G();n--;if(l===null)l="";else{l=null;j=a(k)}if(l!==null){k=a(j);n++;h=P();
n--;if(h===null)h="";else{h=null;j=a(k)}if(h!==null){if(f.length>j.offset){k=f.charAt(j.offset);d(j,1)}else{k=null;n===0&&e("any character")}if(k!==null)l=[l,h,k];else{l=null;j=a(u)}}else{l=null;j=a(u)}}else{l=null;j=a(u)}}else g=null;if(g!==null){l=[];for(h=y();h!==null;){l.push(h);h=y()}if(l!==null){h=G();if(h!==null)c=[c,b,i,g,l,h];else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}}else{c=null;j=a(m)}c===null&&(c=w());return c}function I(){var a;
if(f.charCodeAt(j.offset)===123){a="{";d(j,1)}else{a=null;n===0&&e('"{"')}return a}function G(){var a;if(f.charCodeAt(j.offset)===125){a="}";d(j,1)}else{a=null;n===0&&e('"}"')}return a}function P(){var a;if(f.charCodeAt(j.offset)===10){a="\n";d(j,1)}else{a=null;n===0&&e('"\\n"')}if(a===null){if(f.substr(j.offset,2)==="\r\n"){a="\r\n";d(j,2)}else{a=null;n===0&&e('"\\r\\n"')}if(a===null){if(f.charCodeAt(j.offset)===13){a="\r";d(j,1)}else{a=null;n===0&&e('"\\r"')}if(a===null){if(f.charCodeAt(j.offset)===
8232){a="\u2028";d(j,1)}else{a=null;n===0&&e('"\\u2028"')}if(a===null)if(f.charCodeAt(j.offset)===8233){a="\u2029";d(j,1)}else{a=null;n===0&&e('"\\u2029"')}}}}return a}function y(){var a;if(/^[\t\x0B\f \xA0\uFEFF]/.test(f.charAt(j.offset))){a=f.charAt(j.offset);d(j,1)}else{a=null;n===0&&e("[\\t\\x0B\\f \\xA0\\uFEFF]")}a===null&&(a=P());return a}function U(a){a.sort();for(var d=null,c=[],e=0;e<a.length;e++)if(a[e]!==d){c.push(a[e]);d=a[e]}return c}var O={body:g,part:i,section:u,sec_tag_start:m,end_tag:p,
context:o,params:r,bodies:t,reference:w,partial:s,filters:q,special:x,identifier:z,number:C,frac:L,integer:J,path:Q,key:B,array:D,array_part:E,inline:A,inline_part:N,buffer:H,literal:K,esc:v,comment:F,tag:M,ld:I,rd:G,eol:P,ws:y};if(c!==void 0){if(O[c]===void 0)throw Error("Invalid rule name: "+b(c)+".");}else c="body";var j={offset:0,line:1,column:1,seenCR:false},n=0,R={offset:0,line:1,column:1,seenCR:false},S=[],O=O[c]();if(O===null||j.offset!==f.length){var O=Math.max(j.offset,R.offset),V=O<f.length?
f.charAt(O):null,T=j.offset>R.offset?j:R;throw new h.SyntaxError(U(S),V,O,T.line,T.column);}return O},toSource:function(){return this._source},SyntaxError:function(f,c,a,d,e){this.name="SyntaxError";this.expected=f;this.found=c;switch(f.length){case 0:f="end of input";break;case 1:f=f[0];break;default:f=f.slice(0,f.length-1).join(", ")+" or "+f[f.length-1]}c=c?b(c):"end of input";this.message="Expected "+f+" but "+c+" found.";this.offset=a;this.line=d;this.column=e}};g.SyntaxError.prototype=Error.prototype;
return g}();b.parse=h.parse})("undefined"!==typeof exports?exports:getGlobal());
(function(){function b(c){c=c.current();return typeof c==="object"&&c.isSelect===true}function h(c,a){return typeof a==="function"?a.toString():a}function k(c,a,d,e,l){var e=e||{},i=d.block,h,k,p=e.filterOpType||"";if(typeof e.key!=="undefined")h=dust.helpers.tap(e.key,c,a);else if(b(a)){h=a.current().selectKey;a.current().isResolved&&(l=function(){return false})}else{f.log("No key specified for filter in:"+p+" helper ");return c}k=dust.helpers.tap(e.value,c,a);if(l(g(k,e.type,a),g(h,e.type,a))){if(b(a))a.current().isResolved=
true;if(i)return c.render(i,a);f.log("Missing body block in the "+p+" helper ")}else if(d["else"])return c.render(d["else"],a);return c}function g(c,a,d){if(c)switch(a||typeof c){case "number":return+c;case "string":return""+c;case "boolean":return Boolean(c==="false"?false:c);case "date":return new Date(c);case "context":return d.get(c)}return c}typeof exports!=="undefined"&&(dust=require("dustjs-linkedin"));var f=typeof console!=="undefined"?console:{log:function(){}};dust.helpers={tap:function(c,
a,d){var e=c;if(typeof c==="function")if(c.isFunction===true)e=c();else{e="";a.tap(function(a){e=e+a;return""}).render(c,d).untap();e===""&&(e=false)}return e},sep:function(c,a,d){return a.stack.index===a.stack.of-1?c:d.block?d.block(c,a):c},idx:function(c,a,d){return d.block?d.block(c,a.push(a.stack.index)):c},contextDump:function(c,a,d,e){e=e||{};d=e.to||"output";e=e.key||"current";d=dust.helpers.tap(d,c,a);e=dust.helpers.tap(e,c,a);a=e==="full"?JSON.stringify(a.stack,h,2):JSON.stringify(a.stack.head,
h,2);if(d==="console"){f.log(a);return c}return c.write(a)},"if":function(c,a,d,e){var b=d.block,i=d["else"];if(e&&e.cond){e=e.cond;e=dust.helpers.tap(e,c,a);if(eval(e)){if(b)return c.render(d.block,a);f.log("Missing body block in the if helper!");return c}if(i)return c.render(d["else"],a)}else f.log("No condition given in the if helper!");return c},math:function(c,a,d,e){if(e&&typeof e.key!=="undefined"&&e.method){var b=e.key,i=e.method,e=e.operand,g=null,b=dust.helpers.tap(b,c,a),e=dust.helpers.tap(e,
c,a);switch(i){case "mod":(e===0||e===-0.0)&&f.log("operand for divide operation is 0/-0: expect Nan!");g=parseFloat(b)%parseFloat(e);break;case "add":g=parseFloat(b)+parseFloat(e);break;case "subtract":g=parseFloat(b)-parseFloat(e);break;case "multiply":g=parseFloat(b)*parseFloat(e);break;case "divide":(e===0||e===-0.0)&&f.log("operand for divide operation is 0/-0: expect Nan/Infinity!");g=parseFloat(b)/parseFloat(e);break;case "ceil":g=Math.ceil(parseFloat(b));break;case "floor":g=Math.floor(parseFloat(b));
break;case "abs":g=Math.abs(parseFloat(b));break;default:f.log("method passed is not supported")}if(g!==null)return d&&d.block?c.render(d.block,a.push({isSelect:true,isResolved:false,selectKey:g})):c.write(g)}else f.log("Key is a required parameter for math helper along with method/operand!");return c},select:function(c,a,d,e){var b=d.block;if(e&&typeof e.key!=="undefined"){e=dust.helpers.tap(e.key,c,a);if(b)return c.render(d.block,a.push({isSelect:true,isResolved:false,selectKey:e}));f.log("Missing body block in the select helper ")}else f.log("No key given in the select helper!");
return c},eq:function(c,a,d,e){if(e)e.filterOpType="eq";return k(c,a,d,e,function(a,d){return d===a})},ne:function(c,a,d,e){if(e){e.filterOpType="ne";return k(c,a,d,e,function(a,d){return d!==a})}return c},lt:function(c,a,d,e){if(e){e.filterOpType="lt";return k(c,a,d,e,function(a,d){return d<a})}},lte:function(c,a,d,e){if(e){e.filterOpType="lte";return k(c,a,d,e,function(a,d){return d<=a})}return c},gt:function(c,a,d,e){if(e){e.filterOpType="gt";return k(c,a,d,e,function(a,d){return d>a})}return c},
gte:function(c,a,d,e){if(e){e.filterOpType="gte";return k(c,a,d,e,function(a,d){return d>=a})}return c},"default":function(c,a,d,e){if(e)e.filterOpType="default";return k(c,a,d,e,function(){return true})},size:function(c,a,d,e){var a=0,f,e=e||{},e=e.key;if(!e||e===true)a=0;else if(dust.isArray(e))a=e.length;else if(!isNaN(parseFloat(e))&&isFinite(e))a=e;else if(typeof e==="object"){a=0;for(f in e)Object.hasOwnProperty.call(e,f)&&a++}else a=(e+"").length;return c.write(a)}};if(typeof exports!=="undefined")module.exports=
dust})();
(function(){var b=Math,h=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"";/android/gi.test(navigator.appVersion);var k=/iphone|ipad/gi.test(navigator.appVersion),g=/playbook/gi.test(navigator.appVersion),f=/hp-tablet/gi.test(navigator.appVersion),c="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="ontouchstart"in window&&!f,d=h+"Transform"in document.documentElement.style,e=k||g,l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,17)}}(),i=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,u="onorientationchange"in window?"orientationchange":"resize",m=a?"touchstart":"mousedown",p=a?"touchmove":"mousemove",o=a?
"touchend":"mouseup",r=a?"touchcancel":"mouseup",t="translate"+(c?"3d(":"("),w=c?",0)":")",k=function(c,f){var b=document,i;this.wrapper=typeof c=="object"?c:b.getElementById(c);this.wrapper.style.overflow="hidden";this.scroller=this.wrapper.children[0];this.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,
onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in f)this.options[i]=f[i];this.x=this.options.x;this.y=this.options.y;this.options.useTransform=d?this.options.useTransform:false;this.options.hScrollbar=this.options.hScroll&&this.options.hScrollbar;this.options.vScrollbar=this.options.vScroll&&this.options.vScrollbar;this.options.useTransition=e&&this.options.useTransition;this.scroller.style[h+"TransitionProperty"]=this.options.useTransform?"-"+h.toLowerCase()+
"-transform":"top left";this.scroller.style[h+"TransitionDuration"]="0";this.scroller.style[h+"TransformOrigin"]="0 0";this.options.useTransition&&(this.scroller.style[h+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");this.options.useTransform?this.scroller.style[h+"Transform"]=t+this.x+"px,"+this.y+"px"+w:this.scroller.style.cssText=this.scroller.style.cssText+(";position:absolute;top:"+this.y+"px;left:"+this.x+"px");this.refresh();this._bind(u,window);this._bind(m);a||this._bind("mouseout",
this.wrapper)};k.prototype={enabled:true,x:0,y:0,steps:[],scale:1,handleEvent:function(d){switch(d.type){case m:if(!a&&d.button!==0)break;this._start(d);break;case p:this._move(d);break;case o:case r:this._end(d);break;case u:this._resize();break;case "mouseout":this._mouseout(d);break;case "webkitTransitionEnd":this._transitionEnd(d)}},_resize:function(){this.refresh()},_pos:function(a,d){a=this.hScroll?a:0;d=this.vScroll?d:0;if(this.options.useTransform)this.scroller.style[h+"Transform"]=t+a+"px,"+
d+"px"+w+" scale("+this.scale+")";else{a=a>>0;d=d>>0;this.scroller.style.left=a+"px";this.scroller.style.top=d+"px"}this.x=a;this.y=d},_start:function(d){var c=a?d.touches[0]:d,e,f;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,d);this.options.useTransition&&this._transitionTime(0);this.zoomed=this.animating=this.moved=false;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.momentum){if(this.options.useTransform){e=
getComputedStyle(this.scroller,null)[h+"Transform"].replace(/[^0-9-.,]/g,"").split(",");f=e[4]*1;e=e[5]*1}else{f=getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,"")*1;e=getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(f!=this.x||e!=this.y){this.options.useTransition?this._unbind("webkitTransitionEnd"):i(this.aniTime);this.steps=[];this._pos(f,e)}}this.startX=this.x;this.startY=this.y;this.pointX=c.pageX;this.pointY=c.pageY;this.startTime=d.timeStamp||Date.now();this.options.onScrollStart&&
this.options.onScrollStart.call(this,d);this._bind(p);this._bind(o);this._bind(r)}},_move:function(d){var c=a?d.touches[0]:d,e=c.pageX-this.pointX,f=c.pageY-this.pointY,i=this.x+e,g=this.y+f,l=d.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,d);this.pointX=c.pageX;this.pointY=c.pageY;if(i>0||i<this.maxScrollX)i=this.options.bounce?this.x+e/2:i>=0||this.maxScrollX>=0?0:this.maxScrollX;if(g>0||g<this.maxScrollY)g=this.options.bounce?this.y+f/2:g>=0||
this.maxScrollY>=0?0:this.maxScrollY;this.distX=this.distX+e;this.distY=this.distY+f;this.absDistX=b.abs(this.distX);this.absDistY=b.abs(this.distY);if(!(this.absDistX<6&&this.absDistY<6)){if(this.options.lockDirection)if(this.absDistX>this.absDistY+5){g=this.y;f=0}else if(this.absDistY>this.absDistX+5){i=this.x;e=0}this.moved=true;this._pos(i,g);this.dirX=e>0?-1:e<0?1:0;this.dirY=f>0?-1:f<0?1:0;if(l-this.startTime>300){this.startTime=l;this.startX=this.x;this.startY=this.y}this.options.onScrollMove&&
this.options.onScrollMove.call(this,d)}},_end:function(d){if(!(a&&d.touches.length!=0)){var e=a?d.changedTouches[0]:d,c,f,i={dist:0,time:0},g={dist:0,time:0},l=(d.timeStamp||Date.now())-this.startTime;c=this.x;f=this.y;this._unbind(p);this._unbind(o);this._unbind(r);this.options.onBeforeScrollEnd&&this.options.onBeforeScrollEnd.call(this,d);if(this.moved){if(l<300&&this.options.momentum){i=c?this._momentum(c-this.startX,l,-this.x,this.scrollerW-this.wrapperW+this.x,this.options.bounce?this.wrapperW:
0):i;g=f?this._momentum(f-this.startY,l,-this.y,this.maxScrollY<0?this.scrollerH-this.wrapperH+this.y:0,this.options.bounce?this.wrapperH:0):g;c=this.x+i.dist;f=this.y+g.dist;if(this.x>0&&c>0||this.x<this.maxScrollX&&c<this.maxScrollX)i={dist:0,time:0};if(this.y>0&&f>0||this.y<this.maxScrollY&&f<this.maxScrollY)g={dist:0,time:0}}if(i.dist||g.dist){e=b.max(b.max(i.time,g.time),10);this.scrollTo(c>>0,f>>0,e)}else this._resetPos(200)}else{if(a){for(c=e.target;c.nodeType!=1;)c=c.parentNode;if(c.tagName!=
"SELECT"&&c.tagName!="INPUT"&&c.tagName!="TEXTAREA"){f=document.createEvent("MouseEvents");f.initMouseEvent("click",true,true,d.view,1,e.screenX,e.screenY,e.clientX,e.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,0,null);f._fake=true;c.dispatchEvent(f)}}this._resetPos(200)}this.options.onTouchEnd&&this.options.onTouchEnd.call(this,d)}},_resetPos:function(a){var d=this.x>=0?0:this.x<this.maxScrollX?this.maxScrollX:this.x,c=this.y>=0||this.maxScrollY>0?0:this.y<this.maxScrollY?this.maxScrollY:this.y;
if(d==this.x&&c==this.y){if(this.moved){this.options.onScrollEnd&&this.options.onScrollEnd.call(this);this.moved=false}}else this.scrollTo(d,c,a||0)},_mouseout:function(a){var d=a.relatedTarget;if(d)for(;d=d.parentNode;)if(d==this.wrapper)return;this._end(a)},_transitionEnd:function(a){if(a.target==this.scroller){this._unbind("webkitTransitionEnd");this._startAni()}},_startAni:function(){var a=this,d=a.x,c=a.y,e=Date.now(),f,i,g;if(!a.animating)if(a.steps.length){f=a.steps.shift();if(f.x==d&&f.y==
c)f.time=0;a.animating=true;a.moved=true;if(a.options.useTransition){a._transitionTime(f.time);a._pos(f.x,f.y);a.animating=false;f.time?a._bind("webkitTransitionEnd"):a._resetPos(0)}else{g=function(){var h=Date.now(),k;if(h>=e+f.time){a._pos(f.x,f.y);a.animating=false;a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a);a._startAni()}else{h=(h-e)/f.time-1;i=b.sqrt(1-h*h);h=(f.x-d)*i+d;k=(f.y-c)*i+c;a._pos(h,k);if(a.animating)a.aniTime=l(g)}};g()}}else a._resetPos(400)},_transitionTime:function(a){this.scroller.style[h+
"TransitionDuration"]=a+"ms"},_momentum:function(a,d,c,e,f){var d=b.abs(a)/d,i=d*d/0.0012;if(a>0&&i>c){c=c+f/(6/(i/d*6.0E-4));d=d*c/i;i=c}else if(a<0&&i>e){e=e+f/(6/(i/d*6.0E-4));d=d*e/i;i=e}return{dist:i*(a<0?-1:1),time:d/6.0E-4>>0}},_offset:function(a){for(var d=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;){d=d-a.offsetLeft;c=c-a.offsetTop}return{left:d,top:c}},_bind:function(a,d,c){(d||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,d,c){(d||this.scroller).removeEventListener(a,
this,!!c)},destroy:function(){this.scroller.style[h+"Transform"]="";this._unbind(u,window);this._unbind(m);this._unbind(p);this._unbind(o);this._unbind(r);this._unbind("mouseout",this.wrapper);this.options.useTransition&&this._unbind("webkitTransitionEnd");this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var a;this.wrapperW=this.wrapper.clientWidth;this.wrapperH=this.wrapper.clientHeight;this.scrollerW=this.scroller.offsetWidth;this.scrollerH=this.scroller.offsetHeight;
this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH;this.dirY=this.dirX=0;this.hScroll=this.options.hScroll&&this.maxScrollX<0;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;this.scroller.style[h+"TransitionDuration"]="0";this._resetPos(200)},scrollTo:function(a,d,c,e){var f=a;this.stop();f.length||(f=[{x:a,y:d,time:c,
relative:e}]);a=0;for(d=f.length;a<d;a++){if(f[a].relative){f[a].x=this.x-f[a].x;f[a].y=this.y-f[a].y}this.steps.push({x:f[a].x,y:f[a].y,time:f[a].time||0})}this._startAni()},scrollToElement:function(a,d){var c;if(a=a.nodeType?a:this.scroller.querySelector(a)){c=this._offset(a);c.left=c.left+this.wrapperOffsetLeft;c.top=c.top+this.wrapperOffsetTop;c.left=c.left>0?0:c.left<this.maxScrollX?this.maxScrollX:c.left;c.top=c.top>0?0:c.top<this.maxScrollY?this.maxScrollY:c.top;d=d===void 0?b.max(b.abs(c.left)*
2,b.abs(c.top)*2):d;this.scrollTo(c.left,c.top,d)}},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(p);this._unbind(o);this._unbind(r)},enable:function(){this.enabled=true},stop:function(){i(this.aniTime);this.steps=[];this.animating=this.moved=false}};typeof exports!=="undefined"?exports.iScroll=k:window.iScroll=k})();
var LZ77=function(b){var b=b||{},h=b.referenceIntBase||96,k=32+h-1,g=Math.pow(h,2)-1,f=b.minStringLength||5,c=Math.pow(h,1)-1+f,a=b.defaultWindowLength||144,d=g+f,e=function(a,d){if(a>=0&&a<Math.pow(h,d)-1){for(var c="";a>0;){c=String.fromCharCode(a%h+32)+c;a=Math.floor(a/h)}for(var e=d-c.length,f=0;f<e;f++)c=String.fromCharCode(32)+c;return c}throw"Reference int out of range: "+a+" (width = "+d+")";},l=function(a,d){for(var c=0,e=0;e<d;e++){var c=c*h,f=a.charCodeAt(e);if(f>=32&&f<=k)c=c+(f-32);else throw"Invalid char code in reference int: "+
f;}return c};this.compress=function(b,l){l=l||a;if(l>d)throw"Window length too large";for(var h="",k=0,o=b.length-f;k<o;){for(var r=Math.max(k-l,0),t=f,w=false,s=g,q=0,x=null;r+t<k;)if(b.substr(r,t)==b.substr(k,t)&&t<c){t++;w=true}else{t=t-1;if(w&&t>q){s=k-r-t;q=t}t=f;r++;w=false}if(q){x="`"+e(s,2)+e(q-f,1);k=k+q}else{x=b.charAt(k)!="`"?b.charAt(k):"``";k++}h=h+x}return h+b.slice(k).replace(/`/g,"``")};this.decompress=function(a){for(var d="",c=0;c<a.length;){var e=a.charAt(c);if(e!="`"){d=d+e;c++}else if(a.charAt(c+
1)!="`"){var e=l(a.substr(c+1,2),2),b;b=a.charAt(c+3);b=l(b,1)+f;d=d+d.substr(d.length-e-b,b);c=c+(f-1)}else{d=d+"`";c=c+2}}return d}};
(function(b,h){var k=0;b.$=h.noConflict?h.noConflict():h;b.resolve=function(b,f){if(!b)return null;for(var b=b.split("."),c=window,a=window,d=-1,e;e=b[++d];){a=a[e];if(!a)if(f)a=c[e]={};else return null;c=a}return a};b.extend=function(g,f,c){function a(){}if(typeof g=="object"){c=g;g=Object;f=function(){}}else if(typeof f=="object"){c=f;f=g;g=Object}a.prototype=g.prototype;f.prototype=new a;f.prototype.constructor=f;if(c)for(var d in c)f.prototype[d]=c[d];f.extend=function(a,d){if(typeof a=="object"){d=
a;a=function(){f.apply(this,arguments)}}b.extend(f,a,d);return a};return f};b.log=function(){window.console?console.log.apply(console,arguments):alert([].join.call(arguments," "))};b.uuid=function(){return k++};b.delay=function(b,f,c){return setTimeout(function(){b.call(f)},c||0)};b.clone=function(g,f){return g?g instanceof Array?g.slice(0):g instanceof Date?new Date(g.getTime()):typeof g=="object"?b.merge(f,{},g):g.valueOf():g};b.merge=function(g,f){var c=-1,a=[].slice.call(arguments,2),d,e;if(typeof g==
"object"){a.unshift(f);f=g;g=false}for(;d=a[++c];)for(e in d)d.hasOwnProperty(e)&&(f[e]=g?b.clone(d[e]):d[e]);return f};h.fn.dataAttrs=function(){for(var b={},f=this[0].attributes,c=-1,a;a=f[++c];)if(a.name.indexOf("data-")==0)b[a.name.slice(5)]=a.value;return b};if(!h.proxy)h.proxy=function(b,f){return function(){b.apply(f,arguments)}};if(!h.fn.detach)h.fn.detach=h.fn.remove})(window.Lavaca=window.Lavaca||{},window.jQuery||window.Zepto||window.jMiny);
(function(b){b.indexOf=function(b,k){if(b){if(b.indexOf)return b.indexOf(k);for(var g=0,f=b.length;g<f;g++)if(b[g]===k)return g}return-1};b.contains=function(h,k){return b.indexOf(h,k)>-1};b.remove=function(h,k){var g=b.indexOf(h,k);g>-1&&h.splice(g,1);return g};b.pushIfNotExists=function(h,k){var g=b.indexOf(h,k);if(g==-1)h[g=h.length]=k;return g}})(Lavaca.resolve("Lavaca.util.ArrayUtils",!0));
(function(b){function h(a){return parseInt(a,10)}function k(a,d){for(var a=a.toLowerCase(),c=-1,b;b=d[++c];)if(a==b.toLowerCase()||a==f(b).toLowerCase())return c-1;throw'Invalid code "'+b+'"';}function g(a,d,c){for(var f=a<0?"-":"",c=c||"0",a=Math.abs(a).toString();d-a.length>0;)a=c+a;return f+a}function f(a){Lavaca.util.Translation&&(result=Lavaca.util.Translation.get(a));return result?result:a}function c(a){for(var d=[],c="",f=-1,b,g;g=a.charAt(++f);){b=c.charAt(0);if(b==g||b=='"'||b=="'"){c=c+
g;if(b=='"'&&g=='"'||b=="'"&&g=="'"){d.push(c);c=""}}else{c&&d.push(c);c=g}}c&&d.push(c);return d}b.timeOfDayDesignatorAbbr=["A","P"];b.timeOfDayDesignator=["AM","PM"];b.daysOfWeekAbbr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];b.daysOfWeek=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];b.monthsAbbr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];b.months=["January","February","March","April","May","June","July","August","September","October","November",
"December"];b.fn={d:{exp:"\\d{1,2}",i:function(a,d){d.date=h(a)},o:function(a,d){return(d?a.getUTCDate():a.getDate()).toString()}},dd:{exp:"\\d{2}",i:function(a,d){d.date=h(a)},o:function(a,d){return g(b.fn.d.o(a,d),2)}},ddd:{exp:"[a-z]{3}",i:function(){},o:function(a,d){return f(b.daysOfWeekAbbr[d?a.getUTCDay():a.getDay()])}},dddd:{exp:"[a-z]+",i:function(){},o:function(a,d){return f(b.daysOfWeek[d?a.getUTCDay():a.getDay()])}},f:{exp:"\\d",i:function(a,d){d.ms=h(a)*100},o:function(a,d,c){c=c||100;
return g(Math.floor((d?a.getUTCMilliseconds():a.getMilliseconds())/c),3-c.toString().length)}},ff:{exp:"\\d{2}",i:function(a,d){d.ms=h(a)*10},o:function(a,d){return g(b.fn.f.o(a,d,10),2)}},fff:{exp:"\\d{3}",i:function(a,d){d.ms=h(a,10)},o:function(a,d){return g(b.fn.f.o(a,d,1),3)}},h:{exp:"1?\\d",i:function(a,d,c){a=h(a)-1;c=(c.t||c.tt||"A").indexOf("A")==0?0:12;d.hour=a+c},o:function(a,d){return((d?a.getUTCHours():a.getHours())%12+1).toString()}},hh:{exp:"[0-1]\\d",i:function(a,d,c){b.fn.h.i(a,d,
c)},o:function(a,d){return g(b.fn.h.o(a,d),2)}},H:{exp:"[0-2]?\\d",i:function(a,d){d.hour=h(a)},o:function(a,d){return(d?a.getUTCHours():a.getHours()).toString()}},HH:{exp:"[0-2]\\d",i:function(a,d){d.hour=h(a)},o:function(a,d){return g(b.fn.H.o(a,d),2)}},m:{exp:"[1-5]?\\d",i:function(a,d){d.minute=h(a)},o:function(a,d){return(d?a.getUTCMinutes():a.getMinutes()).toString()}},mm:{exp:"[0-5]\\d",i:function(a,d,c){b.fn.m.i(a,d,c)},o:function(a,d){return g(b.fn.m.o(a,d),2)}},M:{exp:"1?\\d",i:function(a,
d){d.month=h(a)-1},o:function(a,d){return((d?a.getUTCMonth():a.getMonth())+1).toString()}},MM:{exp:"[0-1]\\d",i:function(a,d,c){b.fn.M.i(a,d,c)},o:function(a,d){return g(b.fn.M.o(a,d),2)}},MMM:{exp:"[a-z]{3}",i:function(a,d){d.month=k(a,b.monthsAbbr)},o:function(a,d){return f(b.monthsAbbr[d?a.getUTCMonth():a.getMonth()])}},MMMM:{exp:"[a-z]+",i:function(a,d){d.month=k(a,b.months)},o:function(a,d){return f(b.months[d?a.getUTCMonth():a.getMonth()])}},s:{exp:"[1-5]?\\d",i:function(a,d){d.second=h(a)},
o:function(a,d){return(d?a.getUTCSeconds():a.getSeconds()).toString()}},ss:{exp:"[0-5]\\d",i:function(a,d,c){b.fn.s.i(a,d,c)},o:function(a,d){return g(b.fn.s.o(a,d),2)}},t:{exp:"[a-z]",i:function(){},o:function(a,d){return f(b.timeOfDayDesignatorAbbr[Math.floor((d?a.getUTCHours():a.getHours())/12)])}},tt:{exp:"[a-z]+",i:function(){},o:function(a,d){return f(b.timeOfDayDesignator[Math.floor((d?a.getUTCHours():a.getHours())/12)])}},y:{exp:"\\d?\\d",i:function(a,d){d.year=(new Date).getFullYear()%100+
h(a)},o:function(a,d){return((d?a.getUTCFullYear():a.getFullYear())%100).toString()}},yy:{exp:"\\d{2}",i:function(a,d,c){b.fn.y.i(a,d,c)},o:function(a,d){return g(b.fn.y.o(a,d),2)}},yyy:{exp:"\\d*\\d{3}",i:function(a,d){d.year=h(a)},o:function(a,d){return g(d?a.getUTCFullYear():a.getFullYear(),3)}},yyyy:{exp:"\\d*\\d{4}",i:function(a,d,c){b.fn.yyy.i(a,d,c)},o:function(a,d){return g(d?a.getUTCFullYear():a.getFullYear(),4)}},z:{exp:"[-+]?1?\\d",i:function(a,d){d.offset=h(a)*60},o:function(a,d){var c=
a.getTimezoneOffset(),f=Math.floor(Math.abs(c/60));return(c<0?"-":"+")+g(f,d)}},zz:{exp:"[-+]?[0-1]\\d",i:function(a,d,c){b.fn.z.i(a,d,c)},o:function(a){return b.fn.z.o(a,2)}},zzz:{exp:"[-+]?[0-1]\\d:\\d{2}",i:function(a,d){var c=a.split(":");d.offset=h(c[0])*60+h(c[1])},o:function(a){var a=a.getTimezoneOffset(),d=a%60;return(a<0?"-":"+")+g((a-d)/60,2)+":"+g(Math.abs(d),2)}}};b.parse=function(a,d){for(var e=c(d),f,i=["^"],h=-1,k;k=e[++h];)(f=b.fn[k])?i.push("(",f.exp,")"):i.push("(",k.replace(/(^")|(^')|('$)|("$)/g,
"").replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),")");i.push("$");f=RegExp(i.join(""));i={year:0,month:0,date:1,hour:0,minute:0,second:0,ms:0,offset:0};h={};k=-1;var p;if(f.test(a))for(f=f.exec(a);p=e[++k];)h[p]=f[k+1];for(p in h)(e=b.fn[p])&&e.i(h[p],i,h);return new Date(b.monthsAbbr[i.month]+" "+g(i.date,2)+" "+g(i.year,4)+" "+g(i.hour,2)+":"+g(i.minute,2)+":"+g(i.second,2)+(i.ms>0?"."+g(i.ms,3):"")+(i.offset>=0?"+":"-")+g(Math.floor(Math.abs(i.offset/60)),2)+g(Math.abs(i.offset%60),2))};b.stringify=
function(a,d,e){for(var d=c(d),f=-1,i=[],g,h;g=d[++f];)(h=b.fn[g])?i.push(h.o(a,e)):i.push(g.replace(/(^")|(^')|('$)|("$)/g,""));return i.join("")}})(Lavaca.resolve("Lavaca.util.DateUtils",!0));(function(b){function h(b){var g,f,c;for(g in b){if(b.hasOwnProperty(g))if(f=b[g])if(typeof f.dispose=="function")f.dispose();else if(f instanceof Array)for(c=f.length-1;c>-1;c--)h(f[c]);delete b[g]}}b.Disposable=Lavaca.extend({dispose:function(){h(this)}})})(Lavaca.resolve("Lavaca.util",!0));
(function(b,h){b.Cache=h.extend({get:function(b,g){var f=this["@"+b];f===void 0&&g!==void 0&&(f=this["@"+b]=g);return f===void 0?null:f},set:function(b,g){this["@"+b]=g},add:function(b){var g=Lavaca.uuid();this.set(g,b);return g},remove:function(b){delete this["@"+b]},each:function(b,g){for(var f in this)this.hasOwnProperty(f)&&f.indexOf("@")==0&&b.call(g||this,f.slice(1),this[f])},toObject:function(){var b={};this.each(function(g,f){b[g]=typeof f.toObject==="function"?f.toObject():f});return b},
toJSON:function(){return JSON.stringify(this.toObject())}})})(Lavaca.util,Lavaca.util.Disposable);
(function(b,h,k){b.Map=k.extend(function(b,f,c){k.call(this);this.hasLoaded=false;this.name=b;(b=f)&&b.indexOf("http")!=0&&(b=b.charAt(0)=="/"?location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+(b.indexOf("/")==0?b:"/"+b):location.toString().split("#")[0].split("?")[0].replace(/\w+\.\w+$/,"")+b);this.src=b;this.code=c;this.cache=new Lavaca.util.Cache},{is:function(b){return this.name==b},get:function(b){if(!this.hasLoaded){this.code?this.add(this.code):this.src&&this.load(this.src);
this.hasLoaded=true}return this.cache.get(b)},add:function(b){for(var f in b)this.cache.set(f,b[f])},process:function(b){this.add(typeof b=="string"?JSON.parse(b):b)},load:function(b){var f=this;Lavaca.net.Connectivity.ajax({async:false,url:b,success:function(c){f.process(c)}})}});b.Map.setDefault=function(b,f){var c=f;typeof c=="string"&&(c=b.get(f));b.set("default",c)};b.Map.get=function(b,f,c,a){if(!c){c=f;f=a}if(f)if(b=b.get(f))return b.get(c);return null};b.Map.init=function(g,f,c,a){h(a||document.documentElement).find('script[type="'+
f+'"]').each(function(){var a=h(this),e=a.attr("data-src"),f=a.attr("data-name"),i=a.attr("data-default")!==null,a=a.text(),e=c(f,e,a);g.set(e.name,e);i&&b.Map.setDefault(g,f)})};b.Map.dispose=function(b){b.dispose()}})(Lavaca.util,Lavaca.$,Lavaca.util.Disposable);
(function(b,h,k){function g(c,a,d){d&&(d=JSON.parse(d));return new b.Config(c,a,d)}var f=new b.Cache;b.Config=k.extend({});b.Config.setDefault=function(c){k.setDefault(f,c)};b.Config.currentEnvironment=function(){return f.get("default").name};b.Config.get=function(c,a){return k.get(f,c,a,"default")};b.Config.init=function(c){k.init(f,"text/x-config",g,c)};b.Config.dispose=function(){k.dispose(f)}})(Lavaca.util,Lavaca.$,Lavaca.util.Map);
(function(b){b.Promise=Lavaca.extend(function(b){this.thisp=b;this.resolvedQueue=[];this.rejectedQueue=[]},{succeeded:false,failed:false,success:function(b){b&&(this.succeeded?b.apply(this.thisp,this.resolveArgs):this.resolvedQueue.push(b));return this},error:function(b){b&&(this.failed?b.apply(this.thisp,this.rejectArgs):this.rejectedQueue.push(b));return this},always:function(b){return this.then(b,b)},then:function(b,k){return this.success(b).error(k)},resolve:function(){if(!this.succeeded&&!this.failed){this.succeeded=
true;this.resolveArgs=[].slice.call(arguments,0);for(var b=-1,k;k=this.resolvedQueue[++b];)k.apply(this.thisp,this.resolveArgs)}return this},reject:function(){if(!this.succeeded&&!this.failed){this.failed=true;this.rejectArgs=[].slice.call(arguments,0);for(var b=-1,k;k=this.rejectedQueue[++b];)k.apply(this.thisp,this.rejectArgs)}return this},when:function(){for(var b=this,k=[],g=-1,f=arguments.length,c;c=arguments[++g];)(function(a){c.success(function(d){k[a]=d;--f<1&&b.resolve.apply(b,k)}).error(function(){b.reject.apply(b,
arguments)})})(g);c=null;return this},resolver:function(){var b=this;return function(){b.resolve.apply(b,arguments)}},rejector:function(){var b=this;return function(){b.reject.apply(b,arguments)}}});b.Promise.when=function(h){var k=h instanceof b.Promise,g=new b.Promise(k?window:h),k=[].slice.call(arguments,k?0:1);return g.when.apply(g,k)}})(Lavaca.resolve("Lavaca.util",!0));
(function(b,h){function k(b){return b}var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};b.format=function(b){var c,a=k,d,e;if(arguments[1]instanceof Array){c=arguments[1];a=arguments[2]||k}else c=[].slice.call(arguments,1);d=0;for(e=c.length;d<e;d++)b=b.split("{"+d+"}").join(a(c[d]+""));return b};b.escapeHTML=function(b){var b=""+b,c;for(c in g)b=b.split(c).join(g[c]);return b};b.compress=function(b){typeof b!="string"&&(b=JSON.stringify(b));return(new h).compress(b)};b.decompress=
function(b){return(new h).decompress(b)}})(Lavaca.resolve("Lavaca.util.StringUtils",!0),window.LZ77);
(function(b,h){function k(f,c,a){a&&(a=JSON.parse(a));f=new b.Translation(f,c,a);g.get(f.language)||g.set(f.language,f);return f}var g=new b.Cache;b.Translation=h.extend(function(b,c,a){h.apply(this,arguments);var d=b=b.toLowerCase().split("_");this.language=d[0];this.locale=(this.country=d[1]||"")?this.language+"_"+this.country:this.language},{is:function(b,c){return b==this.language&&(!c||!this.country||c==this.country)}});b.Translation.setDefault=function(f){g.remove("default");h.setDefault(g,
b.Translation.forLocale(f))};b.Translation.forLocale=function(b){b=(b||"default").toLowerCase();return g.get(b)||g.get(b.split("_")[0])||g.get("default")};b.Translation.get=function(f,c){if(!c){c=f;f="default"}var a=b.Translation.forLocale(f),d=null;a&&(d=a.get(c));if(d===null)(a=b.Translation.forLocale(f.split("_")[0]))&&(d=a.get(c));if(d===null)(a=b.Translation.forLocale("default"))&&(d=a.get(c));return d};b.Translation.init=function(f,c){h.init(g,"text/x-translation",k,c);b.Translation.setDefault(f)};
b.Translation.dispose=function(){h.dispose(g)}})(Lavaca.util,Lavaca.util.Map);
(function(b,h){b.EventDispatcher=h.extend({suppressEvents:false,on:function(b,g,f){var c=this.callbacks||(this.callbacks={}),b=c[b]||(c[b]=[]);b[b.length]={fn:g,thisp:f};return this},off:function(b,g,f){var c=this.callbacks,a,d=-1,e,l;if(b){if(c)if(g){if(a=c[b])for(c=c[b]=[];b=a[++d];){e=b.fn==g||b.fn.fn==g;l=f&&(b.thisp==f||b.fn.thisp==f);if(!e||e&&(!f||!l))c[c.length]=b}}else delete c[b]}else delete this.callbacks;return this},trigger:function(b,g){if(!this.suppressEvents&&this.callbacks){var f=
this.callbacks[b],c=this.createEvent(b,g),a=-1,d;if(f)for(;d=f[++a];)d.fn.apply(d.thisp||this,[c])}return this},createEvent:function(b,g){return Lavaca.merge({},g||{},{type:b,target:g&&g.target?g.target:this,currentTarget:this})}})})(Lavaca.resolve("Lavaca.events",!0),Lavaca.util.Disposable);
(function(b){var h=["screenX","screenY","clientX","clientY","pageX","pageY"];b.EventPoint=Lavaca.extend(function(b){this.init(b)},{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,init:function(b){for(var g=-1,f;f=h[++g];)this[f]=b?b[f]:null}})})(Lavaca.resolve("Lavaca.events",!0));(function(b){b.EventVector=Lavaca.extend(function(b,k,g){this.length=b;this.axis=k;this.compass=g},{length:0,axis:"vertical",compass:"north"})})(Lavaca.resolve("Lavaca.events",!0));
(function(b,h,k,g){function f(a,d){w[a]=function(a){d(a)}}function c(a,d){s[a]=function(a){d(a)}}function a(a,d){a.touches&&(a=a.touches[d||0]);return new g(a)}function d(a,d){for(var c={},b=-1,e;e=r[++b];)c[e]=a[e]-d[e];return new g(c)}function e(a,d){return Math.sqrt((a.screenX-d.screenX)*(a.screenX-d.screenX)+(a.screenY-d.screenY)*(a.screenY-d.screenY))}function l(a,d){var c=a.screenX-d.screenX,b=a.screenY-d.screenY;return c*c>b*b?new k(Math.abs(c),"horizontal",c>0?"east":"west"):new k(Math.abs(b),
"vertical",b>0?"south":"north")}function i(a,d){var c=-1,b;if(null!==a&&d.changedTouches){for(;b=d.changedTouches[++c];)if(b.identifier===a)return b;return null}return d}function u(a){if(a){for(var d in a)typeof a[d]!="function"&&(this[d]=a[d]);this.originalEvent=a}}var m="mousedown",p="mousemove",o="mouseup",r=["screenX","screenY","clientX","clientY","pageX","pageY"],t=false,w={},s={};(function(){var a=document.createElement("div");a.setAttribute("ontouchstart","return;");a.setAttribute("ongesturestart",
"return;");if(t=typeof a.ontouchstart=="function"){m="touchstart";p="touchmove";o="touchend"}})();(function(){h(document.body).on(p,function(a){for(var d in w)w[d](a)}).on(o,function(a){for(var d in s)s[d](a)})})();u.prototype={preventDefault:function(){this.defaultPrevented=true;this.originalEvent&&this.originalEvent.preventDefault()},stopPropagation:function(){this.originalEvent&&this.originalEvent.stopPropagation()}};b.moveThreshold=4;b.tapholdDuration=800;b.isSupported=function(){return t};b.bind=
function(g,h,k,p,o,r){function t(a){var c=new u(a);if(a){c.startTime=B;c.elapsed=(new Date).getTime()-B;c.startPoint=D;c.lastPoint=E;c.currentPoint=A;c.hasMoved=N||(N=!(e(D,A)<=b.moveThreshold));if(D&&A){c.startDelta=d(A,D);c.startDistance=e(A,D);c.startVector=l(A,D)}if(A&&E){c.lastDelta=d(A,E);c.lastDistance=e(A,E);c.lastVector=l(A,E)}}return c}if(typeof h=="function"){h={start:h,move:k,end:p};r=o}if(h&&typeof h=="object"){r=k;k=h;h=null}if(k&&typeof k=="object"){p=k.move;o=k.end;k=k.start;r=p}var B,
D,E,A,N=false,H=false,K,v={},F;v.click=function(a){H&&a.preventDefault()};v[m]=function(d){var d=d.originalEvent||d,b=this,e=Lavaca.uuid();B=(new Date).getTime();D=E=A=a(d);N=false;d.changedTouches&&d.changedTouches.length?K=d.changedTouches[0].identifier:idenfifier=null;k&&k.call(r||b,t(d));H=H||d.defaultPrevented;f(e,function(d){var c=i(K,d);if(null!==c){A=a(c);if(p){d=t(d);d.currentTarget=b;p.call(r||b,d);H=H||d.defaultPrevented}E=A}});c(e,function(d){var c=i(K,d);if(null!==c){A=a(c);if(o){d=t(d);
d.currentTarget=b;o.call(r||b,d);H=H||d.defaultPrevented}delete w[e];delete s[e];b=null}})};for(F in v)if(h)g.on(F,h,v[F]);else g.on(F,v[F]);g=null};h.fn.touch=function(a,d,c,e,f){if(a instanceof Function){f=e;e=c;c=d;d=a;a=null}b.bind(this,a,d,c,e,f);return this};h.fn.tap=function(a,d,c){if(typeof a=="function"){c=d;d=a;a=null}if(t)b.bind(this,a,null,null,function(a){!a.hasMoved&&d&&d.apply(c||this,arguments)});else this.on("click",a,function(){d.apply(c||this,arguments)});return this};h.fn.taphold=
function(a,d,c,e){if(typeof a=="function"){e=c;c=d;d=a;a=null}c=c||b.tapholdDuration;this.tap(a,function(a){a.elapsed>=c&&d&&d.apply(this,arguments)},e);return this};h.fn.swipe=function(a,d,c,e){if(typeof a=="function"){c=d;d=a;a=null}var c=c||{},f=c.minDistance||30,i=c.maxDistance||Number.MAX_VALUE,g=c.direction||"horizontal",l=c.timeLimit||1E3,h=c.cancel||null,k=c.move||null,m=c.end||null;b.bind(this,a,c.start||null,function(a){a.elapsed<=l&&k&&k.apply(e||this,arguments)},function(a){m&&m.apply(e||
this,arguments);a.elapsed<=l&&(g==a.startVector.compass||g==a.startVector.axis)&&a.startVector.length>=f&&a.startVector.length<=i?d&&d.apply(e||this,arguments):h&&h.apply(e||this,arguments)});return this}})(Lavaca.resolve("Lavaca.events.Touch",!0),Lavaca.$,Lavaca.events.EventVector,Lavaca.events.EventPoint);
(function(b,h,k){var g=false,f=[];b.isCordova=function(){return!!k};b.mobileBrowser=function(){var c={};c.agent=navigator.userAgent.toLowerCase();c.scrWidth=screen.width;c.scrHeight=screen.height;c.elemWidth=document.documentElement.clientWidth;c.elemHeight=document.documentElement.clientHeight;c.otherBrowser=c.agent.indexOf("series60")!=-1||c.agent.indexOf("symbian")!=-1||c.agent.indexOf("windows ce")!=-1||c.agent.indexOf("blackberry")!=-1;c.mobileOS=typeof orientation!="undefined"?true:false;c.touchOS=
"ontouchstart"in document.documentElement?true:false;c.blackberry=c.agent.indexOf("blackberry")>-1;c.ipad=c.agent.indexOf("ipad")!=-1?true:false;c.ipod=c.agent.indexOf("ipod")!=-1?true:false;c.iphone=c.agent.indexOf("iphone")!=-1?true:false;c.palm=c.agent.indexOf("palm")!=-1?true:false;c.symbian=c.agent.indexOf("symbian")!=-1?true:false;c.iOS=c.iphone||c.ipod||c.ipad?true:false;c.android=c.agent.indexOf("android")!=-1||!c.iOS&&!c.otherBrowser&&c.touchOS&&c.mobileOS?true:false;c.android2=c.android&&
c.agent.indexOf("android 2")!=-1?true:false;c.isMobile=c.android||c.iOS||c.mobileOS||c.touchOS?true:false;return c};b.register=function(c,a){function d(){if(!window.plugins)window.plugins={};window.plugins[c]=new a}g?d():f.push(d)};b.exec=function(c,a,d){var b=new Lavaca.util.Promise(window);k?k.exec(b.resolver(),b.rejector(),c,a,d):b.reject();return b};b.init=function(c){if(document.addEventListener)document.addEventListener("deviceready",c,false);else h(document).on("deviceready",c)};h(document).ready(function(){for(var c=
-1,a;a=f[++c];)a();g=true;if(!k)if(document.createEvent){c=document.createEvent("Events");c.initEvent("deviceready",true,false);document.dispatchEvent(c)}else if(document.fireEvent){c=document.createEventObject();c.eventType="deviceready";document.fireEvent("ondeviceready",c)}})})(Lavaca.resolve("Lavaca.env.Device",!0),Lavaca.$,window.Cordova||window.cordova);
(function(b,h){b.Badge=Lavaca.events.EventDispatcher.extend({get:function(){return h.exec("Badge","get")},set:function(b){var g=this;return h.exec("Badge","set",[b]).success(function(b){g.trigger("change",{count:b})})},increment:function(b){var b=b||1,g=this,f=new Lavaca.util.Promise;this.get().success(function(c){g.set(c+b).success(f.resolver()).error(f.rejector())}).error(f.rejector());return f},decrement:function(b){return self.increment(-(b||1))},clear:function(){return this.set(0)}});h.register("badge",
b.Badge)})(Lavaca.env,Lavaca.env.Device);(function(b,h){b.ChildBrowser=Lavaca.events.EventDispatcher.extend({showWebPage:function(b){if(h.isCordova())return h.exec("ChildBrowser","showWebPage",[b]).error(function(){window.location.href=b});window.open(b);return(new Lavaca.util.Promise(window)).resolve()},close:function(){return h.exec("ChildBrowser","close",[])}});h.register("childBrowser",b.ChildBrowser)})(Lavaca.env,Lavaca.env.Device);
(function(b,h,k){function g(c,a,d,b,g){if(d===f){d=a;a=""}b||(b=[]);var b=[].concat(b),i=-1,h=b.length,d=[d,function(a){c=="confirm"&&(a===f||a===h||h===0&&a==2)?g.reject((h||2)-1):g.resolve(a-1)},a],k=[];for(c=="confirm"&&b.push(b.shift());a=b[++i];){k.push(a.name);if(a.exec)g[c=="confirm"&&i==b.length-1?"error":"success"](function(a,d){return function(c){c===f&&(c=h);c==a&&d(a)}}(i,a.exec))}d.push(k.join(","));navigator.notification[c].apply(navigator.notification,d)}var f;b.Notification=Lavaca.events.EventDispatcher.extend({alert:function(c,
a,d){var b=new k;if(h.isCordova())g("alert",c,a,d,b);else if(window.alert){(button=(d||[])[0])&&button.exec&&b.then(button.exec);alert(a||c);b.resolve(0)}else b.reject();return b},confirm:function(c,a,d){var b=new k;if(h.isCordova())g("confirm",c,a,d,b);else if(window.confirm){d&&b.success((d[1]||{}).exec).error((d[0]||{}).exec);confirm(a)?b.resolve(1):b.reject(0)}else b.reject();return b}});h.register("notification",b.Notification)})(Lavaca.env,Lavaca.env.Device,Lavaca.util.Promise);
(function(b,h){var k={animation:["animation","animationend","keyframes"],webkitAnimation:["-webkit-animation","webkitAnimationEnd","-webkit-keyframes"],MozAnimation:["-moz-animation","animationend","-moz-keyframes"],OAnimation:["-o-animation","oAnimationEnd","-o-keyframes"],MSAnimation:["-ms-animation","MSAnimationEnd","-ms-keyframes"]},g,f,c,a;(function(){var d=document.createElement("div").style,b;for(b in k)if(b in d){d=k[b];g=b;f=d[0];a=d[1];c=d[2];break}})();b.isSupported=function(){return!!g};
b.keyframesToCSS=function(a,b){var f=Lavaca.fx.Transform,i=["@",c," ",a,"{"],g,h,k,o;for(g in b){i.push(g,"{");h=b[g];if(typeof h=="string")i.push(h);else for(k in h){o=h[k];if(k=="transform"&&f){k=f.cssProperty();o=f.toCSS(o)}i.push(k,":",o,";")}i.push("}")}i.push("}");return i.join("")};b.generateKeyframes=function(a,c){if(typeof a=="object"){c=a;a="a"+(new Date).getTime()}var f=b.keyframesToCSS(a,c);h("<style>"+f+"</style>").appendTo("head");return a};b.cssProperty=function(){return f};h.fn.keyframe=
function(a,c,f,i,g,h,k){if(b.isSupported()){typeof a=="object"&&(a=b.generateKeyframes(a));if(typeof c=="object"){k=c.complete;h=c.direction;g=c.iterations;i=c.delay;f=c.easing;c=c.duration}h=h||"normal";g=g||1;i=i||0;f=f||"linear";c=c||1;typeof c=="number"&&(c=c+"ms");typeof i=="number"&&(i=i+"ms");k&&this.nextAnimationEnd(k);this.css(b.cssProperty(),[a,c,f,i,g,h].join(" "))}return this};h.fn.animationEnd=function(d,c){return a?this.on(a,d,c):this};h.fn.nextAnimationEnd=function(d,c){return a?this.one(a,
d,c):this}})(Lavaca.resolve("Lavaca.fx.Animation",!0),Lavaca.$);
(function(b,h){function k(a,c){var b=a.indexOf("rotate")==0,f=a=="scale",g=a.indexOf("translate")==0;/(X|Y|Z)$/.test(a);var h,k=[];if(typeof c=="object")for(h in c)k.push(a+h.toUpperCase()+"("+(g?typeof c[h]=="number"?c[h]+"px":c[h]:b?typeof c[h]=="number"?c[h]+"deg":c[h]:f?typeof c[h]=="number"?c[h]+","+c[h]:c[h]:c[h])+")");else{f?c=typeof c=="number"?c+","+c:c:b?c=typeof c=="number"?c+"deg":c:g&&(c=typeof c=="number"?c+"px":c);k.push(a+"("+c+")")}return k.join(" ")}var g={transform:"transform",
webkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",MSTransform:"-ms-transform"},f,c,a=false;(function(){var d=document.createElement("div").style,b;for(b in g)if(b in d){f=b;c=g[b];d[b]="translate3d(0,0,0)";a=d[b].indexOf("translate3d")>-1&&navigator.userAgent.indexOf("Android")==-1;break}})();b.isSupported=function(){return!!f};b.is3dSupported=function(){return a};b.toCSS=function(a){var c=[],b;if(typeof a=="object")for(b in a)c.push(k(b,a[b]));else c.push(a);
return c.join(" ")};b.cssProperty=function(){return c};h.fn.transform=function(a,c){if(b.isSupported()){a=b.toCSS(a);c&&typeof c=="object"&&(c=(typeof c.x=="number"?c.x*100+"%":c.x)+(c.y===void 0?"":" "+(typeof c.y=="number"?c.y*100+"%":c.y)));this.each(function(){this.style[f]=a;c&&(this.style[f+"Origin"]=c)})}return this}})(Lavaca.resolve("Lavaca.fx.Transform",!0),Lavaca.$);
(function(b,h){var k={transition:["transition","transitionend"],webkitTransition:["-webkit-transition","webkitTransitionEnd"],MozTransition:["-moz-transition","MozTransitionEnd"],OTransition:["-o-transition","OTransitionEnd"],MSTransition:["-ms-transition","MSTransitionEnd"]},g,f,c;(function(){var a=document.createElement("div").style,d;for(d in k)if(d in a){g=d;f=k[d][0];c=k[d][1];break}})();b.isSupported=function(){return!!g};b.toCSS=function(a,c,b){var b=b||"linear",f=[],i=a instanceof Array,g;
for(g in a){i&&(g=a[g]);f.push(g+" "+c+"ms "+b)}return f.join(",")};b.cssProperty=function(){return f};h.fn.transition=function(a,c,f,h){if(f instanceof Function){h=f;f=null}if(b.isSupported()){var i=b.toCSS(a,c,f);h&&this.nextTransitionEnd(h);this.each(function(){this.style[g]=i});this.css(a)}else{this.css(a);h&&h.call(this[0],{})}return this};h.fn.transitionEnd=function(a,d){return c?this.on(c,a,d):this};h.fn.nextTransitionEnd=function(a,d){return c?this.one(c,a,d):this}})(Lavaca.resolve("Lavaca.fx.Transition",
!0),Lavaca.$);
(function(b,h,k,g){b.Controller=h.extend(function(f,c){if(f instanceof b.Controller){this.router=f.router;this.viewManager=f.viewManager}else{this.router=f;this.viewManager=c}},{router:null,viewManager:null,exec:function(b,c,a){this.params=c;this.state=a;var d=new k(this),e;if(a){e=a.state;d.success(function(){document.title=a.title})}b=this[b](c,e);b instanceof k?d.when(b):d.resolve();return d},ajax:function(b){return k.when(this,Lavaca.net.Connectivity.ajax(b))},view:function(b,c,a,d){return k.when(this,
this.viewManager.load(b,c,a,d))},ajaxThenView:function(b,c,a,d,e){var g=new k(this),i=this;this.ajax(b).success(function(b){g.when(this.view(a,d,c.apply(i,arguments),e))}).error(function(){g.reject.apply(g,arguments)});return g},history:function(b,c,a,d){var e=!this.state;return function(){if(e)Lavaca.net.History[d?"replace":"push"](b,c,a)}},translate:function(b,c){var a=Lavaca.util.Translation.get(b);a&&c&&(a=g.format.apply(null,[a].concat(c)));return a},url:function(b,c){return g.format(b,c,encodeURIComponent)},
redirect:function(b,c){return this.router.unlock().exec(this.url(b,c||[]))},ajaxThenRedirect:function(b,c){var a=new k(this),d=this;this.ajax(b).success(function(b){a.when(this.redirect(c.apply(d,arguments)))}).error(function(){a.reject.apply(a,arguments)});return a},dispose:function(){this.router=this.viewManager=null;h.prototype.dispose.apply(this,arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util.Disposable,Lavaca.util.Promise,Lavaca.util.StringUtils,Lavaca.$);
(function(b,h,k,g,f){function c(a,c,d,b,f,g){a.trigger(c,{attribute:d,previous:b===e?null:b,value:f===e?a.get(d):f,messages:g||[]})}function a(a,c,d){for(var c=!!c,b=["suppressValidation","suppressEvents","suppressTracking"],f={},e=-1,g;g=b[++e];){f[g]=a[g];a[g]=c||a[g]}c=d.call(a);for(e=-1;g=b[++e];)a[g]=f[g];return c}function d(a){var c=true,d;for(d in a)a[d].length>0&&(c=false);a.isValid=c;return a}var e;b.Model=h.extend(function(a){h.call(this);this.attributes=new k;this.rules=new k;this.unsavedAttributes=
[];this.flags={};this.defaults&&(a=Lavaca.merge({},this.defaults,a));if(a){this.suppressEvents=this.suppressTracking=true;this.apply(a);this.suppressEvents=this.suppressTracking=false}},{suppressValidation:false,suppressTracking:false,get:function(a){a=this.attributes.get(a);return typeof a==="function"?a.call(this):a},canSet:function(){return true},set:function(d,b,e,g){return a(this,g,function(){if(!this.canSet(d))return false;var a=this.attributes.get(d),g=this.suppressValidation?[]:this.validate(d,
b);if(g.length){c(this,"invalid",d,a,b,g);return false}if(a!==b){this.attributes.set(d,b);if(e){(g=this.flags[e])||(g=this.flags[e]=[]);f.contains(g,d)||g.push(d)}c(this,"change",d,a,b);!this.suppressTracking&&!Lavaca.util.ArrayUtils.contains(this.unsavedAttributes,d)&&this.unsavedAttributes.push(d)}return true})},has:function(a){return this.get(a)!==null},idAttribute:"id",id:function(){return this.get(this.idAttribute)},isNew:function(){return null===this.id()},parse:function(a){typeof a=="string"&&
(a=JSON.parse(a));return a},apply:function(c,d){a(this,d,function(){c=this.parse(c);for(var a in c)this.set(a,c[a])})},clear:function(a){if(a){var a=this.flags[a],c=-1,d,b;if(a)for(;d=a[++c];){f.remove(this.unsavedAttributes,d);(b=this.get(d))&&b.dispose&&b.dispose();this.set(d,null)}}else{this.attributes.dispose();this.attributes=new k;this.unsavedAttributes.length=0}},clone:function(){return new this.constructor(this.attributes.toObject())},addRule:function(a,c,d){this.rules.get(a,[]).push({rule:c,
message:d})},validate:function(a,c){var b,f,g=-1,h;if(a){b=[];c=c===e?this.get(a,c):c;if(f=this.rules.get(a))for(;h=f[++g];)h.rule(a,c)||b.push(h.message);return b}b={};this.rules.each(function(a){b[a]=this.validate(a)},this);return d(b)},onFetchSuccess:function(a){a=this.parse(a);this.apply(a,true);this.trigger("fetchSuccess",{response:a})},onFetchError:function(a){this.trigger("fetchError",{response:a})},fetch:function(a,c){c=Lavaca.clone(c||{});c.url=a;return g.when(this,Lavaca.net.Connectivity.ajax(c)).success(this.onFetchSuccess).error(this.onFetchError)},
save:function(a,c){for(var d=new g(this),b=this.toObject(),f={},h=-1,k;k=this.unsavedAttributes[++h];)f[k]=b[k];d.success(function(a){var c=this.idAttribute;this.isNew()&&a[c]!==e&&this.set(c,a[c]);this.unsavedAttributes=[];this.trigger("saveSuccess",{response:a})}).error(function(a){this.trigger("saveError",{response:a})});b=a.call(c||this,this,f,b);b instanceof g?d.when(b):b?d.resolve(b):d.reject(b);return d},saveToServer:function(a){return this.save(function(c,d,b){c=this.id();this.isNew()?d=b:
d[this.idAttribute]=c;return g.when(this,Lavaca.net.Connectivity.ajax({url:a,cache:false,type:"POST",data:d,dataType:"json"}))})},toObject:function(){var a=this.attributes.toObject(),c;for(c in a)typeof a[c]==="function"&&(a[c]=a[c].call(this));return a},toJSON:function(){return JSON.stringify(this.toObject())},on:function(a,c,d,b){function f(a){if(!c||a.attribute==c)d.call(b||this,a)}if(typeof c=="function"){b=d;d=c;c=null}f.fn=d;f.thisp=b;return h.prototype.on.call(this,a,f,b)}});b.Model.SENSITIVE=
"sensitive"})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.events.EventDispatcher,Lavaca.util.Cache,Lavaca.util.Promise,Lavaca.util.ArrayUtils);
(function(b,h,k,g,f){function c(a,c,b,f,g){a.trigger(c,{previousIndex:b,index:f,model:g})}function a(a,c){var b=c?1:-1;return function(c,f){var e=c.get(a),g=f.get(a);return e==g?0:e<g?b:-b}}b.Collection=h.extend(function(a,c){h.call(this,c);this.models=[];this.changedOrder=false;this.addedItems=[];this.removedItems=[];this.changedItems=[];if(a){this.suppressEvents=true;this.add.apply(this,a);this.suppressEvents=false}},{TModel:b.Model,itemsProperty:"items",clear:function(){h.prototype.clear.apply(this,
arguments);for(var a=-1,c;c=this.models[++a];)this.remove(c);this.changedOrder=false;this.addedItems.length=this.removedItems.length=this.changedItems.length=this.models.length=0},prepare:function(a){a=a instanceof this.TModel?a:this.TModel.prototype instanceof b.Collection?new this.TModel(a[this.TModel.prototype.itemsProperty],a):new this.TModel(a);if(f.indexOf(this.models,a)==-1)a.on("change",this.onItemEvent,this).on("invalid",this.onItemEvent,this).on("saveSuccess",this.onItemEvent,this).on("saveError",
this.onItemEvent,this);return a},canSet:function(a){return a!=this.itemsProperty},add:function(){if(arguments.length&&arguments[0]instanceof Array)return this.add.apply(this,arguments[0]);var a=false,b,g,i,h,k;b=0;for(g=arguments.length;b<g;b++){i=arguments[b];h=i instanceof this.TModel;i=this.prepare(i);k=f.indexOf(this.models,i);if(!h||!f.contains(this.models,i)){this.models.push(i);if(!this.suppressTracking){f.remove(this.removedItems,i);f.remove(this.changedItems,i);f.pushIfNotExists(this.addedItems,
i)}c(this,"addItem",null,k,i);a=true}}return a},moveTo:function(a,b){a instanceof this.TModel&&(a=f.indexOf(this.models,a));if(a>-1){var g=this.models.splice(a,1)[0];if(g){this.models.splice(b,0,g);if(!this.suppressTracking)this.changedOrder=true;c(this,"moveItem",a,b,g)}}},remove:function(a){if(a instanceof this.TModel){var b=f.remove(this.models,a);if(b>-1){if(!this.suppressTracking){f.remove(this.addedItems,a);f.remove(this.changedItems,a);f.pushIfNotExists(this.removedItems,a)}a.off("change",
this.onItemEvent).off("invalid",this.onItemEvent).off("saveSuccess",this.onItemEvent).off("saveError",this.onItemEvent);c(this,"removeItem",b,null,a);return true}return false}for(var b=this.filter(a),g=-1,i=false;a=b[++g];)i=this.remove(a)||i;return i},filter:function(a,c){var c=c===void 0?Number.MAX_VALUE:c,b=[],f=-1,g,h,k;if(typeof a!="function"){h=a;a=function(a,c){for(k in h)if(c.get(k)!=h[k])return false;return true}}for(;g=this.models[++f];)if(a(f,g)){b.push(g);if(--c<1)break}return b},first:function(a){return this.filter(a,
1)[0]||null},itemAt:function(a){return this.models[a]},count:function(){return this.models.length},each:function(a,c){for(var b=-1,f;f=this.itemAt(++b);)a.call(c||this,b,f)},sort:function(c,b){var f=typeof c==="function"?c:a(c,b),g=Lavaca.clone(this.models);this.models.sort(f,this);if(!this.suppressTracking)this.changedOrder=true;this.trigger("rearrange",{oldModels:g,newModels:this.models});return this},reverse:function(){var a=Lavaca.clone(this.models);this.models.reverse();if(!this.suppressTracking)this.changedOrder=
true;this.trigger("rearrange",{oldModels:a,newModels:this.models});return this},onItemEvent:function(a){var c=a.target,b=f.indexOf(this.models,c);a.type=="change"?f.pushIfNotExists(this.changedItems,c):a.type=="saveSuccess"&&f.remove(this.changedItems,c);this.trigger(a.type+"Item",Lavaca.merge({},a,{target:c,model:c,index:b,previousIndex:null}))},onFetchSuccess:function(a){var c=a=this.parse(a);if(!(c instanceof Array)){this.apply(a);c=a[this.itemsProperty]}this.add.apply(this,c);this.trigger("fetchSuccess",
{response:a})},saveToServer:function(a){return this.save(function(c,b,f){c=this.id();this.isNew()?b=f:b[this.idAttribute]=c;return(new g(this)).when(Lavaca.net.Connectivity.ajax({url:a,cache:false,type:"POST",data:b,dataType:"json"}))})},toObject:function(a){for(var c=h.prototype.toObject.apply(this,arguments),b=this.itemsProperty,f=c[b]=[],g=-1,k;k=this.models[++g];)f[c[b].length]=a&&!k.isNew()?k.id():k.toObject();return c}})})(Lavaca.mvc,Lavaca.mvc.Model,Lavaca.util.Cache,Lavaca.util.Promise,Lavaca.util.ArrayUtils);
(function(b,h){function k(){return RegExp("\\{\\*(.*?)\\}","g")}function g(b){b=decodeURIComponent(b);if(isNaN(b))if(b.toLowerCase()=="true")b=true;else if(b.toLowerCase()=="false")b=false;else{if(RegExp("^\\d{4}-[0-1]\\d-[0-3]\\d$","g").test(b)){b=b.split("-");b=new Date(Number(b[0]),Number(b[1])-1,Number(b[2]))}}else b=Number(b);return b}b.Route=h.extend(function(b,c,a,d){h.call(this);this.pattern=b;this.TController=c;this.action=a;this.params=d||{}},{matches:function(b){var c;c=this.pattern;if(c==
"/")c=RegExp("^\\/(\\?.*)?(#.*)?$","g");else{c.charAt(0)=="/"&&(c=c.slice(1));c=c.split("/");for(var a="^",d=-1,e;e=c[++d];)a=k().test(e)?a+"(/([^/?#]+))*?":RegExp("\\{([^\\/]*?)\\}","g").test(e)?a+"/([^/?#]+)":a+("/"+e);c=RegExp(a+"(\\?.*)?(#.*)?$","g")}return c.test(b)},parse:function(b){var c=Lavaca.clone(this.params),a=this.pattern.slice(1),d=b.split("#"),e,h,i;c.url=b;c.route=this;d=d[1]?d[1].split("?"):d[0].split("?");if(e=d[1]){b=-1;for(e=e.split("&");h=e[++b];){h=h.split("=");i=decodeURIComponent(h[0]);
if(c[i]!==void 0){c[i]instanceof Array||(c[i]=[c[i]]);c[i].push(g(h[1]))}else c[i]=g(h[1])}}b=0;d=d[0].replace(/(^(http(s?)\:\/\/[^\/]+)?\/?)|(\/$)/,"");h=RegExp(a.replace(k(),"(.+)").replace(RegExp("\\{([^\\/]*?)\\}","g"),"([^/]+)"));d=h.exec(d);for(e=h.exec(a);h=d[++b];){a=e[b];k().test(a)&&(h=h.split("/"));c[a.replace(RegExp("[\\{\\}\\*]","g"),"")]=h}return c},exec:function(b,c,a,d,e){function g(){Lavaca.delay(i.dispose,i)}var i=new this.TController(c,a),b=this.parse(b),d=i.exec(this.action,Lavaca.merge(b,
e),d);d.then(g,g);return d}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util.Disposable);
(function(b,h,k){b.Router=h.extend(function(b){h.call(this);this.routes=[];this.viewManager=b;this.onpopstate=function(b){this.hasNavigated&&this.exec(b.url,b)};Lavaca.net.History.on("popstate",this.onpopstate,this)},{locked:false,hasNavigated:false,add:function(g,f,c,a){if(typeof g=="object")for(var d in g){a=g[d];if(a instanceof Array){f=a[0];c=a[1];a=a[2]}else{f=a.controller;c=a.action;a=a.params}this.add(d,f,c,a)}else this.routes.push(new b.Route(g,f,c,a));return this},exec:function(b,f,c){if(this.locked)return(new k(this)).reject("locked");
this.locked=true;b||(b="/");b.indexOf("http")==0&&(b=b.replace(/^http(s?):\/\/.+?/,""));var a=-1,d,e=new k(this);e.always(function(){this.unlock()});for(this.hasNavigated||e.success(function(){this.hasNavigated=true});d=this.routes[++a];)if(d.matches(b))return e.when(d.exec(b,this,this.viewManager,f,c));return e.reject(b,f)},unlock:function(){this.locked=false;return this},dispose:function(){if(this.onpopstate){Lavaca.net.History.off("popstate",this.onpopstate);this.onpopstate=null}h.prototype.dispose.apply(this,
arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util.Disposable,Lavaca.util.Promise);
(function(b,h,k,g){b.View=k.extend(function(b,c,a,d){k.call(this);this.model=b||null;this.layer=c||0;this.eventMap=a||{};this.widgetMap=d||{};this.widgets=new Lavaca.util.Cache;this.on("rendersuccess",this.onRenderSuccess).on("rendererror",this.onRenderError)},{el:null,shell:null,template:null,className:null,wrapper:function(){return h('<div class="view"></div>')},interior:function(){return h('<div class="view-interior"></div>')},render:function(){var f=new g(this),c=Lavaca.ui.Template.get(this.template),
a=this.model;a instanceof b.Model&&(a=a.toObject());this.el&&this.el.detach();this.shell=this.wrapper();this.el=this.interior();this.shell.append(this.el);this.shell.attr("data-layer-index",this.layer);this.className&&this.shell.addClass(this.className);f.success(function(a){this.trigger("rendersuccess",{html:a})}).error(function(a){this.trigger("rendererror",{err:a})});this.shell.addClass("tmpl-"+this.template.toLowerCase().replace(/\s/g,"-"));c.render(a).success(f.resolver()).error(f.rejector());
return f},redraw:function(f,c){var a=new g(this),d=new g(this),e=Lavaca.ui.Template.get(this.template),k;if(typeof f==="object"||f instanceof b.Model){c=f;k=true;f=null}else if(typeof f=="boolean"){k=f;f=null}else f||(k=true);if(!this.hasRendered)return d.rejector("View has not been rendered yet and cannot be redrawn.");c=c||this.model;c instanceof b.Model&&(c=c.toObject());a.success(function(a){if(k){this.el.html(a);d.resolve(a)}else if(f){var c=h("<div>"+a+"</div>").find(f),b=this.el.find(f);if(c.length>
0&&c.length===b.length){b.each(function(a){h(this).replaceWith(c.eq(a))});d.resolve(a)}else d.reject("Count of items matching selector is not the same in the original html and in the newly rendered html.")}else d.resolve(a)}).error(d.rejector());e.render(c).success(a.resolver()).error(a.rejector());return d},clearModelEvents:function(){var b,c;if(this.eventMap&&this.eventMap.model&&this.model&&this.model instanceof k)for(b in this.eventMap.model){c=this.eventMap.model[b];if(typeof c=="object")c=c.on;
this.model.off(b,c,this)}},applyEvents:function(){var b=this.el,c,a,d,e,g;for(d in this.eventMap){c=this.eventMap[d];for(e in c){a=c[e];if(typeof a=="object"){g=a;a=a.on}else g=void 0;if(d=="model"){if(this.model&&this.model instanceof k)this.model.on(e,a,this)}else if(e=="tap"&&b.tap)b.tap(d,a);else if(e=="taphold"&&b.taphold)b.taphold(d,a,g?g.duration:void 0);else if(e=="swipe"&&b.swipe)b.swipe(d,a,g);else if(e=="animationEnd"&&b.animationEnd)b.animationEnd(d,a);else if(e=="transitionEnd"&&b.transitionEnd)b.transitionEnd(d,
a);else b.on(e,d,a)}}},mapEvent:function(b,c,a){var d;if(typeof b=="object"){d=b;for(b in d)for(c in d[b])this.mapEvent(b,c,d[b][c])}else{(d=this.eventMap[b])||(d=this.eventMap[b]={});d[c]=a}return this},createWidgets:function(){var b=this.widgets,c,a,d;for(a in this.widgetMap){d=this.widgetMap[a];(a=="self"?this.el:this.el.find(a)).each(function(a,g){c=new d(h(g));b.set(c.id,c)})}},mapWidget:function(b,c){if(typeof b=="object"){var a=b;for(b in a)this.mapWidget(b,a[b])}else this.widgetMap[b]=c;return this},
insertInto:function(b){if(!this.shell.parent()[0]!=b[0]){for(var c=b.children("[data-layer-index]"),a=-1,d;d=c[++a];){d=h(d);if(d.attr("data-layer-index")>this.index){this.shell.insertBefore(d);return}}b.append(this.shell)}},enter:function(b){var c=new g(this),a,b=h(b);this.hasRendered||(a=this.render().error(c.rejector()));this.insertInto(b);a?c.when(a):Lavaca.delay(c.resolver());c.then(function(){this.trigger("enter")});return c},exit:function(){var b=new g(this);this.shell.detach();Lavaca.delay(b.resolver());
b.then(function(){this.trigger("exit")});return b},onRenderSuccess:function(b){this.el.html(b.html);this.applyEvents(this.el);this.createWidgets(this.el);this.hasRendered=true},onRenderError:function(b){Lavaca.log(b.err)},dispose:function(){this.model&&this.clearModelEvents();this.template=this.model=null;k.prototype.dispose.apply(this,arguments)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.$,Lavaca.events.EventDispatcher,Lavaca.util.Promise);
(function(b,h,k,g,f,c){b.ViewManager=f.extend(function(a){f.call(this);this.el=k(a||document.body);this.views=new h.Cache;this.layers=[];this.exitingViews=[];this.enteringViews=[]},{locked:false,load:function(a,c,b,f){function i(){h.enteringViews=[k];p.success(function(){Lavaca.delay(function(){h.enteringViews=[]})});t=h.dismissLayersAbove(f-1,k);if(h.layers[f]!=k){o.when(k.enter(h.el,h.exitingViews),t).then(p.resolve);h.layers[f]=k}else p.when(t)}if(this.locked)return(new g(this)).reject("locked");
this.locked=true;var f=f||0,h=this,k=this.views.get(a),p=new g(this),o=new g(p),r=null,t=null;p.always(function(){this.locked=false});if(!k){k=new c(b,f);r=k.render();if(a!==null){this.views.set(a,k);k.cacheKey=a}}r?r.then(i,p.rejector()):i();return p},dismiss:function(a){if(typeof a=="number")this.dismissLayersAbove(a-1);else if(a instanceof Lavaca.mvc.View)this.dismiss(a.layer);else{var a=k(a),c=a.attr("data-layer-index");if(c===null){a=a.closest("[data-layer-index]");c=a.attr("data-layer-index")}c!==
null&&this.dismiss(Number(c))}},dismissLayersAbove:function(a,b){var e=new g(this),f=false,i,h;for(i=this.layers.length-1;i>a;i--)if((h=this.layers[i])&&(!b||b!=h)){(function(a){this.exitingViews.push(a);e.when(a.exit(this.el,this.enteringViews)).success(function(){Lavaca.delay(function(){c.remove(this.exitingViews,a);(!a.cacheKey||b&&b.cacheKey==a.cacheKey)&&a.dispose()},this)});this.layers[i]=null}).call(this,h);f=true}f||e.resolve();return e},flush:function(a){if(a)this.views.remove(a);else{for(var a=
-1,c;c=this.layers[++a];)c.cacheKey&&this.views.remove(c.cacheKey);this.views.dispose();this.views=new h.Cache}},dispose:function(){f.prototype.dispose.call(this)}})})(Lavaca.resolve("Lavaca.mvc",!0),Lavaca.util,Lavaca.$,Lavaca.util.Promise,Lavaca.util.Disposable,Lavaca.util.ArrayUtils);
(function(b,h,k){function g(b){b.preventDefault();b.stopPropagation()}b.Application=h.extend(function(b){Lavaca.env.Device.init(k.proxy(this.init,this));k(window).on("unload",k.proxy(this.dispose,this));if(b)this.on("init",b)},{TViewManager:Lavaca.mvc.ViewManager,TRouter:Lavaca.mvc.Router,TState:Lavaca.mvc.Model,initRoute:"/",initState:null,initParams:null,initLocale:"en_US",viewRootSelector:"#view-root",onInvalidRoute:function(b){b!="locked"&&plugins.notification.alert("An error occurred while trying to display this URL.")},
onTapLink:function(b){var c=k(b.currentTarget),a=c.attr("href"),d=c.attr("rel"),e=c.attr("target");if(/^((mailto)|(tel)|(sms))\:/.test(a)){location.href=a;return true}b.preventDefault();if(d=="back")Lavaca.net.History.back();else if(d=="nofollow"||e=="_blank"){b.stopPropagation();plugins.childBrowser.showWebPage(a)}else d=="cancel"?this.viewManager.dismiss(b.currentTarget):a&&this.router.exec(a,null,c.dataAttrs()).error(this.onInvalidRoute)},ajax:function(){return Lavaca.net.Connectivity.ajax.apply(Lavaca.net.Connectivity,
arguments)},init:function(){var b=new Lavaca.util.Promise(this);this.mobileBrowser=Lavaca.env.Device.mobileBrowser();this.animations=!this.mobileBrowser.android;this.state=new this.TState;Lavaca.util.Config.init();this.state.set("lang",localStorage.getItem("app:lang")||this.initLocale);Lavaca.util.Translation.init(app.state.get("lang"));Lavaca.ui.Template.init();this.viewManager=new this.TViewManager(this.viewRootSelector);this.router=new this.TRouter(this.viewManager);k(document.body).tap("a",this.onTapLink,
this).tap(".ui-blocker",g);this.trigger("init");if(this.router.hasNavigated)b.resolve();else{b.when(this.router.exec(this.initialHashRoute||this.initRoute,this.initState,this.initParams));this.initState&&Lavaca.net.History.replace(this.initState.state,this.initState.title,this.initState.url)}return b.then(function(){this.trigger("ready")})},dispose:function(){this.trigger("dispose");Lavaca.util.Config.dispose();Lavaca.util.Translation.dispose();Lavaca.ui.Template.dispose();h.prototype.dispose.call(this)},
initialHashRoute:function(b){b=b.match(/^(?:#)(\/.*)#?@?/);return b instanceof Array&&b[1]?b[1].replace(/#.*/,""):null}(window.location.hash)})})(Lavaca.mvc,Lavaca.events.EventDispatcher,Lavaca.$);(function(b,h){function k(){throw"Not implemented";}b.Store=h.extend(function(b){this.id=b},{get:function(){k()},set:function(){k()},remove:function(){k()},all:function(){k()}})})(Lavaca.resolve("Lavaca.storage",!0),Lavaca.util.Disposable);
(function(b,h,k){function g(b){localStorage.setItem(b.id+"@manifest",JSON.stringify(b.manifest))}b.LocalStore=b.Store.extend(function(f){b.Store.call(this,f);this.manifest=JSON.parse(localStorage.getItem(this.id+"@manifest")||"[]")},{key:function(b){return this.id+":"+b},get:function(b){return(b=localStorage.getItem(this.key(b)))?JSON.parse(h.decompress(b)):null},set:function(b,c){localStorage.setItem(this.key(b),h.compress(JSON.stringify(c)));k.pushIfNotExists(this.manifest,b);g(this)},remove:function(b){localStorage.removeItem(this.key(b));
k.remove(this.manifest,b);g(this)},all:function(){for(var b=[],c=-1,a;a=this.manifest[++c];)b.push(this.get(a));return b}})})(Lavaca.resolve("Lavaca.storage"),Lavaca.util.StringUtils,Lavaca.util.ArrayUtils);
(function(b,h){function k(a){if(a==c)for(var b=-1,e;e=f[++b];)e(a)}var g=typeof navigator.onLine=="boolean",f=[],c="offline";navigator.userAgent.indexOf("Android");b.isOffline=function(){var a=Lavaca.resolve("navigator.connection.type");return a!==null?a==Lavaca.resolve("Connection.NONE"):g?!navigator.onLine:false};b.ajax=function(a){var d=new Lavaca.util.Promise,e=a.success,f=a.error;a.success=function(){e&&e.apply(this,arguments);d.resolve.apply(d,arguments)};a.error=function(){f&&f.apply(this,
arguments);d.reject.apply(d,arguments)};b.isOffline()?d.reject(c):h.ajax(a);d.error(k);return d};b.registerOfflineAjaxHandler=function(a){f.push(a)}})(Lavaca.resolve("Lavaca.net.Connectivity",!0),Lavaca.$);
(function(b,h,k){function g(c,b,d,e,f,g){c.position=b;e={id:d,state:e,title:f,url:g};c.sequence[b]=e;location.hash=a=g+"#@"+d;return e}var f=!(navigator.userAgent.indexOf("Android")>-1)&&typeof k.pushState=="function",c=false,a,d,e=0;b.History=h.extend(function(){h.call(this);this.sequence=[];this.position=-1;this.replace({},document.title,location.pathname);var c=this;if(f){this.onPopState=function(a){if(a.state){e--;c.trigger("popstate",{state:a.state.state,title:a.state.title,url:a.state.url})}};
window.addEventListener("popstate",this.onPopState,false)}else{this.onPopState=function(){var b=location.hash,d,f,g=-1;b&&(b=b.replace(/^#/,""));if(b!=a)if(a=b){e--;for(b=b.split("#@")[1];f=c.sequence[++g];)if(f.id==b){d=f;this.position=g;break}if(d){location.hash=d.url+"#@"+d.id;document.title=d.title;c.trigger("popstate",{state:d.state,title:d.title,url:d.url})}}};window.attachEvent?window.attachEvent("onhashchange",this.onPopState):window.addEventListener("hashchange",this.onPopState,false)}},
{current:function(){return this.sequence[this.position]||null},hasHistory:function(){return e>0},push:function(a,b,d){e++;if(c){document.title=b;f?k.pushState({state:a,title:b,url:d},b,d):g(this,++this.position,Lavaca.uuid(),a,b,d)}else this.replace(a,b,d)},replace:function(a,b,d){c=true;document.title=b;if(f)k.replaceState({state:a,title:b,url:d},b,d);else{if(this.position<0)this.position=0;var e=this.current()||{id:Lavaca.uuid()};g(this,this.position,e.id,a,b,d)}},dispose:function(){this.onPopState&&
(f?window.removeEventListener("popstate",this.onPopState,false):window.detachEvent?window.detachEvent("onhashchange",this.onPopState):window.removeEventListener("hashchange",this.onPopState,false));h.prototype.dispose.call(this)}});b.History.init=function(a){if(!d){a&&b.History.overrideStandardsMode();d=new b.History}return d};b.History.push=function(){b.History.init().push.apply(d,arguments)};b.History.replace=function(){b.History.init().replace.apply(d,arguments)};b.History.back=function(){k.back()};
b.History.forward=function(){k.forward()};b.History.dispose=function(){if(_history){d.dispose();d=null}};b.History.on=function(){return b.History.init().on.apply(d,arguments)};b.History.off=function(){return b.History.init().off.apply(d,arguments)};b.History.overrideStandardsMode=function(){f=false}})(Lavaca.resolve("Lavaca.net",!0),Lavaca.events.EventDispatcher,window.history);
(function(b,h,k){var g=new Lavaca.util.Cache,f=[];b.Template=k.extend({compile:function(){},render:function(){throw"Abstract";},process:function(c){this.code=c}});b.Template.get=function(c){return g.get(c)};b.Template.init=function(c){for(var a=-1,b;b=f[++a];)k.init(g,b.mime,function(a,c,f){return new b.js(a,c,f)},c)};b.Template.dispose=function(){k.dispose(g)};b.Template.render=function(c,a){var d=b.Template.get(c);if(d)return d.render(a);throw'No template named "'+c+'"';};b.Template.register=function(c,
a){f[f.length]={mime:c,js:a}}})(Lavaca.resolve("Lavaca.ui",!0),Lavaca.$,Lavaca.util.Map);
(function(b,h,k,g){b.DustTemplate=k.extend(function(b,c,a){k.apply(this,arguments);var d=this.prepareHelpers(),e;if(!h.helpers)h.helpers=[];for(e in d)h.helpers[e]=d[e]},{prepareHelpers:function(){return{msg:this.helperMsg,include:this.helperInclude,config:this.helperConfig}},helperMsg:function(b,c,a,d){var e=h.helpers.tap(d.key,b,c),k=h.helpers.tap(d.locale,b,c),i=g.get(e,k),e=[i],k=-1;if(!i)return a.block?b.render(a.block,c):b;for(a=d["p"+ ++k];typeof a!=="undefined";){e.push(h.helpers.tap(a,b,
c));a=d["p"+ ++k]}return b.write(Lavaca.util.StringUtils.format.apply(this,e))},helperInclude:function(b,c,a,d){var a=h.helpers.tap(d.name,b,c),e;k.render(a,c.stack.head).then(function(a){e=a});return b.write(e)},helperConfig:function(b,c,a,d){var e=h.helpers.tap(d.key,b,c),g=h.helpers.tap(d.environment,b,c),i=g?Lavaca.util.Config.get(g,e):Lavaca.util.Config.get(e),e=[i],g=-1;if(d.only||d.not){e=Lavaca.util.Config.currentEnvironment();return d.only&&e==d.only||d.not&&e!=d.not?a.block?b.render(a.block,
c):b:a["else"]?b.render(a["else"],c):b}if(!i)return a.block?b.render(a.block,c):b;for(a=d["p"+ ++g];typeof a!=="undefined";){e.push(h.helpers.tap(a,b,c));a=d["p"+ ++g]}return b.write(Lavaca.util.StringUtils.format.apply(this,e))},compile:function(){k.prototype.compile.call(this);h.loadSource(h.compile(this.code,this.name))},render:function(b){var c=new Lavaca.util.Promise(this);!this.code&&this.src&&this.load(this.src);if(this.code&&!this.compiled){this.compile();this.compiled=true}h.render(this.name,
b,function(a,b){a?c.reject(a):c.resolve(b)});return c},dispose:function(){delete h.cache[this.name];k.prototype.dispose.call(this)}});b.Template.register("text/dust-template",b.DustTemplate)})(Lavaca.ui,dust,Lavaca.ui.Template,Lavaca.util.Translation);(function(b,h,k){b.Widget=k.extend(function(b){k.call(this);this.el=b=h(b);var f=b.attr("id");if(!f){f="widget-"+Lavaca.uuid();b.attr("id",f)}this.id=f})})(Lavaca.resolve("Lavaca.ui",!0),Lavaca.$,Lavaca.events.EventDispatcher);
(function(b,h,k,g){function f(a){return a?null:"error_required"}function c(a,b){return a&&!RegExp(b.attr("pattern")).test(a)?"error_pattern":null}function a(a){return a&&!/^\w+@\w+(\.\w+)*\.\w+$/.test(a)?"error_email":null}function d(a){return a&&!/^\d?(\d{3})?\d{7}$/.test(a.replace(/\D/g,""))?"error_email":null}function e(a){return a&&!/^\d+(\.\d+)?$/.test(a)?"error_number":null}function l(a){return a&&!/^https?:\/\/\w+(\.\w+)*\.\w(:\d+)?\/\S+$/.test(a)?"error_url":null}b.Form=k.extend(function(){k.apply(this,
arguments);var a=this;this.pendingSync={};this._onChangeInput=function(b){a.onChangeInput(b)};this._onSubmit=function(b){a.onSubmit(b)};this.el.on("submit",this._onSubmit);this.addRule(this.defaultRules())},{onSubmit:function(a){a.preventDefault();this.validate().success(this.onSubmitSuccess).error(this.onSubmitError)},onSubmitSuccess:function(){},onSubmitError:function(){},onChangeInput:function(a){if(this.model){var b=h(a.target),a=b.attr("name"),b=b.val();this.pendingSync[a]=true;this.model.set(a,
b);this.pendingSync[a]=false}},onChangeModel:function(a){this.pendingSync[a.attribute]||this.set(a.attribute,a.value)},bind:function(a){this.unbind();this.model=a;a.on("change",this.onChangeModel,this);this.el.on("change",this._onChangeInput)},unbind:function(){if(this.model){this.el.off("change",this._onChangeInput);this.model.off("change",this.onchangeModel,this);this.model=null}},input:function(a){return this.el.find("input, select, textarea").filter('[name="'+a+'"]')},get:function(a){return this.input(a).val()},
set:function(a,b){this.input(a).val(b||null)},defaultRules:function(){return{"[required]":f,"[pattern]":c,"[type=email]":a,"[type=tel]":d,"[type=number]":e,"[type=url]":l}},addRule:function(a,b){if(!this.rules)this.rules=[];if(typeof a=="object")for(var c in a)this.addRule(c,a[c]);else this.rules.push({selector:a,callback:b})},values:function(){for(var a=this.el.find("input, select, textarea"),b={},c=-1,d,e,f;d=a[++c];){d=h(d);e=d.attr("type");if(!(e=="radio"||e=="checkbox")||d[0].checked){e=d.attr("name");
f=b[e];d=d.val();f instanceof Array?f.push(d):b[e]=f!==void 0?[f,d]:d}}return b},validate:function(a,b,c){if(a&&typeof a!="function"){c=a;a=null}c&&(c=h(c));for(var d=null,e=new g(this),f=-1,k,l,s,q,x,z,C,L,J;l=this.rules[++f];){s=c?c.filter(l.selector):this.el.find(l.selector);for(k=-1;q=s[++k];){q=h(q);J=q.val();if(x=l.callback.call(this,J,q,this)){z=q.attr("name");d||(d={});if(!d[z]){L=q.attr("id");C=null;L&&(C=this.el.find('label[for="'+L+'"]').text());d[z]={id:L,name:z,label:C,el:q,value:J,messages:[]}}d[z].messages.push(x)}}}d?
e.reject(d):e.resolve(this.values());return e.error(function(a){this.trigger("invalid",{inputs:a})}).success(function(a){this.trigger("valid",a)}).success(a).error(b)},dispose:function(){this.unbind();k.prototype.dispose.call(this)}});b.Form.withSubmit=function(a,c){return b.Form.extend({onSubmitSuccess:function(b){a.call(this,b)},onSubmitError:function(a){c.call(this,a)}})}})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget,Lavaca.util.Promise);
(function(b,h,k){b.LoadingIndicator=k.extend({className:"loading",show:function(){this.el.addClass(this.className)},hide:function(){this.el.removeClass(this.className)}});b.LoadingIndicator.init=function(g){function f(){c.hide()}var g=g||b.LoadingIndicator,c=new g(document.body);h(document).on("ajaxStart",function(){c.show()}).on("ajaxStop",f).on("ajaxError",f);return c}})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget);
(function(b,h,k,g){var f=["overflowScrolling","webkitOverflowScrolling","MozOverflowScrolling","OOverflowScrolling","MSOverflowScrolling"],c;(function(){for(var a=document.createElement("div").style,b=-1,e;e=f[++b];)if(e in a){c=e;break}})();b.Scrollable=k.extend(function(){k.apply(this,arguments);if(!this.iScrollOptions)this.iScrollOptions={};if(this.supportsOverflow)this.initOverflowScroll();else{this.className="synthetic-scroll";this.initIScroll()}},{supportsOverflow:!!c,className:"overflow-scroll",
iScrollOptions:null,wrapper:function(){return h('<div class="scroll-wrapper"></div>')},initOverflowScroll:function(){this.el.addClass(this.className);this.preventParentScroll()},initIScroll:function(){var a=this.wrapper(),b={},c,f;for(c in this.iScrollOptions){f=this.iScrollOptions[c];typeof f=="function"&&(f=h.proxy(f,this));b[c]=f}f=b.onBeforeScrollStart;b.onBeforeScrollStart=function(a){var b=(a.explicitOriginalTarget||a.target).nodeName;if(b!="SELECT"&&b!="OPTION"&&b!="INPUT"&&b!="TEXTAREA"&&
b!="LABEL"){a.preventDefault();a.stopPropagation()}f&&f.apply(this,arguments)};this.el.addClass(this.className);a.append(this.el.children());this.el.append(a);this.iScroll=new g(this.el[0],b);this.refresh()},refresh:function(){this.supportsOverflow||Lavaca.delay(function(){this.iScroll.refresh()},this,10)},preventParentScroll:function(){var a=this.el[0];this.el.on("touchstart",function(){startTopScroll=a.scrollTop;if(startTopScroll<=0)a.scrollTop=1;if(startTopScroll+a.offsetHeight>=a.scrollHeight)a.scrollTop=
a.scrollHeight-a.offsetHeight-1})},dispose:function(){this.isScroll&&this.iScroll.destroy();k.prototype.dispose.call(this)}})})(Lavaca.ui,Lavaca.$,Lavaca.ui.Widget,iScroll);
